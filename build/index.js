function Gc(e){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){return r.reject(t)})})}function Xc(e){var r=this;return new r(function(t,i){if(!(e&&typeof e.length!="undefined"))return i(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var a=n.length;function s(h,l){if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(f){s(h,f)},function(f){n[h]={status:"rejected",reason:f},--a==0&&t(n)});return}}n[h]={status:"fulfilled",value:l},--a==0&&t(n)}for(var o=0;o<n.length;o++)s(o,n[o])})}var Hc=setTimeout;function Ko(e){return Boolean(e&&typeof e.length!="undefined")}function jc(){}function Vc(e,r){return function(){e.apply(r,arguments)}}function ae(e){if(!(this instanceof ae))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Jo(e,this)}function Qo(e,r){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(r);return}e._handled=!0,ae._immediateFn(function(){var t=e._state===1?r.onFulfilled:r.onRejected;if(t===null){(e._state===1?Ra:Ni)(r.promise,e._value);return}var i;try{i=t(e._value)}catch(n){Ni(r.promise,n);return}Ra(r.promise,i)})}function Ra(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var t=r.then;if(r instanceof ae){e._state=3,e._value=r,Oa(e);return}else if(typeof t=="function"){Jo(Vc(t,r),e);return}}e._state=1,e._value=r,Oa(e)}catch(i){Ni(e,i)}}function Ni(e,r){e._state=2,e._value=r,Oa(e)}function Oa(e){e._state===2&&e._deferreds.length===0&&ae._immediateFn(function(){e._handled||ae._unhandledRejectionFn(e._value)});for(var r=0,t=e._deferreds.length;r<t;r++)Qo(e,e._deferreds[r]);e._deferreds=null}function Yc(e,r,t){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.promise=t}function Jo(e,r){var t=!1;try{e(function(i){t||(t=!0,Ra(r,i))},function(i){t||(t=!0,Ni(r,i))})}catch(i){if(t)return;t=!0,Ni(r,i)}}ae.prototype.catch=function(e){return this.then(null,e)};ae.prototype.then=function(e,r){var t=new this.constructor(jc);return Qo(this,new Yc(e,r,t)),t};ae.prototype.finally=Gc;ae.all=function(e){return new ae(function(r,t){if(!Ko(e))return t(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(i.length===0)return r([]);var n=i.length;function a(o,h){try{if(h&&(typeof h=="object"||typeof h=="function")){var l=h.then;if(typeof l=="function"){l.call(h,function(u){a(o,u)},t);return}}i[o]=h,--n==0&&r(i)}catch(u){t(u)}}for(var s=0;s<i.length;s++)a(s,i[s])})};ae.allSettled=Xc;ae.resolve=function(e){return e&&typeof e=="object"&&e.constructor===ae?e:new ae(function(r){r(e)})};ae.reject=function(e){return new ae(function(r,t){t(e)})};ae.race=function(e){return new ae(function(r,t){if(!Ko(e))return t(new TypeError("Promise.race accepts an array"));for(var i=0,n=e.length;i<n;i++)ae.resolve(e[i]).then(r,t)})};ae._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){Hc(e,0)};ae._unhandledRejectionFn=function(r){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};var th=Object.getOwnPropertySymbols,Wc=Object.prototype.hasOwnProperty,zc=Object.prototype.propertyIsEnumerable;function qc(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function $c(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var i=Object.getOwnPropertyNames(r).map(function(a){return r[a]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(a){n[a]=a}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}var Zc=$c()?Object.assign:function(e,r){for(var t,i=qc(e),n,a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var s in t)Wc.call(t,s)&&(i[s]=t[s]);if(th){n=th(t);for(var o=0;o<n.length;o++)zc.call(t,n[o])&&(i[n[o]]=t[n[o]])}}return i};self.Promise||(self.Promise=ae);Object.assign||(Object.assign=Zc);var Kc=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});self.performance&&self.performance.now||(eh=Date.now(),self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-eh});var eh,Ua=Date.now(),rh=["ms","moz","webkit","o"];for(var ka=0;ka<rh.length&&!self.requestAnimationFrame;++ka)wn=rh[ka],self.requestAnimationFrame=self[wn+"RequestAnimationFrame"],self.cancelAnimationFrame=self[wn+"CancelAnimationFrame"]||self[wn+"CancelRequestAnimationFrame"];var wn;self.requestAnimationFrame||(self.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var r=Date.now(),t=Kc+Ua-r;return t<0&&(t=0),Ua=r,self.setTimeout(function(){Ua=Date.now(),e(performance.now())},t)});self.cancelAnimationFrame||(self.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(r){return r=Number(r),r===0||isNaN(r)?r:r>0?1:-1});Number.isInteger||(Number.isInteger=function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r});self.ArrayBuffer||(self.ArrayBuffer=Array);self.Float32Array||(self.Float32Array=Array);self.Uint32Array||(self.Uint32Array=Array);self.Uint16Array||(self.Uint16Array=Array);self.Uint8Array||(self.Uint8Array=Array);self.Int32Array||(self.Int32Array=Array);var Fa=/iPhone/i,ih=/iPod/i,nh=/iPad/i,ah=/\biOS-universal(?:.+)Mac\b/i,Ma=/\bAndroid(?:.+)Mobile\b/i,sh=/Android/i,ai=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Tn=/Silk/i,sr=/Windows Phone/i,oh=/\bWindows(?:.+)ARM\b/i,hh=/BlackBerry/i,lh=/BB10/i,uh=/Opera Mini/i,fh=/\b(CriOS|Chrome)(?:.+)Mobile/i,ch=/Mobile(?:.+)Firefox\b/i,dh=function(e){return typeof e!="undefined"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream=="undefined"};function Jc(e){return function(r){return r.test(e)}}function Qc(e){var r={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator!="undefined"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?r.userAgent=e:e&&e.userAgent&&(r={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var t=r.userAgent,i=t.split("[FBAN");typeof i[1]!="undefined"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]!="undefined"&&(t=i[0]);var n=Jc(t),a={apple:{phone:n(Fa)&&!n(sr),ipod:n(ih),tablet:!n(Fa)&&(n(nh)||dh(r))&&!n(sr),universal:n(ah),device:(n(Fa)||n(ih)||n(nh)||n(ah)||dh(r))&&!n(sr)},amazon:{phone:n(ai),tablet:!n(ai)&&n(Tn),device:n(ai)||n(Tn)},android:{phone:!n(sr)&&n(ai)||!n(sr)&&n(Ma),tablet:!n(sr)&&!n(ai)&&!n(Ma)&&(n(Tn)||n(sh)),device:!n(sr)&&(n(ai)||n(Tn)||n(Ma)||n(sh))||n(/\bokhttp\b/i)},windows:{phone:n(sr),tablet:n(oh),device:n(sr)||n(oh)},other:{blackberry:n(hh),blackberry10:n(lh),opera:n(uh),firefox:n(ch),chrome:n(fh),device:n(hh)||n(lh)||n(uh)||n(ch)||n(fh)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var Ke=Qc(self.navigator);function td(e){var r=!0;if(Ke.tablet||Ke.phone){if(Ke.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var i=parseInt(t[1],10);i<11&&(r=!1)}}if(Ke.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var i=parseInt(t[1],10);i<7&&(r=!1)}}}return r?e:4}function ed(){return!Ke.apple.device}var ph;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ph||(ph={}));var vh;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(vh||(vh={}));var _h;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(_h||(_h={}));var mh;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(mh||(mh={}));var gh;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(gh||(gh={}));var yh;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(yh||(yh={}));var xh;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(xh||(xh={}));var bh;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(bh||(bh={}));var wh;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(wh||(wh={}));var La;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(La||(La={}));var Na;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Na||(Na={}));var Da;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Da||(Da={}));var Th;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Th||(Th={}));var Eh;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Eh||(Eh={}));var Ba;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Ba||(Ba={}));var Di;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Di||(Di={}));var Sh;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Sh||(Sh={}));var Ih;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(Ih||(Ih={}));var yt={MIPMAP_TEXTURES:Da.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:td(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Ba.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Na.CLAMP,SCALE_MODE:La.LINEAR,PRECISION_VERTEX:Di.HIGH,PRECISION_FRAGMENT:Ke.apple.device?Di.HIGH:Di.MEDIUM,CAN_UPLOAD_SAME_BUFFER:ed(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};function id(e,r,t){return t={path:r,exports:{},require:function(i,n){return rd(i,n==null?t.path:n)}},e(t,t.exports),t.exports}function rd(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Bi=id(function(e){var r=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(h,l,u){this.fn=h,this.context=l,this.once=u||!1}function a(h,l,u,f,c){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new n(u,f||h,c),m=t?t+l:l;return h._events[m]?h._events[m].fn?h._events[m]=[h._events[m],p]:h._events[m].push(p):(h._events[m]=p,h._eventsCount++),h}function s(h,l){--h._eventsCount==0?h._events=new i:delete h._events[l]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)r.call(u,f)&&l.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},o.prototype.listeners=function(l){var u=t?t+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,p=f.length,m=new Array(p);c<p;c++)m[c]=f[c].fn;return m},o.prototype.listenerCount=function(l){var u=t?t+l:l,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(l,u,f,c,p,m){var _=t?t+l:l;if(!this._events[_])return!1;var v=this._events[_],y=arguments.length,E,T;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,c),!0;case 5:return v.fn.call(v.context,u,f,c,p),!0;case 6:return v.fn.call(v.context,u,f,c,p,m),!0}for(T=1,E=new Array(y-1);T<y;T++)E[T-1]=arguments[T];v.fn.apply(v.context,E)}else{var M=v.length,b;for(T=0;T<M;T++)switch(v[T].once&&this.removeListener(l,v[T].fn,void 0,!0),y){case 1:v[T].fn.call(v[T].context);break;case 2:v[T].fn.call(v[T].context,u);break;case 3:v[T].fn.call(v[T].context,u,f);break;case 4:v[T].fn.call(v[T].context,u,f,c);break;default:if(!E)for(b=1,E=new Array(y-1);b<y;b++)E[b-1]=arguments[b];v[T].fn.apply(v[T].context,E)}}return!0},o.prototype.on=function(l,u,f){return a(this,l,u,f,!1)},o.prototype.once=function(l,u,f){return a(this,l,u,f,!0)},o.prototype.removeListener=function(l,u,f,c){var p=t?t+l:l;if(!this._events[p])return this;if(!u)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!c||m.once)&&(!f||m.context===f)&&s(this,p);else{for(var _=0,v=[],y=m.length;_<y;_++)(m[_].fn!==u||c&&!m[_].once||f&&m[_].context!==f)&&v.push(m[_]);v.length?this._events[p]=v.length===1?v[0]:v:s(this,p)}return this},o.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&s(this,u)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,e.exports=o}),Ga=En,nd=En;function En(e,r,t){t=t||2;var i=r&&r.length,n=i?r[0]*t:e.length,a=Ph(e,0,n,t,!0),s=[];if(!a||a.next===a.prev)return s;var o,h,l,u,f,c,p;if(i&&(a=ad(e,r,a,t)),e.length>80*t){o=l=e[0],h=u=e[1];for(var m=t;m<n;m+=t)f=e[m],c=e[m+1],f<o&&(o=f),c<h&&(h=c),f>l&&(l=f),c>u&&(u=c);p=Math.max(l-o,u-h),p=p!==0?1/p:0}return Gi(a,s,t,o,h,p),s}function Ph(e,r,t,i,n){var a,s;if(n===Xa(e,r,t,i)>0)for(a=r;a<t;a+=i)s=Ah(a,e[a],e[a+1],s);else for(a=t-i;a>=r;a-=i)s=Ah(a,e[a],e[a+1],s);return s&&Sn(s,s.next)&&(Xi(s),s=s.next),s}function Er(e,r){if(!e)return e;r||(r=e);var t=e,i;do if(i=!1,!t.steiner&&(Sn(t,t.next)||ee(t.prev,t,t.next)===0)){if(Xi(t),t=r=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==r);return r}function Gi(e,r,t,i,n,a,s){if(!!e){!s&&a&&ud(e,i,n,a);for(var o=e,h,l;e.prev!==e.next;){if(h=e.prev,l=e.next,a?od(e,i,n,a):sd(e)){r.push(h.i/t),r.push(e.i/t),r.push(l.i/t),Xi(e),e=l.next,o=l.next;continue}if(e=l,e===o){s?s===1?(e=hd(Er(e),r,t),Gi(e,r,t,i,n,a,2)):s===2&&ld(e,r,t,i,n,a):Gi(Er(e),r,t,i,n,a,1);break}}}}function sd(e){var r=e.prev,t=e,i=e.next;if(ee(r,t,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(si(r.x,r.y,t.x,t.y,i.x,i.y,n.x,n.y)&&ee(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function od(e,r,t,i){var n=e.prev,a=e,s=e.next;if(ee(n,a,s)>=0)return!1;for(var o=n.x<a.x?n.x<s.x?n.x:s.x:a.x<s.x?a.x:s.x,h=n.y<a.y?n.y<s.y?n.y:s.y:a.y<s.y?a.y:s.y,l=n.x>a.x?n.x>s.x?n.x:s.x:a.x>s.x?a.x:s.x,u=n.y>a.y?n.y>s.y?n.y:s.y:a.y>s.y?a.y:s.y,f=Ha(o,h,r,t,i),c=Ha(l,u,r,t,i),p=e.prevZ,m=e.nextZ;p&&p.z>=f&&m&&m.z<=c;){if(p!==e.prev&&p!==e.next&&si(n.x,n.y,a.x,a.y,s.x,s.y,p.x,p.y)&&ee(p.prev,p,p.next)>=0||(p=p.prevZ,m!==e.prev&&m!==e.next&&si(n.x,n.y,a.x,a.y,s.x,s.y,m.x,m.y)&&ee(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&si(n.x,n.y,a.x,a.y,s.x,s.y,p.x,p.y)&&ee(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=c;){if(m!==e.prev&&m!==e.next&&si(n.x,n.y,a.x,a.y,s.x,s.y,m.x,m.y)&&ee(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function hd(e,r,t){var i=e;do{var n=i.prev,a=i.next.next;!Sn(n,a)&&Ch(n,i,i.next,a)&&Hi(n,a)&&Hi(a,n)&&(r.push(n.i/t),r.push(i.i/t),r.push(a.i/t),Xi(i),Xi(i.next),i=e=a),i=i.next}while(i!==e);return Er(i)}function ld(e,r,t,i,n,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&fd(s,o)){var h=Rh(s,o);s=Er(s,s.next),h=Er(h,h.next),Gi(s,r,t,i,n,a),Gi(h,r,t,i,n,a);return}o=o.next}s=s.next}while(s!==e)}function ad(e,r,t,i){var n=[],a,s,o,h,l;for(a=0,s=r.length;a<s;a++)o=r[a]*i,h=a<s-1?r[a+1]*i:e.length,l=Ph(e,o,h,i,!1),l===l.next&&(l.steiner=!0),n.push(pd(l));for(n.sort(cd),a=0;a<n.length;a++)dd(n[a],t),t=Er(t,t.next);return t}function cd(e,r){return e.x-r.x}function dd(e,r){if(r=vd(e,r),r){var t=Rh(r,e);Er(r,r.next),Er(t,t.next)}}function vd(e,r){var t=r,i=e.x,n=e.y,a=-Infinity,s;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var o=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=i&&o>a){if(a=o,o===i){if(n===t.y)return t;if(n===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==r);if(!s)return null;if(i===a)return s;var h=s,l=s.x,u=s.y,f=Infinity,c;t=s;do i>=t.x&&t.x>=l&&i!==t.x&&si(n<u?i:a,n,l,u,n<u?a:i,n,t.x,t.y)&&(c=Math.abs(n-t.y)/(i-t.x),Hi(t,e)&&(c<f||c===f&&(t.x>s.x||t.x===s.x&&_d(s,t)))&&(s=t,f=c)),t=t.next;while(t!==h);return s}function _d(e,r){return ee(e.prev,e,r.prev)<0&&ee(r.next,e,e.next)<0}function ud(e,r,t,i){var n=e;do n.z===null&&(n.z=Ha(n.x,n.y,r,t,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,md(n)}function md(e){var r,t,i,n,a,s,o,h,l=1;do{for(t=e,e=null,a=null,s=0;t;){for(s++,i=t,o=0,r=0;r<l&&(o++,i=i.nextZ,!!i);r++);for(h=l;o>0||h>0&&i;)o!==0&&(h===0||!i||t.z<=i.z)?(n=t,t=t.nextZ,o--):(n=i,i=i.nextZ,h--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;t=i}a.nextZ=null,l*=2}while(s>1);return e}function Ha(e,r,t,i,n){return e=32767*(e-t)*n,r=32767*(r-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e|r<<1}function pd(e){var r=e,t=e;do(r.x<t.x||r.x===t.x&&r.y<t.y)&&(t=r),r=r.next;while(r!==e);return t}function si(e,r,t,i,n,a,s,o){return(n-s)*(r-o)-(e-s)*(a-o)>=0&&(e-s)*(i-o)-(t-s)*(r-o)>=0&&(t-s)*(a-o)-(n-s)*(i-o)>=0}function fd(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!gd(e,r)&&(Hi(e,r)&&Hi(r,e)&&yd(e,r)&&(ee(e.prev,e,r.prev)||ee(e,r.prev,r))||Sn(e,r)&&ee(e.prev,e,e.next)>0&&ee(r.prev,r,r.next)>0)}function ee(e,r,t){return(r.y-e.y)*(t.x-r.x)-(r.x-e.x)*(t.y-r.y)}function Sn(e,r){return e.x===r.x&&e.y===r.y}function Ch(e,r,t,i){var n=Pn(ee(e,r,t)),a=Pn(ee(e,r,i)),s=Pn(ee(t,i,e)),o=Pn(ee(t,i,r));return!!(n!==a&&s!==o||n===0&&In(e,t,r)||a===0&&In(e,i,r)||s===0&&In(t,e,i)||o===0&&In(t,r,i))}function In(e,r,t){return r.x<=Math.max(e.x,t.x)&&r.x>=Math.min(e.x,t.x)&&r.y<=Math.max(e.y,t.y)&&r.y>=Math.min(e.y,t.y)}function Pn(e){return e>0?1:e<0?-1:0}function gd(e,r){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==r.i&&t.next.i!==r.i&&Ch(t,t.next,e,r))return!0;t=t.next}while(t!==e);return!1}function Hi(e,r){return ee(e.prev,e,e.next)<0?ee(e,r,e.next)>=0&&ee(e,e.prev,r)>=0:ee(e,r,e.prev)<0||ee(e,e.next,r)<0}function yd(e,r){var t=e,i=!1,n=(e.x+r.x)/2,a=(e.y+r.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&n<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==e);return i}function Rh(e,r){var t=new ja(e.i,e.x,e.y),i=new ja(r.i,r.x,r.y),n=e.next,a=r.prev;return e.next=r,r.prev=e,t.next=n,n.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function Ah(e,r,t,i){var n=new ja(e,r,t);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Xi(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ja(e,r,t){this.i=e,this.x=r,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}En.deviation=function(e,r,t,i){var n=r&&r.length,a=n?r[0]*t:e.length,s=Math.abs(Xa(e,0,a,t));if(n)for(var o=0,h=r.length;o<h;o++){var l=r[o]*t,u=o<h-1?r[o+1]*t:e.length;s-=Math.abs(Xa(e,l,u,t))}var f=0;for(o=0;o<i.length;o+=3){var c=i[o]*t,p=i[o+1]*t,m=i[o+2]*t;f+=Math.abs((e[c]-e[m])*(e[p+1]-e[c+1])-(e[c]-e[p])*(e[m+1]-e[c+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function Xa(e,r,t,i){for(var n=0,a=r,s=t-i;a<t;a+=i)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}En.flatten=function(e){for(var r=e[0][0].length,t={vertices:[],holes:[],dimensions:r},i=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var s=0;s<r;s++)t.vertices.push(e[n][a][s]);n>0&&(i+=e[n-1].length,t.holes.push(i))}return t};Ga.default=nd;var Va=2147483647,ji=36,Oh=1,Ya=26,xd=38,bd=700,wd=72,Td=128,Ed="-",Sd=/[^\x20-\x7E]/,Id=/[\x2E\u3002\uFF0E\uFF61]/g,Pd={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Wa=ji-Oh,oi=Math.floor,za=String.fromCharCode;function Uh(e){throw new RangeError(Pd[e])}function Ad(e,r){for(var t=e.length,i=[];t--;)i[t]=r(e[t]);return i}function Cd(e,r){var t=e.split("@"),i="";t.length>1&&(i=t[0]+"@",e=t[1]),e=e.replace(Id,".");var n=e.split("."),a=Ad(n,r).join(".");return i+a}function Rd(e){for(var r=[],t=0,i=e.length,n,a;t<i;)n=e.charCodeAt(t++),n>=55296&&n<=56319&&t<i?(a=e.charCodeAt(t++),(a&64512)==56320?r.push(((n&1023)<<10)+(a&1023)+65536):(r.push(n),t--)):r.push(n);return r}function kh(e,r){return e+22+75*(e<26)-((r!=0)<<5)}function Od(e,r,t){var i=0;for(e=t?oi(e/bd):e>>1,e+=oi(e/r);e>Wa*Ya>>1;i+=ji)e=oi(e/Wa);return oi(i+(Wa+1)*e/(e+xd))}function Ud(e){var r,t,i,n,a,s,o,h,l,u,f,c=[],p,m,_,v;for(e=Rd(e),p=e.length,r=Td,t=0,a=wd,s=0;s<p;++s)f=e[s],f<128&&c.push(za(f));for(i=n=c.length,n&&c.push(Ed);i<p;){for(o=Va,s=0;s<p;++s)f=e[s],f>=r&&f<o&&(o=f);for(m=i+1,o-r>oi((Va-t)/m)&&Uh("overflow"),t+=(o-r)*m,r=o,s=0;s<p;++s)if(f=e[s],f<r&&++t>Va&&Uh("overflow"),f==r){for(h=t,l=ji;u=l<=a?Oh:l>=a+Ya?Ya:l-a,!(h<u);l+=ji)v=h-u,_=ji-u,c.push(za(kh(u+v%_,0))),h=oi(v/_);c.push(za(kh(h,0))),a=Od(t,m,i==n),t=0,++i}++t,++r}return c.join("")}function kd(e){return Cd(e,function(r){return Sd.test(r)?"xn--"+Ud(r):r})}function An(e){return e===null}function Fd(e){return e==null}function qa(e){return typeof e=="string"}function Fh(e){return typeof e=="object"&&e!==null}function Md(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var Mh=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function Vi(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Nd(e,r,t,i){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Lh(Ld(e),function(n){var a=encodeURIComponent(Vi(n))+t;return Mh(e[n])?Lh(e[n],function(s){return a+encodeURIComponent(Vi(s))}).join(r):a+encodeURIComponent(Vi(e[n]))}).join(r):i?encodeURIComponent(Vi(i))+t+encodeURIComponent(Vi(e)):""}function Lh(e,r){if(e.map)return e.map(r);for(var t=[],i=0;i<e.length;i++)t.push(r(e[i],i));return t}var Ld=Object.keys||function(e){var r=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r};function Nh(e,r,t,i){r=r||"&",t=t||"=";var n={};if(typeof e!="string"||e.length===0)return n;var a=/\+/g;e=e.split(r);var s=1e3;i&&typeof i.maxKeys=="number"&&(s=i.maxKeys);var o=e.length;s>0&&o>s&&(o=s);for(var h=0;h<o;++h){var l=e[h].replace(a,"%20"),u=l.indexOf(t),f,c,p,m;u>=0?(f=l.substr(0,u),c=l.substr(u+1)):(f=l,c=""),p=decodeURIComponent(f),m=decodeURIComponent(c),Md(n,p)?Mh(n[p])?n[p].push(m):n[p]=[n[p],m]:n[p]=m}return n}function or(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Dd=/^([a-z0-9.+-]+:)/i,Bd=/:[0-9]*$/,Gd=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Xd=["<",">",'"',"`"," ","\r",`
`,"	"],Hd=["{","}","|","\\","^","`"].concat(Xd),$a=["'"].concat(Hd),Dh=["%","/","?",";","#"].concat($a),Bh=["/","?","#"],jd=255,Gh=/^[+a-z0-9A-Z_-]{0,63}$/,Vd=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Yd={javascript:!0,"javascript:":!0},Za={javascript:!0,"javascript:":!0},hi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ka(e,r,t){if(e&&Fh(e)&&e instanceof or)return e;var i=new or;return i.parse(e,r,t),i}or.prototype.parse=function(e,r,t){return Xh(this,e,r,t)};function Xh(e,r,t,i){if(!qa(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),a=n!==-1&&n<r.indexOf("#")?"?":"#",s=r.split(a),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(a);var h=r;if(h=h.trim(),!i&&r.split("#").length===1){var l=Gd.exec(h);if(l)return e.path=h,e.href=h,e.pathname=l[1],l[2]?(e.search=l[2],t?e.query=Nh(e.search.substr(1)):e.query=e.search.substr(1)):t&&(e.search="",e.query={}),e}var u=Dd.exec(h);if(u){u=u[0];var f=u.toLowerCase();e.protocol=f,h=h.substr(u.length)}if(i||u||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=h.substr(0,2)==="//";c&&!(u&&Za[u])&&(h=h.substr(2),e.slashes=!0)}var p,m,_,v;if(!Za[u]&&(c||u&&!hi[u])){var y=-1;for(p=0;p<Bh.length;p++)m=h.indexOf(Bh[p]),m!==-1&&(y===-1||m<y)&&(y=m);var E,T;for(y===-1?T=h.lastIndexOf("@"):T=h.lastIndexOf("@",y),T!==-1&&(E=h.slice(0,T),h=h.slice(T+1),e.auth=decodeURIComponent(E)),y=-1,p=0;p<Dh.length;p++)m=h.indexOf(Dh[p]),m!==-1&&(y===-1||m<y)&&(y=m);y===-1&&(y=h.length),e.host=h.slice(0,y),h=h.slice(y),Hh(e),e.hostname=e.hostname||"";var M=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!M){var b=e.hostname.split(/\./);for(p=0,_=b.length;p<_;p++){var S=b[p];if(!!S&&!S.match(Gh)){for(var U="",D=0,F=S.length;D<F;D++)S.charCodeAt(D)>127?U+="x":U+=S[D];if(!U.match(Gh)){var N=b.slice(0,p),X=b.slice(p+1),$=S.match(Vd);$&&(N.push($[1]),X.unshift($[2])),X.length&&(h="/"+X.join(".")+h),e.hostname=N.join(".");break}}}}e.hostname.length>jd?e.hostname="":e.hostname=e.hostname.toLowerCase(),M||(e.hostname=kd(e.hostname)),v=e.port?":"+e.port:"";var Z=e.hostname||"";e.host=Z+v,e.href+=e.host,M&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),h[0]!=="/"&&(h="/"+h))}if(!Yd[f])for(p=0,_=$a.length;p<_;p++){var ut=$a[p];if(h.indexOf(ut)!==-1){var W=encodeURIComponent(ut);W===ut&&(W=escape(ut)),h=h.split(ut).join(W)}}var Y=h.indexOf("#");Y!==-1&&(e.hash=h.substr(Y),h=h.slice(0,Y));var at=h.indexOf("?");if(at!==-1?(e.search=h.substr(at),e.query=h.substr(at+1),t&&(e.query=Nh(e.query)),h=h.slice(0,at)):t&&(e.search="",e.query={}),h&&(e.pathname=h),hi[f]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){v=e.pathname||"";var mt=e.search||"";e.path=v+mt}return e.href=Ja(e),e}function Wd(e){return qa(e)&&(e=Xh({},e)),Ja(e)}function Ja(e){var r=e.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=e.protocol||"",i=e.pathname||"",n=e.hash||"",a=!1,s="";e.host?a=r+e.host:e.hostname&&(a=r+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(a+=":"+e.port)),e.query&&Fh(e.query)&&Object.keys(e.query).length&&(s=Nd(e.query));var o=e.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),e.slashes||(!t||hi[t])&&a!==!1?(a="//"+(a||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):a||(a=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),i=i.replace(/[?#]/g,function(h){return encodeURIComponent(h)}),o=o.replace("#","%23"),t+a+i+o+n}or.prototype.format=function(){return Ja(this)};function zd(e,r){return Ka(e,!1,!0).resolve(r)}or.prototype.resolve=function(e){return this.resolveObject(Ka(e,!1,!0)).format()};or.prototype.resolveObject=function(e){if(qa(e)){var r=new or;r.parse(e,!1,!0),e=r}for(var t=new or,i=Object.keys(this),n=0;n<i.length;n++){var a=i[n];t[a]=this[a]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),o=0;o<s.length;o++){var h=s[o];h!=="protocol"&&(t[h]=e[h])}return hi[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var l;if(e.protocol&&e.protocol!==t.protocol){if(!hi[e.protocol]){for(var u=Object.keys(e),f=0;f<u.length;f++){var c=u[f];t[c]=e[c]}return t.href=t.format(),t}if(t.protocol=e.protocol,!e.host&&!Za[e.protocol]){for(l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),t.pathname=l.join("/")}else t.pathname=e.pathname;if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var p=t.pathname||"",m=t.search||"";t.path=p+m}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var _=t.pathname&&t.pathname.charAt(0)==="/",v=e.host||e.pathname&&e.pathname.charAt(0)==="/",y=v||_||t.host&&e.pathname,E=y,T=t.pathname&&t.pathname.split("/")||[],M=t.protocol&&!hi[t.protocol];l=e.pathname&&e.pathname.split("/")||[],M&&(t.hostname="",t.port=null,t.host&&(T[0]===""?T[0]=t.host:T.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(l[0]===""?l[0]=e.host:l.unshift(e.host)),e.host=null),y=y&&(l[0]===""||T[0]===""));var b;if(v)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,T=l;else if(l.length)T||(T=[]),T.pop(),T=T.concat(l),t.search=e.search,t.query=e.query;else if(!Fd(e.search))return M&&(t.hostname=t.host=T.shift(),b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())),t.search=e.search,t.query=e.query,(!An(t.pathname)||!An(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!T.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var S=T.slice(-1)[0],U=(t.host||e.host||T.length>1)&&(S==="."||S==="..")||S==="",D=0,F=T.length;F>=0;F--)S=T[F],S==="."?T.splice(F,1):S===".."?(T.splice(F,1),D++):D&&(T.splice(F,1),D--);if(!y&&!E)for(;D--;D)T.unshift("..");y&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),U&&T.join("/").substr(-1)!=="/"&&T.push("");var N=T[0]===""||T[0]&&T[0].charAt(0)==="/";return M&&(t.hostname=t.host=N?"":T.length?T.shift():"",b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())),y=y||t.host&&T.length,y&&!N&&T.unshift(""),T.length?t.pathname=T.join("/"):(t.pathname=null,t.path=null),(!An(t.pathname)||!An(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t};or.prototype.parseHost=function(){return Hh(this)};function Hh(e){var r=e.host,t=Bd.exec(r);t&&(t=t[0],t!==":"&&(e.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(e.hostname=r)}var hr;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(hr||(hr={}));var Yi;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Yi||(Yi={}));var Cn;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(Cn||(Cn={}));var wt;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(wt||(wt={}));var He;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(He||(He={}));var Je;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Je||(Je={}));var Lr;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Lr||(Lr={}));var qt;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(qt||(qt={}));var Rn;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Rn||(Rn={}));var lr;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(lr||(lr={}));var ur;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ur||(ur={}));var Sr;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Sr||(Sr={}));var fr;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(fr||(fr={}));var Ir;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Ir||(Ir={}));var Qa;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Qa||(Qa={}));var Qe;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Qe||(Qe={}));var Ce;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Ce||(Ce={}));var li;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(li||(li={}));var ui={parse:Ka,format:Wd,resolve:zd};yt.RETINA_PREFIX=/@([0-9\.]+)x/;yt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var jh=!1,Vh="6.0.4";function qd(e){var r;if(!jh){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+Vh+" - ✰ "+e+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(r=self.console).log.apply(r,t)}else self.console&&self.console.log("PixiJS "+Vh+" - "+e+" - http://www.pixijs.com/");jh=!0}}var ts;function $d(){return typeof ts=="undefined"&&(ts=function(){var r={stencil:!0,failIfMajorPerformanceCaveat:yt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),n=!!(i&&i.getContextAttributes().stencil);if(i){var a=i.getExtension("WEBGL_lose_context");a&&a.loseContext()}return i=null,n}catch(s){return!1}}()),ts}var Zd="#f0f8ff",Kd="#faebd7",Jd="#00ffff",Qd="#7fffd4",tp="#f0ffff",ep="#f5f5dc",rp="#ffe4c4",ip="#000000",np="#ffebcd",ap="#0000ff",sp="#8a2be2",op="#a52a2a",hp="#deb887",lp="#5f9ea0",up="#7fff00",fp="#d2691e",cp="#ff7f50",dp="#6495ed",pp="#fff8dc",vp="#dc143c",_p="#00ffff",mp="#00008b",gp="#008b8b",yp="#b8860b",xp="#a9a9a9",bp="#006400",wp="#a9a9a9",Tp="#bdb76b",Ep="#8b008b",Sp="#556b2f",Ip="#ff8c00",Pp="#9932cc",Ap="#8b0000",Cp="#e9967a",Rp="#8fbc8f",Op="#483d8b",Up="#2f4f4f",kp="#2f4f4f",Fp="#00ced1",Mp="#9400d3",Lp="#ff1493",Np="#00bfff",Dp="#696969",Bp="#696969",Gp="#1e90ff",Xp="#b22222",Hp="#fffaf0",jp="#228b22",Vp="#ff00ff",Yp="#dcdcdc",Wp="#f8f8ff",zp="#daa520",qp="#ffd700",$p="#808080",Zp="#008000",Kp="#adff2f",Jp="#808080",Qp="#f0fff0",t0="#ff69b4",e0="#cd5c5c",r0="#4b0082",i0="#fffff0",n0="#f0e68c",a0="#fff0f5",s0="#e6e6fa",o0="#7cfc00",h0="#fffacd",l0="#add8e6",u0="#f08080",f0="#e0ffff",c0="#fafad2",d0="#d3d3d3",p0="#90ee90",v0="#d3d3d3",_0="#ffb6c1",m0="#ffa07a",g0="#20b2aa",y0="#87cefa",x0="#778899",b0="#778899",w0="#b0c4de",T0="#ffffe0",E0="#00ff00",S0="#32cd32",I0="#faf0e6",P0="#ff00ff",A0="#800000",C0="#66cdaa",R0="#0000cd",O0="#ba55d3",U0="#9370db",k0="#3cb371",F0="#7b68ee",M0="#00fa9a",L0="#48d1cc",N0="#c71585",D0="#191970",B0="#f5fffa",G0="#ffe4e1",X0="#ffe4b5",H0="#ffdead",j0="#000080",V0="#fdf5e6",Y0="#808000",W0="#6b8e23",z0="#ffa500",q0="#ff4500",$0="#da70d6",Z0="#eee8aa",K0="#98fb98",J0="#afeeee",Q0="#db7093",tv="#ffefd5",ev="#ffdab9",rv="#cd853f",iv="#ffc0cb",nv="#dda0dd",av="#b0e0e6",sv="#800080",ov="#663399",hv="#ff0000",lv="#bc8f8f",uv="#4169e1",fv="#8b4513",cv="#fa8072",dv="#f4a460",pv="#2e8b57",vv="#fff5ee",_v="#a0522d",mv="#c0c0c0",gv="#87ceeb",yv="#6a5acd",xv="#708090",bv="#708090",wv="#fffafa",Tv="#00ff7f",Ev="#4682b4",Sv="#d2b48c",Iv="#008080",Pv="#d8bfd8",Av="#ff6347",Cv="#40e0d0",Rv="#ee82ee",Ov="#f5deb3",Uv="#ffffff",kv="#f5f5f5",Fv="#ffff00",Mv="#9acd32",Lv={aliceblue:Zd,antiquewhite:Kd,aqua:Jd,aquamarine:Qd,azure:tp,beige:ep,bisque:rp,black:ip,blanchedalmond:np,blue:ap,blueviolet:sp,brown:op,burlywood:hp,cadetblue:lp,chartreuse:up,chocolate:fp,coral:cp,cornflowerblue:dp,cornsilk:pp,crimson:vp,cyan:_p,darkblue:mp,darkcyan:gp,darkgoldenrod:yp,darkgray:xp,darkgreen:bp,darkgrey:wp,darkkhaki:Tp,darkmagenta:Ep,darkolivegreen:Sp,darkorange:Ip,darkorchid:Pp,darkred:Ap,darksalmon:Cp,darkseagreen:Rp,darkslateblue:Op,darkslategray:Up,darkslategrey:kp,darkturquoise:Fp,darkviolet:Mp,deeppink:Lp,deepskyblue:Np,dimgray:Dp,dimgrey:Bp,dodgerblue:Gp,firebrick:Xp,floralwhite:Hp,forestgreen:jp,fuchsia:Vp,gainsboro:Yp,ghostwhite:Wp,goldenrod:zp,gold:qp,gray:$p,green:Zp,greenyellow:Kp,grey:Jp,honeydew:Qp,hotpink:t0,indianred:e0,indigo:r0,ivory:i0,khaki:n0,lavenderblush:a0,lavender:s0,lawngreen:o0,lemonchiffon:h0,lightblue:l0,lightcoral:u0,lightcyan:f0,lightgoldenrodyellow:c0,lightgray:d0,lightgreen:p0,lightgrey:v0,lightpink:_0,lightsalmon:m0,lightseagreen:g0,lightskyblue:y0,lightslategray:x0,lightslategrey:b0,lightsteelblue:w0,lightyellow:T0,lime:E0,limegreen:S0,linen:I0,magenta:P0,maroon:A0,mediumaquamarine:C0,mediumblue:R0,mediumorchid:O0,mediumpurple:U0,mediumseagreen:k0,mediumslateblue:F0,mediumspringgreen:M0,mediumturquoise:L0,mediumvioletred:N0,midnightblue:D0,mintcream:B0,mistyrose:G0,moccasin:X0,navajowhite:H0,navy:j0,oldlace:V0,olive:Y0,olivedrab:W0,orange:z0,orangered:q0,orchid:$0,palegoldenrod:Z0,palegreen:K0,paleturquoise:J0,palevioletred:Q0,papayawhip:tv,peachpuff:ev,peru:rv,pink:iv,plum:nv,powderblue:av,purple:sv,rebeccapurple:ov,red:hv,rosybrown:lv,royalblue:uv,saddlebrown:fv,salmon:cv,sandybrown:dv,seagreen:pv,seashell:vv,sienna:_v,silver:mv,skyblue:gv,slateblue:yv,slategray:xv,slategrey:bv,snow:wv,springgreen:Tv,steelblue:Ev,tan:Sv,teal:Iv,thistle:Pv,tomato:Av,turquoise:Cv,violet:Rv,wheat:Ov,white:Uv,whitesmoke:kv,yellow:Fv,yellowgreen:Mv};function fi(e,r){return r===void 0&&(r=[]),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,r}function Yh(e){var r=e.toString(16);return r="000000".substr(0,6-r.length)+r,"#"+r}function Wh(e){return typeof e=="string"&&(e=Lv[e.toLowerCase()]||e,e[0]==="#"&&(e=e.substr(1))),parseInt(e,16)}function Nv(){for(var e=[],r=[],t=0;t<32;t++)e[t]=t,r[t]=t;e[wt.NORMAL_NPM]=wt.NORMAL,e[wt.ADD_NPM]=wt.ADD,e[wt.SCREEN_NPM]=wt.SCREEN,r[wt.NORMAL]=wt.NORMAL_NPM,r[wt.ADD]=wt.ADD_NPM,r[wt.SCREEN]=wt.SCREEN_NPM;var i=[];return i.push(r),i.push(e),i}var zh=Nv();function qh(e,r){return zh[r?1:0][e]}function Dv(e,r,t,i){return t=t||new Float32Array(4),i||i===void 0?(t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r):(t[0]=e[0],t[1]=e[1],t[2]=e[2]),t[3]=r,t}function es(e,r){if(r===1)return(r*255<<24)+e;if(r===0)return 0;var t=e>>16&255,i=e>>8&255,n=e&255;return t=t*r+.5|0,i=i*r+.5|0,n=n*r+.5|0,(r*255<<24)+(t<<16)+(i<<8)+n}function $h(e,r,t,i){return t=t||new Float32Array(4),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,(i||i===void 0)&&(t[0]*=r,t[1]*=r,t[2]*=r),t[3]=r,t}function Bv(e,r){r===void 0&&(r=null);var t=e*6;if(r=r||new Uint16Array(t),r.length!==t)throw new Error("Out buffer length is incorrect, got "+r.length+" and expected "+t);for(var i=0,n=0;i<t;i+=6,n+=4)r[i+0]=n+0,r[i+1]=n+1,r[i+2]=n+2,r[i+3]=n+0,r[i+4]=n+2,r[i+5]=n+3;return r}function On(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Zh(e){return!(e&e-1)&&!!e}function Kh(e){var r=(e>65535?1:0)<<4;e>>>=r;var t=(e>255?1:0)<<3;return e>>>=t,r|=t,t=(e>15?1:0)<<2,e>>>=t,r|=t,t=(e>3?1:0)<<1,e>>>=t,r|=t,r|e>>1}function ci(e,r,t){var i=e.length,n;if(!(r>=i||t===0)){t=r+t>i?i-r:t;var a=i-t;for(n=r;n<a;++n)e[n]=e[n+t];e.length=a}}function di(e){return e===0?0:e<0?-1:1}var Gv=0;function pi(){return++Gv}var Jh={};function vi(e,r,t){if(t===void 0&&(t=3),!Jh[r]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+e):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+e),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+e),console.warn(i))),Jh[r]=!0}}var Qh={},cr=Object.create(null),Nr=Object.create(null);var tl=function(){function e(r,t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||yt.RESOLUTION,this.resize(r,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(r,t){this.canvas.width=r*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=r},enumerable:!1,configurable:!0}),e}();function Xv(e){var r=e.width,t=e.height,i=e.getContext("2d"),n=i.getImageData(0,0,r,t),a=n.data,s=a.length,o={top:null,left:null,right:null,bottom:null},h=null,l,u,f;for(l=0;l<s;l+=4)a[l+3]!==0&&(u=l/4%r,f=~~(l/4/r),o.top===null&&(o.top=f),(o.left===null||u<o.left)&&(o.left=u),(o.right===null||o.right<u)&&(o.right=u+1),(o.bottom===null||o.bottom<f)&&(o.bottom=f));return o.top!==null&&(r=o.right-o.left,t=o.bottom-o.top+1,h=i.getImageData(o.left,o.top,r,t)),{height:t,width:r,data:h}}var Un;function Hv(e,r){if(r===void 0&&(r=self.location),e.indexOf("data:")===0)return"";r=r||self.location,Un||(Un=document.createElement("a")),Un.href=e;var t=ui.parse(Un.href),i=!t.port&&r.port===""||t.port===r.port;return t.hostname!==r.hostname||!i||t.protocol!==r.protocol?"anonymous":""}function kn(e,r){var t=yt.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):r!==void 0?r:1}var Fn=Math.PI*2,jv=180/Math.PI,Vv=Math.PI/180,oe;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(oe||(oe={}));var Gt=function(){function e(r,t,i,n){r===void 0&&(r=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(r),this.y=Number(t),this.width=Number(i),this.height=Number(n),this.type=oe.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},e.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},e.prototype.contains=function(r,t){return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.pad=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),this.x-=r,this.y-=t,this.width+=r*2,this.height+=t*2,this},e.prototype.fit=function(r){var t=Math.max(this.x,r.x),i=Math.min(this.x+this.width,r.x+r.width),n=Math.max(this.y,r.y),a=Math.min(this.y+this.height,r.y+r.height);return this.x=t,this.width=Math.max(i-t,0),this.y=n,this.height=Math.max(a-n,0),this},e.prototype.ceil=function(r,t){r===void 0&&(r=1),t===void 0&&(t=.001);var i=Math.ceil((this.x+this.width-t)*r)/r,n=Math.ceil((this.y+this.height-t)*r)/r;return this.x=Math.floor((this.x+t)*r)/r,this.y=Math.floor((this.y+t)*r)/r,this.width=i-this.x,this.height=n-this.y,this},e.prototype.enlarge=function(r){var t=Math.min(this.x,r.x),i=Math.max(this.x+this.width,r.x+r.width),n=Math.min(this.y,r.y),a=Math.max(this.y+this.height,r.y+r.height);return this.x=t,this.width=i-t,this.y=n,this.height=a-n,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Yv=function(){function e(r,t,i){r===void 0&&(r=0),t===void 0&&(t=0),i===void 0&&(i=0),this.x=r,this.y=t,this.radius=i,this.type=oe.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(r,t){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-r,a=this.y-t;return n*=n,a*=a,n+a<=i},e.prototype.getBounds=function(){return new Gt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),Wv=function(){function e(r,t,i,n){r===void 0&&(r=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=r,this.y=t,this.width=i,this.height=n,this.type=oe.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;var i=(r-this.x)/this.width,n=(t-this.y)/this.height;return i*=i,n*=n,i+n<=1},e.prototype.getBounds=function(){return new Gt(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Mn=function(){function e(){for(var r=arguments,t=[],i=0;i<arguments.length;i++)t[i]=r[i];var n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){for(var a=[],s=0,o=n.length;s<o;s++)a.push(n[s].x,n[s].y);n=a}this.points=n,this.type=oe.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var r=this.points.slice(),t=new e(r);return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(r,t){for(var i=!1,n=this.points.length/2,a=0,s=n-1;a<n;s=a++){var o=this.points[a*2],h=this.points[a*2+1],l=this.points[s*2],u=this.points[s*2+1],f=h>t!=u>t&&r<(l-o)*((t-h)/(u-h))+o;f&&(i=!i)}return i},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(r,t){return r+", "+t},"")+"]")},e}(),zv=function(){function e(r,t,i,n,a){r===void 0&&(r=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),a===void 0&&(a=20),this.x=r,this.y=t,this.width=i,this.height=n,this.radius=a,this.type=oe.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||r>=this.x+this.radius&&r<=this.x+this.width-this.radius)return!0;var i=r-(this.x+this.radius),n=t-(this.y+this.radius),a=this.radius*this.radius;if(i*i+n*n<=a||(i=r-(this.x+this.width-this.radius),i*i+n*n<=a)||(n=t-(this.y+this.height-this.radius),i*i+n*n<=a)||(i=r-(this.x+this.radius),i*i+n*n<=a))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),he=function(){function e(r,t){r===void 0&&(r=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=r,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},e.prototype.copyTo=function(r){return r.set(this.x,this.y),r},e.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},e.prototype.set=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),this.x=r,this.y=t,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),_i=function(){function e(r,t,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=r,this.scope=t}return e.prototype.clone=function(r,t){return r===void 0&&(r=this.cb),t===void 0&&(t=this.scope),new e(r,t,this._x,this._y)},e.prototype.set=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),(this._x!==r||this._y!==t)&&(this._x=r,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(r){return r.set(this._x,this._y),r},e.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),fe=function(){function e(r,t,i,n,a,s){r===void 0&&(r=1),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=1),a===void 0&&(a=0),s===void 0&&(s=0),this.array=null,this.a=r,this.b=t,this.c=i,this.d=n,this.tx=a,this.ty=s}return e.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},e.prototype.set=function(r,t,i,n,a,s){return this.a=r,this.b=t,this.c=i,this.d=n,this.tx=a,this.ty=s,this},e.prototype.toArray=function(r,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return r?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.prototype.apply=function(r,t){t=t||new he;var i=r.x,n=r.y;return t.x=this.a*i+this.c*n+this.tx,t.y=this.b*i+this.d*n+this.ty,t},e.prototype.applyInverse=function(r,t){t=t||new he;var i=1/(this.a*this.d+this.c*-this.b),n=r.x,a=r.y;return t.x=this.d*i*n+-this.c*i*a+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*a+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},e.prototype.translate=function(r,t){return this.tx+=r,this.ty+=t,this},e.prototype.scale=function(r,t){return this.a*=r,this.d*=t,this.c*=r,this.b*=t,this.tx*=r,this.ty*=t,this},e.prototype.rotate=function(r){var t=Math.cos(r),i=Math.sin(r),n=this.a,a=this.c,s=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=a*t-this.d*i,this.d=a*i+this.d*t,this.tx=s*t-this.ty*i,this.ty=s*i+this.ty*t,this},e.prototype.append=function(r){var t=this.a,i=this.b,n=this.c,a=this.d;return this.a=r.a*t+r.b*n,this.b=r.a*i+r.b*a,this.c=r.c*t+r.d*n,this.d=r.c*i+r.d*a,this.tx=r.tx*t+r.ty*n+this.tx,this.ty=r.tx*i+r.ty*a+this.ty,this},e.prototype.setTransform=function(r,t,i,n,a,s,o,h,l){return this.a=Math.cos(o+l)*a,this.b=Math.sin(o+l)*a,this.c=-Math.sin(o-h)*s,this.d=Math.cos(o-h)*s,this.tx=r-(i*this.a+n*this.c),this.ty=t-(i*this.b+n*this.d),this},e.prototype.prepend=function(r){var t=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){var i=this.a,n=this.c;this.a=i*r.a+this.b*r.c,this.b=i*r.b+this.b*r.d,this.c=n*r.a+this.d*r.c,this.d=n*r.b+this.d*r.d}return this.tx=t*r.a+this.ty*r.c+r.tx,this.ty=t*r.b+this.ty*r.d+r.ty,this},e.prototype.decompose=function(r){var t=this.a,i=this.b,n=this.c,a=this.d,s=r.pivot,o=-Math.atan2(-n,a),h=Math.atan2(i,t),l=Math.abs(o+h);return l<1e-5||Math.abs(Fn-l)<1e-5?(r.rotation=h,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=o,r.skew.y=h),r.scale.x=Math.sqrt(t*t+i*i),r.scale.y=Math.sqrt(n*n+a*a),r.position.x=this.tx+(s.x*t+s.y*n),r.position.y=this.ty+(s.x*i+s.y*a),r},e.prototype.invert=function(){var r=this.a,t=this.b,i=this.c,n=this.d,a=this.tx,s=r*n-t*i;return this.a=n/s,this.b=-t/s,this.c=-i/s,this.d=r/s,this.tx=(i*this.ty-n*a)/s,this.ty=-(r*this.ty-t*a)/s,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var r=new e;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},e.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},e.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),Dr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Br=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Gr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Xr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rs=[],el=[],Ln=Math.sign;function qv(){for(var e=0;e<16;e++){var r=[];rs.push(r);for(var t=0;t<16;t++)for(var i=Ln(Dr[e]*Dr[t]+Gr[e]*Br[t]),n=Ln(Br[e]*Dr[t]+Xr[e]*Br[t]),a=Ln(Dr[e]*Gr[t]+Gr[e]*Xr[t]),s=Ln(Br[e]*Gr[t]+Xr[e]*Xr[t]),o=0;o<16;o++)if(Dr[o]===i&&Br[o]===n&&Gr[o]===a&&Xr[o]===s){r.push(o);break}}for(var e=0;e<16;e++){var h=new fe;h.set(Dr[e],Br[e],Gr[e],Xr[e],0,0),el.push(h)}}qv();var re={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Dr[e]},uY:function(e){return Br[e]},vX:function(e){return Gr[e]},vY:function(e){return Xr[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,r){return rs[e][r]},sub:function(e,r){return rs[e][re.inv(r)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)==2},byDirection:function(e,r){return Math.abs(e)*2<=Math.abs(r)?r>=0?re.S:re.N:Math.abs(r)*2<=Math.abs(e)?e>0?re.E:re.W:r>0?e>0?re.SE:re.SW:e>0?re.NE:re.NW},matrixAppendRotationInv:function(e,r,t,i){t===void 0&&(t=0),i===void 0&&(i=0);var n=el[re.inv(r)];n.tx=t,n.ty=i,e.append(n)}},rl=function(){function e(){this.worldTransform=new fe,this.localTransform=new fe,this.position=new _i(this.onChange,this,0,0),this.scale=new _i(this.onChange,this,1,1),this.pivot=new _i(this.onChange,this,0,0),this.skew=new _i(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(r){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var i=r.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=r._worldID,this._worldID++}},e.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();yt.SORTABLE_CHILDREN=!1;var Nn=function(){function e(){this.minX=Infinity,this.minY=Infinity,this.maxX=-Infinity,this.maxY=-Infinity,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=Infinity,this.minY=Infinity,this.maxX=-Infinity,this.maxY=-Infinity},e.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?Gt.EMPTY:(r=r||new Gt(0,0,1,1),r.x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},e.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},e.prototype.addPointMatrix=function(r,t){var i=r.a,n=r.b,a=r.c,s=r.d,o=r.tx,h=r.ty,l=i*t.x+a*t.y+o,u=n*t.x+s*t.y+h;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},e.prototype.addQuad=function(r){var t=this.minX,i=this.minY,n=this.maxX,a=this.maxY,s=r[0],o=r[1];t=s<t?s:t,i=o<i?o:i,n=s>n?s:n,a=o>a?o:a,s=r[2],o=r[3],t=s<t?s:t,i=o<i?o:i,n=s>n?s:n,a=o>a?o:a,s=r[4],o=r[5],t=s<t?s:t,i=o<i?o:i,n=s>n?s:n,a=o>a?o:a,s=r[6],o=r[7],t=s<t?s:t,i=o<i?o:i,n=s>n?s:n,a=o>a?o:a,this.minX=t,this.minY=i,this.maxX=n,this.maxY=a},e.prototype.addFrame=function(r,t,i,n,a){this.addFrameMatrix(r.worldTransform,t,i,n,a)},e.prototype.addFrameMatrix=function(r,t,i,n,a){var s=r.a,o=r.b,h=r.c,l=r.d,u=r.tx,f=r.ty,c=this.minX,p=this.minY,m=this.maxX,_=this.maxY,v=s*t+h*i+u,y=o*t+l*i+f;c=v<c?v:c,p=y<p?y:p,m=v>m?v:m,_=y>_?y:_,v=s*n+h*i+u,y=o*n+l*i+f,c=v<c?v:c,p=y<p?y:p,m=v>m?v:m,_=y>_?y:_,v=s*t+h*a+u,y=o*t+l*a+f,c=v<c?v:c,p=y<p?y:p,m=v>m?v:m,_=y>_?y:_,v=s*n+h*a+u,y=o*n+l*a+f,c=v<c?v:c,p=y<p?y:p,m=v>m?v:m,_=y>_?y:_,this.minX=c,this.minY=p,this.maxX=m,this.maxY=_},e.prototype.addVertexData=function(r,t,i){for(var n=this.minX,a=this.minY,s=this.maxX,o=this.maxY,h=t;h<i;h+=2){var l=r[h],u=r[h+1];n=l<n?l:n,a=u<a?u:a,s=l>s?l:s,o=u>o?u:o}this.minX=n,this.minY=a,this.maxX=s,this.maxY=o},e.prototype.addVertices=function(r,t,i,n){this.addVerticesMatrix(r.worldTransform,t,i,n)},e.prototype.addVerticesMatrix=function(r,t,i,n,a,s){a===void 0&&(a=0),s===void 0&&(s=a);for(var o=r.a,h=r.b,l=r.c,u=r.d,f=r.tx,c=r.ty,p=this.minX,m=this.minY,_=this.maxX,v=this.maxY,y=i;y<n;y+=2){var E=t[y],T=t[y+1],M=o*E+l*T+f,b=u*T+h*E+c;p=Math.min(p,M-a),_=Math.max(_,M+a),m=Math.min(m,b-s),v=Math.max(v,b+s)}this.minX=p,this.minY=m,this.maxX=_,this.maxY=v},e.prototype.addBounds=function(r){var t=this.minX,i=this.minY,n=this.maxX,a=this.maxY;this.minX=r.minX<t?r.minX:t,this.minY=r.minY<i?r.minY:i,this.maxX=r.maxX>n?r.maxX:n,this.maxY=r.maxY>a?r.maxY:a},e.prototype.addBoundsMask=function(r,t){var i=r.minX>t.minX?r.minX:t.minX,n=r.minY>t.minY?r.minY:t.minY,a=r.maxX<t.maxX?r.maxX:t.maxX,s=r.maxY<t.maxY?r.maxY:t.maxY;if(i<=a&&n<=s){var o=this.minX,h=this.minY,l=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=a>l?a:l,this.maxY=s>u?s:u}},e.prototype.addBoundsMatrix=function(r,t){this.addFrameMatrix(t,r.minX,r.minY,r.maxX,r.maxY)},e.prototype.addBoundsArea=function(r,t){var i=r.minX>t.x?r.minX:t.x,n=r.minY>t.y?r.minY:t.y,a=r.maxX<t.x+t.width?r.maxX:t.x+t.width,s=r.maxY<t.y+t.height?r.maxY:t.y+t.height;if(i<=a&&n<=s){var o=this.minX,h=this.minY,l=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=a>l?a:l,this.maxY=s>u?s:u}},e.prototype.pad=function(r,t){r===void 0&&(r=0),t===void 0&&(t=r),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(r,t,i,n,a,s){r-=a,t-=s,i+=a,n+=s,this.minX=this.minX<r?this.minX:r,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n},e}();var is=function(e,r){return is=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},is(e,r)};function ns(e,r){is(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var ce=function(e){ns(r,e);function r(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new rl,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Nn,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return r.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var a=i[n];Object.defineProperty(r.prototype,a,Object.getOwnPropertyDescriptor(t,a))}},r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.getBounds=function(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Gt),i=this._boundsRect),this._bounds.getRectangle(i)},r.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Gt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Nn);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=n,this.transform=i,this._bounds=a,this._bounds.updateID+=this._boundsID-s,o},r.prototype.toGlobal=function(t,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)},r.prototype.toLocal=function(t,i,n,a){return i&&(t=i.toGlobal(t,n,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},r.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},r.prototype.setTransform=function(t,i,n,a,s,o,h,l,u){return t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=1),a===void 0&&(a=1),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),l===void 0&&(l=0),u===void 0&&(u=0),this.position.x=t,this.position.y=i,this.scale.x=n||1,this.scale.y=a||1,this.rotation=s,this.skew.x=o,this.skew.y=h,this.pivot.x=l,this.pivot.y=u,this},r.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(r.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new il),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),r.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},r.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(r.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.transform.rotation*jv},set:function(t){this.transform.rotation=t*Vv},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=t,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),r}(Bi),il=function(e){ns(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return r}(ce);ce.prototype.displayObjectUpdateTransform=ce.prototype.updateTransform;function $v(e,r){return e.zIndex===r.zIndex?e._lastSortedIndex-r._lastSortedIndex:e.zIndex-r.zIndex}var ie=function(e){ns(r,e);function r(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=yt.SORTABLE_CHILDREN,t.sortDirty=!1,t}return r.prototype.onChildrenChange=function(t){},r.prototype.addChild=function(){for(var t=arguments,i=[],n=0;n<arguments.length;n++)i[n]=t[n];if(i.length>1)for(var a=0;a<i.length;a++)this.addChild(i[a]);else{var s=i[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return i[0]},r.prototype.addChildAt=function(t,i){if(i<0||i>this.children.length)throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(i,0,t),this._boundsID++,this.onChildrenChange(i),t.emit("added",this),this.emit("childAdded",t,this,i),t},r.prototype.swapChildren=function(t,i){if(t!==i){var n=this.getChildIndex(t),a=this.getChildIndex(i);this.children[n]=i,this.children[a]=t,this.onChildrenChange(n<a?n:a)}},r.prototype.getChildIndex=function(t){var i=this.children.indexOf(t);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},r.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);ci(this.children,n,1),this.children.splice(i,0,t),this.onChildrenChange(i)},r.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},r.prototype.removeChild=function(){for(var t=arguments,i=[],n=0;n<arguments.length;n++)i[n]=t[n];if(i.length>1)for(var a=0;a<i.length;a++)this.removeChild(i[a]);else{var s=i[0],o=this.children.indexOf(s);if(o===-1)return null;s.parent=null,s.transform._parentID=-1,ci(this.children,o,1),this._boundsID++,this.onChildrenChange(o),s.emit("removed",this),this.emit("childRemoved",s,this,o)}return i[0]},r.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return i.parent=null,i.transform._parentID=-1,ci(this.children,t,1),this._boundsID++,this.onChildrenChange(t),i.emit("removed",this),this.emit("childRemoved",i,this,t),i},r.prototype.removeChildren=function(t,i){t===void 0&&(t=0),i===void 0&&(i=this.children.length);var n=t,a=i,s=a-n,o;if(s>0&&s<=a){o=this.children.splice(n,s);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var t=!1,i=0,n=this.children.length;i<n;++i){var a=this.children[i];a._lastSortedIndex=i,!t&&a.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort($v),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,i=this.children.length;t<i;++t){var n=this.children[t];n.visible&&n.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var i=this.children[t];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(t,i){i===void 0&&(i=!1);var n=e.prototype.getLocalBounds.call(this,t);if(!i)for(var a=0,s=this.children.length;a<s;++a){var o=this.children[a];o.visible&&o.updateTransform()}return n},r.prototype._calculateBounds=function(){},r.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(t)}},r.prototype.renderAdvanced=function(t){t.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<i.length;a++)i[a].enabled&&this._enabledFilters.push(i[a]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._render(t);for(var a=0,s=this.children.length;a<s;a++)this.children[a].render(t);t.batch.flush(),n&&t.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},r.prototype._render=function(t){},r.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof t=="boolean"?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(i)for(var a=0;a<n.length;++a)n[a].destroy(t)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var i=this.getLocalBounds().width;i!==0?this.scale.x=t/i:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var i=this.getLocalBounds().height;i!==0?this.scale.y=t/i:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),r}(ce);ie.prototype.containerUpdateTransform=ie.prototype.updateTransform;var Zv={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ce.mixin(Zv);var Kv=9,Dn=100,Jv=0,Qv=0,nl=2,al=1,t_=-1e3,e_=-1e3,r_=2,i_=function(){function e(r){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ke.tablet||Ke.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=Dn+"px",t.style.height=Dn+"px",t.style.position="absolute",t.style.top=Jv+"px",t.style.left=Qv+"px",t.style.zIndex=nl.toString(),this.div=t,this.renderer=r,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var r=this,t=document.createElement("button");t.style.width=al+"px",t.style.height=al+"px",t.style.position="absolute",t.style.top=t_+"px",t.style.left=e_+"px",t.style.zIndex=r_.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){r._isMobileAccessibility=!0,r.activate(),r.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var r;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(r=this.renderer.view.parentNode)===null||r===void 0||r.appendChild(this.div))},e.prototype.deactivate=function(){var r;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(r=this.div.parentNode)===null||r===void 0||r.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(r){if(!(!r.visible||!r.accessibleChildren)){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);for(var t=r.children,i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}},e.prototype.update=function(){var r=performance.now();if(!(Ke.android.device&&r<this.androidUpdateCount)&&(this.androidUpdateCount=r+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),i=t.left,n=t.top,a=t.width,s=t.height,o=this.renderer,h=o.width,l=o.height,u=o.resolution,f=a/h*u,c=s/l*u,p=this.div;p.style.left=i+"px",p.style.top=n+"px",p.style.width=h+"px",p.style.height=l+"px";for(var m=0;m<this.children.length;m++){var _=this.children[m];if(_.renderId!==this.renderId)_._accessibleActive=!1,ci(this.children,m,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,m--;else{p=_._accessibleDiv;var v=_.hitArea,y=_.worldTransform;_.hitArea?(p.style.left=(y.tx+v.x*y.a)*f+"px",p.style.top=(y.ty+v.y*y.d)*c+"px",p.style.width=v.width*y.a*f+"px",p.style.height=v.height*y.d*c+"px"):(v=_.getBounds(),this.capHitArea(v),p.style.left=v.x*f+"px",p.style.top=v.y*c+"px",p.style.width=v.width*f+"px",p.style.height=v.height*c+"px",p.title!==_.accessibleTitle&&_.accessibleTitle!==null&&(p.title=_.accessibleTitle),p.getAttribute("aria-label")!==_.accessibleHint&&_.accessibleHint!==null&&p.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==p.title||_.tabIndex!==p.tabIndex)&&(p.title=_.accessibleTitle,p.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}},e.prototype.updateDebugHTML=function(r){r.innerHTML="type: "+r.type+"</br> title : "+r.title+"</br> tabIndex: "+r.tabIndex},e.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0);var t=this.renderer,i=t.width,n=t.height;r.x+r.width>i&&(r.width=i-r.x),r.y+r.height>n&&(r.height=n-r.y)},e.prototype.addChild=function(r){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=Dn+"px",t.style.height=Dn+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=nl.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=r.accessiblePointerEvents,t.type=r.accessibleType,r.accessibleTitle&&r.accessibleTitle!==null?t.title=r.accessibleTitle:(!r.accessibleHint||r.accessibleHint===null)&&(t.title="displayObject "+r.tabIndex),r.accessibleHint&&r.accessibleHint!==null&&t.setAttribute("aria-label",r.accessibleHint),this.debug&&this.updateDebugHTML(t),r._accessibleActive=!0,r._accessibleDiv=t,t.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},e.prototype._onClick=function(r){var t=this.renderer.plugins.interaction,i=r.target.displayObject,n=t.eventData;t.dispatchEvent(i,"click",n),t.dispatchEvent(i,"pointertap",n),t.dispatchEvent(i,"tap",n)},e.prototype._onFocus=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,i=r.target.displayObject,n=t.eventData;t.dispatchEvent(i,"mouseover",n)},e.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,i=r.target.displayObject,n=t.eventData;t.dispatchEvent(i,"mouseout",n)},e.prototype._onKeyDown=function(r){r.keyCode===Kv&&this.activate()},e.prototype._onMouseMove=function(r){r.movementX===0&&r.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();yt.TARGET_FPMS=.06;var dr;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(dr||(dr={}));var as=function(){function e(r,t,i,n){t===void 0&&(t=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=r,this.context=t,this.priority=i,this.once=n}return e.prototype.match=function(r,t){return t===void 0&&(t=null),this.fn===r&&this.context===t},e.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},e.prototype.destroy=function(r){r===void 0&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=r?null:t,this.previous=null,t},e}(),pe=function(){function e(){var r=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new as(null,null,Infinity),this.deltaMS=1/yt.TARGET_FPMS,this.elapsedMS=1/yt.TARGET_FPMS,this._tick=function(t){r._requestId=null,r.started&&(r.update(t),r.started&&r._requestId===null&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(r,t,i){return i===void 0&&(i=dr.NORMAL),this._addListener(new as(r,t,i))},e.prototype.addOnce=function(r,t,i){return i===void 0&&(i=dr.NORMAL),this._addListener(new as(r,t,i,!0))},e.prototype._addListener=function(r){var t=this._head.next,i=this._head;if(!t)r.connect(i);else{for(;t;){if(r.priority>t.priority){r.connect(i);break}i=t,t=t.next}r.previous||r.connect(i)}return this._startIfPossible(),this},e.prototype.remove=function(r,t){for(var i=this._head.next;i;)i.match(r,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,t=this._head;t=t.next;)r++;return r},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(r){r===void 0&&(r=performance.now());var t;if(r>this.lastTime){if(t=this.elapsedMS=r-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var i=r-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=r-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*yt.TARGET_FPMS;for(var n=this._head,a=n.next;a;)a=a.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var t=Math.min(this.maxFPS,r),i=Math.min(Math.max(0,t)/1e3,yt.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(r===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,r);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var r=e._shared=new e;r.autoStart=!0,r._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var r=e._system=new e;r.autoStart=!0,r._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),n_=function(){function e(){}return e.init=function(r){var t=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,dr.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?pe.shared:new pe,r.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},e}();var sl=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new he,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(r,t,i){return r.worldTransform.applyInverse(i||this.global,t)},e.prototype.copyEvent=function(r){"isPrimary"in r&&r.isPrimary&&(this.isPrimary=!0),this.button="button"in r&&r.button;var t="buttons"in r&&r.buttons;this.buttons=Number.isInteger(t)?t:"which"in r&&r.which,this.width="width"in r&&r.width,this.height="height"in r&&r.height,this.tiltX="tiltX"in r&&r.tiltX,this.tiltY="tiltY"in r&&r.tiltY,this.pointerType="pointerType"in r&&r.pointerType,this.pressure="pressure"in r&&r.pressure,this.rotationAngle="rotationAngle"in r&&r.rotationAngle,this.twist="twist"in r&&r.twist||0,this.tangentialPressure="tangentialPressure"in r&&r.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();var ss=function(e,r){return ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},ss(e,r)};function a_(e,r){ss(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var s_=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),os=function(){function e(r){this._pointerId=r,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(r,t){t?this._flags=this._flags|r:this._flags=this._flags&~r},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(r){this._flags=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!=0},set:function(r){this._doSet(e.FLAGS.OVER,r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!=0},set:function(r){this._doSet(e.FLAGS.RIGHT_DOWN,r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!=0},set:function(r){this._doSet(e.FLAGS.LEFT_DOWN,r)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),e}(),o_=function(){function e(){this._tempPoint=new he}return e.prototype.recursiveFindHit=function(r,t,i,n,a){if(!t||!t.visible)return!1;var s=r.data.global;a=t.interactive||a;var o=!1,h=a,l=!0;if(t.hitArea?(n&&(t.worldTransform.applyInverse(s,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,l=!1)),h=!1):t._mask&&n&&(t._mask.containsPoint&&t._mask.containsPoint(s)||(n=!1)),l&&t.interactiveChildren&&t.children)for(var u=t.children,f=u.length-1;f>=0;f--){var c=u[f],p=this.recursiveFindHit(r,c,i,n,h);if(p){if(!c.parent)continue;h=!1,p&&(r.target&&(n=!1),o=!0)}}return a&&(n&&!r.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(s)&&(o=!0),t.interactive&&(o&&!r.target&&(r.target=t),i&&i(r,t,!!o))),o},e.prototype.findHit=function(r,t,i,n){this.recursiveFindHit(r,t,i,n,!1)},e}(),h_={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};ce.mixin(h_);var Bn=1,Gn={target:null,data:{global:null}},l_=function(e){a_(r,e);function r(t,i){var n=e.call(this)||this;return i=i||{},n.renderer=t,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new sl,n.mouse.identifier=Bn,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[Bn]=n.mouse,n.interactionDataPool=[],n.eventData=new s_,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in self),n.supportsTouchEvents="ontouchstart"in self,n.supportsPointerEvents=!!self.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new o_,n._tempDisplayObject=new il,n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(t,i){return Gn.target=null,Gn.data.global=t,i||(i=this.lastObjectRendered),this.processInteractive(Gn,i,null,!0),Gn.target},r.prototype.setTargetElement=function(t,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=i,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(pe.system.add(this.tickerUpdate,this,dr.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){!this.tickerAdded||(pe.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),self.addEventListener("pointercancel",this.onPointerCancel,!0),self.addEventListener("pointerup",this.onPointerUp,!0)):(self.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),self.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),self.removeEventListener("pointercancel",this.onPointerCancel,!0),self.removeEventListener("pointerup",this.onPointerUp,!0)):(self.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),self.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},r.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var i=this.activeInteractionData[t];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(t){t=t||"default";var i=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":i&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":i&&Object.assign(this.interactionDOMElement.style,n);break}else i&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},r.prototype.dispatchEvent=function(t,i,n){(!n.stopPropagationHint||t===n.stopsPropagatingAt)&&(n.currentTarget=t,n.type=i,t.emit(i,n),t[i]&&t[i](n))},r.prototype.delayDispatchEvent=function(t,i,n){this.delayedEvents.push({displayObject:t,eventString:i,eventData:n})},r.prototype.mapPositionToPoint=function(t,i,n){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var s=1/this.resolution;t.x=(i-a.left)*(this.interactionDOMElement.width/a.width)*s,t.y=(n-a.top)*(this.interactionDOMElement.height/a.height)*s},r.prototype.processInteractive=function(t,i,n,a){var s=this.search.findHit(t,i,n,a),o=this.delayedEvents;if(!o.length)return s;t.stopPropagationHint=!1;var h=o.length;this.delayedEvents=[];for(var l=0;l<h;l++){var u=o[l],f=u.displayObject,c=u.eventString,p=u.eventData;p.stopsPropagatingAt===f&&(p.stopPropagationHint=!0),this.dispatchEvent(f,c,p)}return s},r.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t);if(this.autoPreventDefault&&i[0].isNormalized){var n=t.cancelable||!("cancelable"in t);n&&t.preventDefault()}for(var a=i.length,s=0;s<a;s++){var o=i[s],h=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),o.pointerType==="touch")this.emit("touchstart",l);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var u=o.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},r.prototype.processPointerDown=function(t,i,n){var a=t.data,s=t.data.identifier;if(n){if(i.trackedPointers[s]||(i.trackedPointers[s]=new os(s)),this.dispatchEvent(i,"pointerdown",t),a.pointerType==="touch")this.dispatchEvent(i,"touchstart",t);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;o?i.trackedPointers[s].rightDown=!0:i.trackedPointers[s].leftDown=!0,this.dispatchEvent(i,o?"rightdown":"mousedown",t)}}},r.prototype.onPointerComplete=function(t,i,n){for(var a=this.normalizeToPointerData(t),s=a.length,o=t.target!==this.interactionDOMElement?"outside":"",h=0;h<s;h++){var l=a[h],u=this.getInteractionDataForPointerId(l),f=this.configureInteractionEventForDOMEvent(this.eventData,l,u);if(f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,n,i||!o),this.emit(i?"pointercancel":"pointerup"+o,f),l.pointerType==="mouse"||l.pointerType==="pen"){var c=l.button===2;this.emit(c?"rightup"+o:"mouseup"+o,f)}else l.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+o,f),this.releaseInteractionDataForPointerId(l.pointerId))}},r.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(t,i){var n=t.data,a=t.data.identifier;i.trackedPointers[a]!==void 0&&(delete i.trackedPointers[a],this.dispatchEvent(i,"pointercancel",t),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",t))},r.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},r.prototype.processPointerUp=function(t,i,n){var a=t.data,s=t.data.identifier,o=i.trackedPointers[s],h=a.pointerType==="touch",l=a.pointerType==="mouse"||a.pointerType==="pen",u=!1;if(l){var f=a.button===2,c=os.FLAGS,p=f?c.RIGHT_DOWN:c.LEFT_DOWN,m=o!==void 0&&o.flags&p;n?(this.dispatchEvent(i,f?"rightup":"mouseup",t),m&&(this.dispatchEvent(i,f?"rightclick":"click",t),u=!0)):m&&this.dispatchEvent(i,f?"rightupoutside":"mouseupoutside",t),o&&(f?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",t),h&&this.dispatchEvent(i,"touchend",t),o&&((!l||u)&&this.dispatchEvent(i,"pointertap",t),h&&(this.dispatchEvent(i,"tap",t),o.over=!1))):o&&(this.dispatchEvent(i,"pointerupoutside",t),h&&this.dispatchEvent(i,"touchendoutside",t)),o&&o.none&&delete i.trackedPointers[s]},r.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,a=0;a<n;a++){var s=i[a],o=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,o);h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),s.pointerType==="touch"&&this.emit("touchmove",h),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",h)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(t,i,n){var a=t.data,s=a.pointerType==="touch",o=a.pointerType==="mouse"||a.pointerType==="pen";o&&this.processPointerOverOut(t,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",t),s&&this.dispatchEvent(i,"touchmove",t),o&&this.dispatchEvent(i,"mousemove",t))},r.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,a);s.data.originalEvent=n,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(a.identifier)}},r.prototype.processPointerOverOut=function(t,i,n){var a=t.data,s=t.data.identifier,o=a.pointerType==="mouse"||a.pointerType==="pen",h=i.trackedPointers[s];n&&!h&&(h=i.trackedPointers[s]=new os(s)),h!==void 0&&(n&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(i,"pointerover",t),o&&this.delayDispatchEvent(i,"mouseover",t)),o&&this.cursor===null&&(this.cursor=i.cursor)):h.over&&(h.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),o&&this.dispatchEvent(i,"mouseout",t),h.none&&delete i.trackedPointers[s]))},r.prototype.onPointerOver=function(t){var i=this.normalizeToPointerData(t),n=i[0],a=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,a);s.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",s)},r.prototype.getInteractionDataForPointerId=function(t){var i=t.pointerId,n;return i===Bn||t.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new sl,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(t),n},r.prototype.releaseInteractionDataForPointerId=function(t){var i=this.activeInteractionData[t];i&&(delete this.activeInteractionData[t],i.reset(),this.interactionDataPool.push(i))},r.prototype.configureInteractionEventForDOMEvent=function(t,i,n){return t.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,t.reset(),t},r.prototype.normalizeToPointerData=function(t){var i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,a=t.changedTouches.length;n<a;n++){var s=t.changedTouches[n];typeof s.button=="undefined"&&(s.button=t.touches.length?1:0),typeof s.buttons=="undefined"&&(s.buttons=t.touches.length?1:0),typeof s.isPrimary=="undefined"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width=="undefined"&&(s.width=s.radiusX||1),typeof s.height=="undefined"&&(s.height=s.radiusY||1),typeof s.tiltX=="undefined"&&(s.tiltX=0),typeof s.tiltY=="undefined"&&(s.tiltY=0),typeof s.pointerType=="undefined"&&(s.pointerType="touch"),typeof s.pointerId=="undefined"&&(s.pointerId=s.identifier||0),typeof s.pressure=="undefined"&&(s.pressure=s.force||.5),typeof s.twist=="undefined"&&(s.twist=0),typeof s.tangentialPressure=="undefined"&&(s.tangentialPressure=0),typeof s.layerX=="undefined"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY=="undefined"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,i.push(s)}else if(!self.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof self.PointerEvent))){var o=t;typeof o.isPrimary=="undefined"&&(o.isPrimary=!0),typeof o.width=="undefined"&&(o.width=1),typeof o.height=="undefined"&&(o.height=1),typeof o.tiltX=="undefined"&&(o.tiltX=0),typeof o.tiltY=="undefined"&&(o.tiltY=0),typeof o.pointerType=="undefined"&&(o.pointerType="mouse"),typeof o.pointerId=="undefined"&&(o.pointerId=Bn),typeof o.pressure=="undefined"&&(o.pressure=.5),typeof o.twist=="undefined"&&(o.twist=0),typeof o.tangentialPressure=="undefined"&&(o.tangentialPressure=0),o.isNormalized=!0,i.push(o)}else i.push(t);return i},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r}(Bi);var ye=function(){function e(r){this.items=[],this._name=r,this._aliasCount=0}return e.prototype.emit=function(r,t,i,n,a,s,o,h){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,f=l.items;this._aliasCount++;for(var c=0,p=f.length;c<p;c++)f[c][u](r,t,i,n,a,s,o,h);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},e.prototype.remove=function(r){var t=this.items.indexOf(r);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(r){return this.items.indexOf(r)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(ye.prototype,{dispatch:{value:ye.prototype.emit},run:{value:ye.prototype.emit}});yt.PREFER_ENV=Ke.any?hr.WEBGL:hr.WEBGL2;yt.STRICT_TEXTURE_CACHE=!1;var Xn=[];function hs(e,r){if(!e)return null;var t="";if(typeof e=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(t=i[1].toLowerCase())}for(var n=Xn.length-1;n>=0;--n){var a=Xn[n];if(a.test&&a.test(e,t))return new a(e,r)}throw new Error("Unrecognized source type to auto-detect Resource")}var ls=function(e,r){return ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},ls(e,r)};function Mt(e,r){ls(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var mi=function(){function e(r,t){r===void 0&&(r=0),t===void 0&&(t=0),this._width=r,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new ye("setRealSize"),this.onUpdate=new ye("update"),this.onError=new ye("onError")}return e.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},e.prototype.resize=function(r,t){(r!==this._width||t!==this._height)&&(this._width=r,this._height=t,this.onResize.emit(r,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(r,t,i){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(r,t){return!1},e}(),Wi=function(e){Mt(r,e);function r(t,i){var n=this,a=i||{},s=a.width,o=a.height;if(!s||!o)throw new Error("BufferResource width or height invalid");return n=e.call(this,s,o)||this,n.data=t,n}return r.prototype.upload=function(t,i,n){var a=t.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===fr.UNPACK);var s=i.realWidth,o=i.realHeight;return n.width===s&&n.height===o?a.texSubImage2D(i.target,0,0,0,s,o,i.format,i.type,this.data):(n.width=s,n.height=o,a.texImage2D(i.target,0,n.internalFormat,s,o,0,i.format,n.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},r}(mi),u_={scaleMode:lr.NEAREST,format:Je.RGBA,alphaMode:fr.NPM},$t=function(e){Mt(r,e);function r(t,i){t===void 0&&(t=null),i===void 0&&(i=null);var n=e.call(this)||this;i=i||{};var a=i.alphaMode,s=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,l=i.width,u=i.height,f=i.wrapMode,c=i.format,p=i.type,m=i.target,_=i.resolution,v=i.resourceOptions;return t&&!(t instanceof mi)&&(t=hs(t,v),t.internal=!0),n.width=l||0,n.height=u||0,n.resolution=_||yt.RESOLUTION,n.mipmap=s!==void 0?s:yt.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:yt.ANISOTROPIC_LEVEL,n.wrapMode=f||yt.WRAP_MODE,n.scaleMode=h!==void 0?h:yt.SCALE_MODE,n.format=c||Je.RGBA,n.type=p||qt.UNSIGNED_BYTE,n.target=m||Lr.TEXTURE_2D,n.alphaMode=a!==void 0?a:fr.UNPACK,n.uid=pi(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&u>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(t),n}return Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(t,i){var n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},r.prototype.setSize=function(t,i,n){return this.resolution=n||this.resolution,this.width=t,this.height=i,this._refreshPOT(),this.update(),this},r.prototype.setRealSize=function(t,i,n){return this.resolution=n||this.resolution,this.width=t/this.resolution,this.height=i/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=Zh(this.realWidth)&&Zh(this.realHeight)},r.prototype.setResolution=function(t){var i=this.resolution;return i===t?this:(this.resolution=t,this.valid&&(this.width=this.width*i/t,this.height=this.height*i/t,this.emit("update",this)),this._refreshPOT(),this)},r.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(t){this.emit("error",this,t)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Nr[this.cacheId],delete cr[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(t,i,n){n===void 0&&(n=yt.STRICT_TEXTURE_CACHE);var a=typeof t=="string",s=null;if(a)s=t;else{if(!t._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";t._pixiId=o+"_"+pi()}s=t._pixiId}var h=Nr[s];if(a&&n&&!h)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return h||(h=new r(t,i),h.cacheId=s,r.addToCache(h,s)),h},r.fromBuffer=function(t,i,n,a){t=t||new Float32Array(i*n*4);var s=new Wi(t,{width:i,height:n}),o=t instanceof Float32Array?qt.FLOAT:qt.UNSIGNED_BYTE;return new r(s,Object.assign(u_,a||{width:i,height:n,type:o}))},r.addToCache=function(t,i){i&&(t.textureCacheIds.indexOf(i)===-1&&t.textureCacheIds.push(i),Nr[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),Nr[i]=t)},r.removeFromCache=function(t){if(typeof t=="string"){var i=Nr[t];if(i){var n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete Nr[t],i}}else if(t&&t.textureCacheIds){for(var a=0;a<t.textureCacheIds.length;++a)delete Nr[t.textureCacheIds[a]];return t.textureCacheIds.length=0,t}return null},r._globalBatch=0,r}(Bi),us=function(e){Mt(r,e);function r(t,i){var n=this,a=i||{},s=a.width,o=a.height;n=e.call(this,s,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<t;h++){var l=new $t;n.items.push(l),n.itemDirtyIds.push(-2)}return n.length=t,n._load=null,n.baseTexture=null,n}return r.prototype.initFromArray=function(t,i){for(var n=0;n<this.length;n++)!t[n]||(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof mi?this.addResourceAt(t[n],n):this.addResourceAt(hs(t[n],i),n))},r.prototype.dispose=function(){for(var t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(t,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this},r.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)},r.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)},r.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.items.map(function(a){return a.resource}).filter(function(a){return a}),n=i.map(function(a){return a.load()});return this._load=Promise.all(n).then(function(){var a=t.items[0],s=a.realWidth,o=a.realHeight;return t.resize(s,o),Promise.resolve(t)}),this._load},r}(mi),ol=function(e){Mt(r,e);function r(t,i){var n=this,a=i||{},s=a.width,o=a.height,h,l;return Array.isArray(t)?(h=t,l=t.length):l=t,n=e.call(this,l,{width:s,height:o})||this,h&&n.initFromArray(h,i),n}return r.prototype.addBaseTextureAt=function(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},r.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=Lr.TEXTURE_2D_ARRAY},r.prototype.upload=function(t,i,n){var a=this,s=a.length,o=a.itemDirtyIds,h=a.items,l=t.gl;n.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,i.format,this._width,this._height,s,0,i.format,i.type,null);for(var u=0;u<s;u++){var f=h[u];o[u]<f.dirtyId&&(o[u]=f.dirtyId,f.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,u,f.resource.width,f.resource.height,1,i.format,i.type,f.resource.source))}return!0},r}(us),pr=function(e){Mt(r,e);function r(t){var i=this,n=t,a=n.naturalWidth||n.videoWidth||n.width,s=n.naturalHeight||n.videoHeight||n.height;return i=e.call(this,a,s)||this,i.source=t,i.noSubImage=!1,i}return r.crossOrigin=function(t,i,n){n===void 0&&i.indexOf("data:")!==0?t.crossOrigin=Hv(i):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")},r.prototype.upload=function(t,i,n,a){var s=t.gl,o=i.realWidth,h=i.realHeight;return a=a||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===fr.UNPACK),!this.noSubImage&&i.target===s.TEXTURE_2D&&n.width===o&&n.height===h?s.texSubImage2D(s.TEXTURE_2D,0,0,0,i.format,i.type,a):(n.width=o,n.height=h,s.texImage2D(i.target,0,i.format,i.format,i.type,a)),!0},r.prototype.update=function(){if(!this.destroyed){var t=this.source,i=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(i,n),e.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(mi),fs=function(e){Mt(r,e);function r(t){return e.call(this,t)||this}return r.test=function(t){var i=self.OffscreenCanvas;return i&&t instanceof i?!0:self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},r}(pr),hl=function(e){Mt(r,e);function r(t,i){var n=this,a=i||{},s=a.width,o=a.height,h=a.autoLoad,l=a.linkBaseTexture;if(t&&t.length!==r.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");n=e.call(this,6,{width:s,height:o})||this;for(var u=0;u<r.SIDES;u++)n.items[u].target=Lr.TEXTURE_CUBE_MAP_POSITIVE_X+u;return n.linkBaseTexture=l!==!1,t&&n.initFromArray(t,i),h!==!1&&n.load(),n}return r.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=Lr.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(t,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Lr.TEXTURE_CUBE_MAP_POSITIVE_X+i,t.parentTextureArray=this.baseTexture,this.items[i]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[i]=t,this},r.prototype.upload=function(t,i,n){for(var a=this.itemDirtyIds,s=0;s<r.SIDES;s++){var o=this.items[s];a[s]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,n),a[s]=o.dirtyId):a[s]<-1&&(t.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),a[s]=-1))}return!0},r.test=function(t){return Array.isArray(t)&&t.length===r.SIDES},r.SIDES=6,r}(us),cs=function(e){Mt(r,e);function r(t,i){var n=this;if(i=i||{},!(t instanceof HTMLImageElement)){var a=new Image;pr.crossOrigin(a,t,i.crossorigin),a.src=t,t=a}return n=e.call(this,t)||this,!t.complete&&!!n._width&&!!n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:yt.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return r.prototype.load=function(t){var i=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(n,a){var s=i.source;i.url=s.src;var o=function(){i.destroyed||(s.onload=null,s.onerror=null,i.resize(s.width,s.height),i._load=null,i.createBitmap?n(i.process()):n(i))};s.complete&&s.src?o():(s.onload=o,s.onerror=function(h){a(h),i.onError.emit(h)})}),this._load)},r.prototype.process=function(){var t=this,i=this.source;return this._process!==null?this._process:this.bitmap!==null||!self.createImageBitmap?Promise.resolve(this):(this._process=self.createImageBitmap(i,0,0,i.width,i.height,{premultiplyAlpha:this.alphaMode===fr.UNPACK?"premultiply":"none"}).then(function(n){return t.destroyed?Promise.reject():(t.bitmap=n,t.update(),t._process=null,Promise.resolve(t))}),this._process)},r.prototype.upload=function(t,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,i,n,this.bitmap),!this.preserveBitmap){var a=!0,s=i._glTextures;for(var o in s){var h=s[o];if(h!==n&&h.dirtyId!==i.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},r}(pr),ll=function(e){Mt(r,e);function r(t,i){var n=this;return i=i||{},n=e.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=t,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return r.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},r.prototype._loadSvg=function(){var t=this,i=new Image;pr.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){!t._resolve||(i.onerror=null,t.onError.emit(n))},i.onload=function(){if(!!t._resolve){var n=i.width,a=i.height;if(!n||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=n*t.scale,o=a*t.scale;(t._overrideWidth||t._overrideHeight)&&(s=t._overrideWidth||t._overrideHeight/a*n,o=t._overrideHeight||t._overrideWidth/n*a),s=Math.round(s),o=Math.round(o);var h=t.source;h.width=s,h.height=o,h._pixiId="canvas_"+pi(),h.getContext("2d").drawImage(i,0,0,n,a,0,0,s,o),t._resolve(),t._resolve=null}}},r.getSize=function(t){var i=r.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},r.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(t,i){return i==="svg"||typeof t=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t=="string"&&t.indexOf("<svg")===0},r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r}(pr),ul=function(e){Mt(r,e);function r(t,i){var n=this;if(i=i||{},!(t instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var s=t[0].src||t[0];pr.crossOrigin(a,s,i.crossorigin);for(var o=0;o<t.length;++o){var h=document.createElement("source"),l=t[o],u=l.src,f=l.mime;u=u||t[o];var c=u.split("?").shift().toLowerCase(),p=c.substr(c.lastIndexOf(".")+1);f=f||r.MIME_TYPES[p]||"video/"+p,h.src=u,h.type=f,a.appendChild(h)}t=a}return n=e.call(this,t)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return r.prototype.update=function(t){if(!this.destroyed){var i=pe.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},r.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,i.load())}),this._load},r.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},r.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},r.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(pe.shared.add(this.update,this),this._isConnectedToTicker=!0)},r.prototype._onPlayStop=function(){this._isConnectedToTicker&&(pe.shared.remove(this.update,this),this._isConnectedToTicker=!1)},r.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(t.videoWidth,t.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},r.prototype.dispose=function(){this._isConnectedToTicker&&pe.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(pe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(pe.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),r.test=function(t,i){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||r.TYPES.indexOf(i)>-1},r.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},r}(pr),fl=function(e){Mt(r,e);function r(t){return e.call(this,t)||this}return r.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},r}(pr);Xn.push(cs,fl,fs,ul,ll,Wi,hl,ol);var cl={__proto__:null,Resource:mi,BaseImageResource:pr,INSTALLED:Xn,autoDetectResource:hs,AbstractMultiResource:us,ArrayResource:ol,BufferResource:Wi,CanvasResource:fs,CubeResource:hl,ImageResource:cs,SVGResource:ll,VideoResource:ul,ImageBitmapResource:fl},Re=function(){function e(r){this.renderer=r}return e.prototype.destroy=function(){this.renderer=null},e}(),f_=function(e){Mt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.upload=function(t,i,n){var a=t.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===fr.UNPACK);var s=i.realWidth,o=i.realHeight;return n.width===s&&n.height===o?a.texSubImage2D(i.target,0,0,0,s,o,i.format,i.type,this.data):(n.width=s,n.height=o,a.texImage2D(i.target,0,t.context.webGLVersion===1?a.DEPTH_COMPONENT:a.DEPTH_COMPONENT16,s,o,0,i.format,i.type,this.data)),!0},r}(Wi),ds=function(){function e(r,t){this.width=Math.ceil(r||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ye("disposeFramebuffer"),this.multisample=li.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(r,t){return r===void 0&&(r=0),this.colorTextures[r]=t||new $t(null,{scaleMode:lr.NEAREST,resolution:1,mipmap:Sr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(r){return this.depthTexture=r||new $t(new f_(null,{width:this.width,height:this.height}),{scaleMode:lr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Sr.OFF,format:Je.DEPTH_COMPONENT,type:qt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(r,t){if(r=Math.ceil(r),t=Math.ceil(t),!(r===this.width&&t===this.height)){this.width=r,this.height=t,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],a=n.resolution;n.setSize(r/a,t/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(r/a,t/a)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),dl=function(e){Mt(r,e);function r(t){var i=this;if(typeof t=="number"){var n=arguments[0],a=arguments[1],s=arguments[2],o=arguments[3];t={width:n,height:a,scaleMode:s,resolution:o}}i=e.call(this,null,t)||this;var h=t||{},l=h.width,u=h.height;return i.mipmap=Sr.OFF,i.width=Math.ceil(l)||100,i.height=Math.ceil(u)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new ds(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return r.prototype.resize=function(t,i){t=Math.ceil(t),i=Math.ceil(i),this.framebuffer.resize(t*this.resolution,i*this.resolution)},r.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r}($t),pl=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(r,t,i){var n=t.width,a=t.height;if(i){var s=r.width/2/n,o=r.height/2/a,h=r.x/n+s,l=r.y/a+o;i=re.add(i,re.NW),this.x0=h+s*re.uX(i),this.y0=l+o*re.uY(i),i=re.add(i,2),this.x1=h+s*re.uX(i),this.y1=l+o*re.uY(i),i=re.add(i,2),this.x2=h+s*re.uX(i),this.y2=l+o*re.uY(i),i=re.add(i,2),this.x3=h+s*re.uX(i),this.y3=l+o*re.uY(i)}else this.x0=r.x/n,this.y0=r.y/a,this.x1=(r.x+r.width)/n,this.y1=r.y/a,this.x2=(r.x+r.width)/n,this.y2=(r.y+r.height)/a,this.x3=r.x/n,this.y3=(r.y+r.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),vl=new pl,Et=function(e){Mt(r,e);function r(t,i,n,a,s,o){var h=e.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new Gt(0,0,1,1)),t instanceof r&&(t=t.baseTexture),h.baseTexture=t,h._frame=i,h.trim=a,h.valid=!1,h._uvs=vl,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(s||0),s===!0)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new he(o.x,o.y):new he(0,0),h._updateID=0,h.textureCacheIds=[],t.valid?h.noFrame?t.valid&&h.onBaseTextureUpdated(t):h.frame=i:t.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&t.on("update",h.onBaseTextureUpdated,h),h}return r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&cr[i.url]&&r.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new r(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},r.prototype.updateUvs=function(){this._uvs===vl&&(this._uvs=new pl),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(t,i,n){i===void 0&&(i={}),n===void 0&&(n=yt.STRICT_TEXTURE_CACHE);var a=typeof t=="string",s=null;if(a)s=t;else{if(!t._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";t._pixiId=o+"_"+pi()}s=t._pixiId}var h=cr[s];if(a&&n&&!h)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=kn(t)),h=new r(new $t(t,i)),h.baseTexture.cacheId=s,$t.addToCache(h.baseTexture,s),r.addToCache(h,s)),h},r.fromURL=function(t,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),a=r.from(t,Object.assign({resourceOptions:n},i),!1),s=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):s.load().then(function(){return Promise.resolve(a)})},r.fromBuffer=function(t,i,n,a){return new r($t.fromBuffer(t,i,n,a))},r.fromLoader=function(t,i,n,a){var s=new $t(t,Object.assign({scaleMode:yt.SCALE_MODE,resolution:kn(i)},a)),o=s.resource;o instanceof cs&&(o.url=i);var h=new r(s);return n||(n=i),$t.addToCache(h.baseTexture,n),r.addToCache(h,n),n!==i&&($t.addToCache(h.baseTexture,i),r.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(l){h.baseTexture.once("loaded",function(){return l(h)})})},r.addToCache=function(t,i){i&&(t.textureCacheIds.indexOf(i)===-1&&t.textureCacheIds.push(i),cr[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),cr[i]=t)},r.removeFromCache=function(t){if(typeof t=="string"){var i=cr[t];if(i){var n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete cr[t],i}}else if(t&&t.textureCacheIds){for(var a=0;a<t.textureCacheIds.length;++a)cr[t.textureCacheIds[a]]===t&&delete cr[t.textureCacheIds[a]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(r.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var i=t.x,n=t.y,a=t.width,s=t.height,o=i+a>this.baseTexture.width,h=n+s>this.baseTexture.height;if(o||h){var l=o&&h?"and":"or",u="X: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.width,f="Y: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+l+" "+f))}this.valid=a&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),r.prototype.castToBaseTexture=function(){return this.baseTexture},r}(Bi);function c_(){var e=document.createElement("canvas");e.width=16,e.height=16;var r=e.getContext("2d");return r.fillStyle="white",r.fillRect(0,0,16,16),new Et(new $t(new fs(e)))}function Hn(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}Et.EMPTY=new Et(new $t);Hn(Et.EMPTY);Hn(Et.EMPTY.baseTexture);Et.WHITE=c_();Hn(Et.WHITE);Hn(Et.WHITE.baseTexture);var Hr=function(e){Mt(r,e);function r(t,i){var n=e.call(this,t,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(r.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,i,n){n===void 0&&(n=!0),t=Math.ceil(t),i=Math.ceil(i),this.valid=t>0&&i>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=i,n&&this.baseTexture.resize(t,i),this.updateUvs()},r.prototype.setResolution=function(t){var i=this.baseTexture;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))},r.create=function(t){for(var i=arguments,n=[],a=1;a<arguments.length;a++)n[a-1]=i[a];return typeof t=="number"&&(vi("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new r(new dl(t))},r}(Et),d_=function(){function e(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(r,t){var i=new dl(Object.assign({width:r,height:t,resolution:1},this.textureOptions));return new Hr(i)},e.prototype.getOptimalTexture=function(r,t,i){i===void 0&&(i=1);var n=e.SCREEN_KEY;r*=i,t*=i,(!this.enableFullScreen||r!==this._pixelsWidth||t!==this._pixelsHeight)&&(r=On(r),t=On(t),n=(r&65535)<<16|t&65535),this.texturePool[n]||(this.texturePool[n]=[]);var a=this.texturePool[n].pop();return a||(a=this.createTexture(r,t)),a.filterPoolKey=n,a.setResolution(i),a},e.prototype.getFilterTexture=function(r,t){var i=this.getOptimalTexture(r.width,r.height,t||r.resolution);return i.filterFrame=r.filterFrame,i},e.prototype.returnTexture=function(r){var t=r.filterPoolKey;r.filterFrame=null,this.texturePool[t].push(r)},e.prototype.returnFilterTexture=function(r){this.returnTexture(r)},e.prototype.clear=function(r){if(r=r!==!1,r)for(var t in this.texturePool){var i=this.texturePool[t];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(r){if(!(r.width===this._pixelsWidth&&r.height===this._pixelsHeight)){var t=e.SCREEN_KEY,i=this.texturePool[t];if(this.enableFullScreen=r.width>0&&r.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[t]=[],this._pixelsWidth=r.width,this._pixelsHeight=r.height}},e.SCREEN_KEY="screen",e}(),_l=function(){function e(r,t,i,n,a,s,o){t===void 0&&(t=0),i===void 0&&(i=!1),n===void 0&&(n=qt.FLOAT),this.buffer=r,this.size=t,this.normalized=i,this.type=n,this.stride=a,this.start=s,this.instance=o}return e.prototype.destroy=function(){this.buffer=null},e.from=function(r,t,i,n,a){return new e(r,t,i,n,a)},e}(),p_=0,me=function(){function e(r,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=p_++,this.disposeRunner=new ye("disposeBuffer")}return e.prototype.update=function(r){this.data=r||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},e.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new e(r)},e}();function ml(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var v_={Float32Array,Uint32Array,Int32Array,Uint8Array};function __(e,r){for(var t=0,i=0,n={},a=0;a<e.length;a++)i+=r[a],t+=e[a].length;for(var s=new ArrayBuffer(t*4),o=null,h=0,a=0;a<e.length;a++){var l=r[a],u=e[a],f=ml(u);n[f]||(n[f]=new v_[f](s)),o=n[f];for(var c=0;c<u.length;c++){var p=(c/l|0)*i+h,m=c%l;o[p+m]=u[c]}h+=l}return new Float32Array(s)}var gl={5126:4,5123:2,5121:1},m_=0,g_={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},zi=function(){function e(r,t){r===void 0&&(r=[]),t===void 0&&(t={}),this.buffers=r,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=m_++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ye("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(r,t,i,n,a,s,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof me||(t instanceof Array&&(t=new Float32Array(t)),t=new me(t));var l=r.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],t,i,n,a);return this}var f=this.buffers.indexOf(t);return f===-1&&(this.buffers.push(t),f=this.buffers.length-1),this.attributes[r]=new _l(f,i,n,a,s,o,h),this.instanced=this.instanced||h,this},e.prototype.getAttribute=function(r){return this.attributes[r]},e.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},e.prototype.addIndex=function(r){return r instanceof me||(r instanceof Array&&(r=new Uint16Array(r)),r=new me(r)),r.index=!0,this.indexBuffer=r,this.buffers.indexOf(r)===-1&&this.buffers.push(r),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var r=[],t=[],i=new me,n;for(n in this.attributes){var a=this.attributes[n],s=this.buffers[a.buffer];r.push(s.data),t.push(a.size*gl[a.type]/4),a.buffer=0}for(i.data=__(r,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var r in this.attributes){var t=this.attributes[r],i=this.buffers[t.buffer];return i.data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var r=new e,t=0;t<this.buffers.length;t++)r.buffers[t]=new me(this.buffers[t].data.slice(0));for(var t in this.attributes){var i=this.attributes[t];r.attributes[t]=new _l(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.index=!0),r},e.merge=function(r){for(var t=new e,i=[],n=[],a=[],s,o=0;o<r.length;o++){s=r[o];for(var h=0;h<s.buffers.length;h++)n[h]=n[h]||0,n[h]+=s.buffers[h].data.length,a[h]=0}for(var o=0;o<s.buffers.length;o++)i[o]=new g_[ml(s.buffers[o].data)](n[o]),t.buffers[o]=new me(i[o]);for(var o=0;o<r.length;o++){s=r[o];for(var h=0;h<s.buffers.length;h++)i[h].set(s.buffers[h].data,a[h]),a[h]+=s.buffers[h].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.index=!0;for(var l=0,u=0,f=0,c=0,o=0;o<s.buffers.length;o++)if(s.buffers[o]!==s.indexBuffer){c=o;break}for(var o in s.attributes){var p=s.attributes[o];(p.buffer|0)===c&&(u+=p.size*gl[p.type]/4)}for(var o=0;o<r.length;o++){for(var m=r[o].indexBuffer.data,h=0;h<m.length;h++)t.indexBuffer.data[h+f]+=l;l+=s.buffers[c].data.length/u,f+=m.length}}return t},e}(),y_=function(e){Mt(r,e);function r(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return r}(zi),yl=function(e){Mt(r,e);function r(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new me(t.vertices),t.uvBuffer=new me(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return r.prototype.map=function(t,i){var n=0,a=0;return this.uvs[0]=n,this.uvs[1]=a,this.uvs[2]=n+i.width/t.width,this.uvs[3]=a,this.uvs[4]=n+i.width/t.width,this.uvs[5]=a+i.height/t.height,this.uvs[6]=n,this.uvs[7]=a+i.height/t.height,n=i.x,a=i.y,this.vertices[0]=n,this.vertices[1]=a,this.vertices[2]=n+i.width,this.vertices[3]=a,this.vertices[4]=n+i.width,this.vertices[5]=a+i.height,this.vertices[6]=n,this.vertices[7]=a+i.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r}(zi),x_=0,jr=function(){function e(r,t){this.uniforms=r,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=x_++,this.static=!!t}return e.prototype.update=function(){this.dirtyId++},e.prototype.add=function(r,t,i){this.uniforms[r]=new e(t,i)},e.from=function(r,t){return new e(r,t)},e}(),b_=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Gt,this.destinationFrame=new Gt,this.bindingSourceFrame=new Gt,this.bindingDestinationFrame=new Gt,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),jn=[new he,new he,new he,new he],ps=new fe,xl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.defaultFilterStack=[{}],i.texturePool=new d_,i.texturePool.setScreenSize(t.view),i.statePool=[],i.quad=new y_,i.quadUv=new yl,i.tempRect=new Gt,i.activeState={},i.globalUniforms=new jr({outputFrame:new Gt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return r.prototype.push=function(t,i){for(var n=this.renderer,a=this.defaultFilterStack,s=this.statePool.pop()||new b_,o=this.renderer.renderTexture,h=i[0].resolution,l=i[0].padding,u=i[0].autoFit,f=i[0].legacy,c=1;c<i.length;c++){var p=i[c];h=Math.min(h,p.resolution),l=this.useMaxPadding?Math.max(l,p.padding):l+p.padding,u=u&&p.autoFit,f=f||p.legacy}if(a.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),a.push(s),s.resolution=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(l),u){var m=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(ps.copyFrom(n.projection.transform).invert(),m),s.sourceFrame.fit(m)}this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,h),s.filters=i,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,_),n.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,i=t.pop(),n=i.filters;this.activeState=i;var a=this.globalUniforms.uniforms;a.outputFrame=i.sourceFrame,a.resolution=i.resolution;var s=a.inputSize,o=a.inputPixel,h=a.inputClamp;if(s[0]=i.destinationFrame.width,s[1]=i.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=s[0]*i.resolution,o[1]=s[1]*i.resolution,o[2]=1/o[0],o[3]=1/o[1],h[0]=.5*o[2],h[1]=.5*o[3],h[2]=i.sourceFrame.width*s[2]-.5*o[2],h[3]=i.sourceFrame.height*s[3]-.5*o[3],i.legacy){var l=a.filterArea;l[0]=i.destinationFrame.width,l[1]=i.destinationFrame.height,l[2]=i.sourceFrame.x,l[3]=i.sourceFrame.y,a.filterClamp=a.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(i.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,u.renderTexture,Ir.BLEND,i),this.returnFilterTexture(i.renderTexture);else{var f=i.renderTexture,c=this.getOptimalFilterTexture(f.width,f.height,i.resolution);c.filterFrame=f.filterFrame;var p=0;for(p=0;p<n.length-1;++p){n[p].apply(this,f,c,Ir.CLEAR,i);var m=f;f=c,c=m}n[p].apply(this,f,u.renderTexture,Ir.BLEND,i),this.returnFilterTexture(f),this.returnFilterTexture(c)}i.clear(),this.statePool.push(i)},r.prototype.bindAndClear=function(t,i){i===void 0&&(i=Ir.CLEAR);var n=this.renderer,a=n.renderTexture,s=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,a.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?a.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var h=s.stateId&1||this.forceClear;(i===Ir.CLEAR||i===Ir.BLIT&&h)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,i,n,a){var s=this.renderer;s.state.set(t.state),this.bindAndClear(n,a),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy?(this.quadUv.map(i._frame,i.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(He.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(He.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,i){var n=this.activeState,a=n.sourceFrame,s=n.destinationFrame,o=i._texture.orig,h=t.set(s.width,0,0,s.height,a.x,a.y),l=i.worldTransform.copyTo(fe.TEMP_MATRIX);return l.invert(),h.prepend(l),h.scale(1/o.width,1/o.height),h.translate(i.anchor.x,i.anchor.y),h},r.prototype.destroy=function(){this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,i,n){return n===void 0&&(n=1),this.texturePool.getOptimalTexture(t,i,n)},r.prototype.getFilterTexture=function(t,i){if(typeof t=="number"){var n=t;t=i,i=n}t=t||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution);return a.filterFrame=t.filterFrame,a},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,i){var n=jn[0],a=jn[1],s=jn[2],o=jn[3];n.set(i.left,i.top),a.set(i.left,i.bottom),s.set(i.right,i.top),o.set(i.right,i.bottom),t.apply(n,n),t.apply(a,a),t.apply(s,s),t.apply(o,o);var h=Math.min(n.x,a.x,s.x,o.x),l=Math.min(n.y,a.y,s.y,o.y),u=Math.max(n.x,a.x,s.x,o.x),f=Math.max(n.y,a.y,s.y,o.y);i.x=h,i.y=l,i.width=u-h,i.height=f-l},r.prototype.roundFrame=function(t,i,n,a,s){if(s){var o=s.a,h=s.b,l=s.c,u=s.d;if((h!==0||l!==0)&&(o!==0||u!==0))return}s=s?ps.copyFrom(s):ps.identity(),s.translate(-n.x,-n.y).scale(a.width/n.width,a.height/n.height).translate(a.x,a.y),this.transformAABB(s,t),t.ceil(i),this.transformAABB(s.invert(),t)},r}(Re),Vn=function(){function e(r){this.renderer=r}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(r){},e}(),bl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.emptyRenderer=new Vn(t),i.currentRenderer=i.emptyRenderer,i}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,i){for(var n=this.renderer.texture.boundTextures,a=i-1;a>=0;--a)t[a]=n[a]||null,t[a]&&(t[a]._batchLocation=a)},r.prototype.boundArray=function(t,i,n,a){for(var s=t.elements,o=t.ids,h=t.count,l=0,u=0;u<h;u++){var f=s[u],c=f._batchLocation;if(c>=0&&c<a&&i[c]===f){o[u]=c;continue}for(;l<a;){var p=i[l];if(p&&p._batchEnabled===n&&p._batchLocation===l){l++;continue}o[u]=l,f._batchLocation=l,i[l]=f;break}}},r}(Re),wl=0,Tl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),t.view.addEventListener("webglcontextlost",i.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=wl++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=wl++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var i=this.createContext(this.renderer.view,t);this.initFromContext(i)},r.prototype.createContext=function(t,i){var n;if(yt.PREFER_ENV>=hr.WEBGL2&&(n=t.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,i={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var i=t.getContextAttributes(),n="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;n&&(this.webGLVersion=2),i.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var a=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=a,a||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(Re),w_=function(){function e(r){this.framebuffer=r,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=li.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return e}(),T_=new Gt,El=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new ds(10,10),i.msaaSamples=null,i}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Gt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;yt.PREFER_ENV===hr.WEBGL_LEGACY&&(i=null,n=null),i?t.drawBuffers=function(a){return i.drawBuffersWEBGL(a)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,i){var n=this.gl;if(t){var a=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,a.framebuffer)),a.dirtyId!==t.dirtyId&&(a.dirtyId=t.dirtyId,a.dirtyFormat!==t.dirtyFormat?(a.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):a.dirtySize!==t.dirtySize&&(a.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var o=t.colorTextures[s];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,i,n,a){var s=this.viewport;(s.width!==n||s.height!==a||s.x!==t||s.y!==i)&&(s.x=t,s.y=i,s.width=n,s.height=a,this.gl.viewport(t,i,n,a))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,i,n,a,s){s===void 0&&(s=Cn.COLOR|Cn.DEPTH);var o=this.gl;o.clearColor(t,i,n,a),o.clear(s)},r.prototype.initFramebuffer=function(t){var i=this.gl,n=new w_(i.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},r.prototype.resizeFramebuffer=function(t){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height));for(var a=t.colorTextures,s=0;s<a.length;s++)this.renderer.texture.bind(a[s],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],a=t.colorTextures,s=a.length;i.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&(n.msaaBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer));for(var o=[],h=0;h<s;h++)if(!(h===0&&n.multisample>1)){var l=t.colorTextures[h],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,l.target,u._glTextures[this.CONTEXT_UID].texture,0),o.push(i.COLOR_ATTACHMENT0+h)}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,0)}}!n.stencil&&(t.stencil||t.depth)&&(n.stencil=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),t.depthTexture||i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil))},r.prototype.detectSamples=function(t){var i=this.msaaSamples,n=li.NONE;if(t<=1||i===null)return n;for(var a=0;a<i.length;a++)if(i[a]<=t){n=i[a];break}return n===1&&(n=li.NONE),n},r.prototype.blit=function(t,i,n){var a=this,s=a.current,o=a.renderer,h=a.gl,l=a.CONTEXT_UID;if(o.context.webGLVersion===2&&!!s){var u=s.glFramebuffers[l];if(!!u){if(!t){if(u.multisample<=1)return;u.blitFramebuffer||(u.blitFramebuffer=new ds(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}i||(i=T_,i.width=s.width,i.height=s.height),n||(n=i);var f=i.width===n.width&&i.height===n.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,u.framebuffer),h.blitFramebuffer(i.x,i.y,i.width,i.height,n.x,n.y,n.width,n.height,h.COLOR_BUFFER_BIT,f?h.NEAREST:h.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,i){var n=t.glFramebuffers[this.CONTEXT_UID],a=this.gl;if(!!n){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),i||(a.deleteFramebuffer(n.framebuffer),n.stencil&&a.deleteRenderbuffer(n.stencil))}},r.prototype.disposeAll=function(t){var i=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<i.length;n++)this.disposeFramebuffer(i[n],t)},r.prototype.forceStencil=function(){var t=this.current;if(!!t){var i=t.glFramebuffers[this.CONTEXT_UID];if(!(!i||i.stencil)){t.enableStencil();var n=t.width,a=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,a),i.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Gt},r}(Re),E_=function(){function e(r){this.buffer=r||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),vs={5126:4,5123:2,5121:1},Sl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;yt.PREFER_ENV===hr.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(i.webGLVersion!==2){var a=t.getExtension("ANGLE_instanced_arrays");a?(t.vertexAttribDivisor=function(s,o){return a.vertexAttribDivisorANGLE(s,o)},t.drawElementsInstanced=function(s,o,h,l,u){return a.drawElementsInstancedANGLE(s,o,h,l,u)},t.drawArraysInstanced=function(s,o,h,l){return a.drawArraysInstancedANGLE(s,o,h,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex},r.prototype.bind=function(t,i){i=i||this.renderer.shader.shader;var n=this.gl,a=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;a||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=a={},s=!0);var o=a[i.program.id]||this.initGeometryVao(t,i.program,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,i.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,i=this.gl,n=0;n<t.buffers.length;n++){var a=t.buffers[n],s=a._glBuffers[this.CONTEXT_UID];if(a._updateID!==s.updateID){s.updateID=a._updateID;var o=a.index?i.ELEMENT_ARRAY_BUFFER:i.ARRAY_BUFFER;if(i.bindBuffer(o,s.buffer),this._boundBuffer=s,s.byteLength>=a.data.byteLength)i.bufferSubData(o,0,a.data);else{var h=a.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=a.data.byteLength,i.bufferData(o,a.data,h)}}}},r.prototype.checkCompatibility=function(t,i){var n=t.attributes,a=i.attributeData;for(var s in a)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,i){var n=t.attributes,a=i.attributeData,s=["g",t.id];for(var o in n)a[o]&&s.push(o);return s.join("-")},r.prototype.initGeometryVao=function(t,i,n){n===void 0&&(n=!0),this.checkCompatibility(t,i);var a=this.gl,s=this.CONTEXT_UID,o=this.getSignature(t,i),h=t.glVertexArrayObjects[this.CONTEXT_UID],l=h[o];if(l)return h[i.id]=l,l;var u=t.buffers,f=t.attributes,c={},p={};for(var m in u)c[m]=0,p[m]=0;for(var m in f)!f[m].size&&i.attributeData[m]?f[m].size=i.attributeData[m].size:f[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[f[m].buffer]+=f[m].size*vs[f[m].type];for(var m in f){var _=f[m],v=_.size;_.stride===void 0&&(c[_.buffer]===v*vs[_.type]?_.stride=0:_.stride=c[_.buffer]),_.start===void 0&&(_.start=p[_.buffer],p[_.buffer]+=v*vs[_.type])}l=a.createVertexArray(),a.bindVertexArray(l);for(var y=0;y<u.length;y++){var E=u[y];E._glBuffers[s]||(E._glBuffers[s]=new E_(a.createBuffer()),this.managedBuffers[E.id]=E,E.disposeRunner.add(this)),n&&E._glBuffers[s].refCount++}return this.activateVao(t,i),this._activeVao=l,h[i.id]=l,h[o]=l,l},r.prototype.disposeBuffer=function(t,i){if(!!this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],a=this.gl;t.disposeRunner.remove(this),!!n&&(i||a.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeGeometry=function(t,i){if(!!this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,s=t.buffers;if(t.disposeRunner.remove(this),!!n){for(var o=0;o<s.length;o++){var h=s[o]._glBuffers[this.CONTEXT_UID];h.refCount--,h.refCount===0&&!i&&this.disposeBuffer(s[o],i)}if(!i){for(var l in n)if(l[0]==="g"){var u=n[l];this._activeVao===u&&this.unbind(),a.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var i=Object.keys(this.managedGeometries),n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],t);i=Object.keys(this.managedBuffers);for(var n=0;n<i.length;n++)this.disposeBuffer(this.managedBuffers[i[n]],t)},r.prototype.activateVao=function(t,i){var n=this.gl,a=this.CONTEXT_UID,s=t.buffers,o=t.attributes;t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[a].buffer);var h=null;for(var l in o){var u=o[l],f=s[u.buffer],c=f._glBuffers[a];if(i.attributeData[l]){h!==c&&(n.bindBuffer(n.ARRAY_BUFFER,c.buffer),h=c);var p=i.attributeData[l].location;if(n.enableVertexAttribArray(p),n.vertexAttribPointer(p,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,i,n,a){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var h=o.indexBuffer.data.BYTES_PER_ELEMENT,l=h===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;h===2||h===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,i||o.indexBuffer.data.length,l,(n||0)*h,a||1):s.drawElements(t,i||o.indexBuffer.data.length,l,(n||0)*h):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,n,i||o.getSize(),a||1):s.drawArrays(t,n,i||o.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r}(Re),S_=function(){function e(r){r===void 0&&(r=null),this.type=Ce.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Ce.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function Il(e,r,t){var i=e.createShader(r);return e.shaderSource(i,t),e.compileShader(i),i}function Pl(e,r,t,i){var n=Il(e,e.VERTEX_SHADER,r),a=Il(e,e.FRAGMENT_SHADER,t),s=e.createProgram();if(e.attachShader(s,n),e.attachShader(s,a),i)for(var o in i)e.bindAttribLocation(s,i[o],o);return e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||(console.warn(r),console.error(e.getShaderInfoLog(n))),e.getShaderParameter(a,e.COMPILE_STATUS)||(console.warn(t),console.error(e.getShaderInfoLog(a))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(s,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),e.getProgramInfoLog(s)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(s)),e.deleteProgram(s),s=null),e.deleteShader(n),e.deleteShader(a),s}function _s(e){for(var r=new Array(e),t=0;t<r.length;t++)r[t]=!1;return r}function Al(e,r){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*r);case"vec3":return new Float32Array(3*r);case"vec4":return new Float32Array(4*r);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*r);case"ivec3":return new Int32Array(3*r);case"ivec4":return new Int32Array(4*r);case"uvec2":return new Uint32Array(2*r);case"uvec3":return new Uint32Array(3*r);case"uvec4":return new Uint32Array(4*r);case"bool":return!1;case"bvec2":return _s(2*r);case"bvec3":return _s(3*r);case"bvec4":return _s(4*r);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Cl={},qi=Cl;function Rl(){if(qi===Cl||qi&&qi.isContextLost()){var e=document.createElement("canvas"),r=void 0;yt.PREFER_ENV>=hr.WEBGL2&&(r=e.getContext("webgl2",{})),r||(r=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),r?r.getExtension("WEBGL_draw_buffers"):r=null),qi=r}return qi}var Yn;function I_(){if(!Yn){Yn=Qe.MEDIUM;var e=Rl();if(e&&e.getShaderPrecisionFormat){var r=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Yn=r.precision?Qe.HIGH:Qe.MEDIUM}}return Yn}function Ol(e,r,t){if(e.substring(0,9)!=="precision"){var i=r;return r===Qe.HIGH&&t!==Qe.HIGH&&(i=Qe.MEDIUM),"precision "+i+` float;
`+e}else if(t!==Qe.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var P_={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function A_(e){return P_[e]}var Wn=null,Ul={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function kl(e,r){if(!Wn){var t=Object.keys(Ul);Wn={};for(var i=0;i<t.length;++i){var n=t[i];Wn[e[n]]=Ul[n]}}return Wn[r]}var ms=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,r){return e.type==="mat3"&&e.size===1&&r.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `}},{test:function(e,r){return e.type==="vec2"&&e.size===1&&r.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,r){return e.type==="vec4"&&e.size===1&&r.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],C_={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},R_={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function O_(e,r){var t=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in e.uniforms){var n=r[i];if(!n){e.uniforms[i].group&&t.push(`
                    renderer.shader.syncUniformGroup(uv["`+i+`"], syncData);
                `);continue}for(var a=e.uniforms[i],s=!1,o=0;o<ms.length;o++)if(ms[o].test(n,a)){t.push(ms[o].code(i,a)),s=!0;break}if(!s){var h=n.size===1?C_:R_,l=h[n.type].replace("location",'ud["'+i+'"].location');t.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+l+";")}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var U_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function k_(e){for(var r="",t=0;t<e;++t)t>0&&(r+=`
else `),t<e-1&&(r+="if(test == "+t+".0){}");return r}function F_(e,r){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=r.createShader(r.FRAGMENT_SHADER);;){var i=U_.replace(/%forloop%/gi,k_(e));if(r.shaderSource(t,i),r.compileShader(t),!r.getShaderParameter(t,r.COMPILE_STATUS))e=e/2|0;else break}return e}var $i;function M_(){if(typeof $i=="boolean")return $i;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");$i=e({a:"b"},"a","b")===!0}catch(r){$i=!1}return $i}var L_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,N_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,D_=0,zn={},qn=function(){function e(r,t,i){i===void 0&&(i="pixi-shader"),this.id=D_++,this.vertexSrc=r||e.defaultVertexSrc,this.fragmentSrc=t||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),zn[i]?(zn[i]++,i+="-"+zn[i]):zn[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=Ol(this.vertexSrc,yt.PRECISION_VERTEX,Qe.HIGH),this.fragmentSrc=Ol(this.fragmentSrc,yt.PRECISION_FRAGMENT,I_())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(r,t){var i=Rl();if(i){var n=Pl(i,r,t);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(r,t){for(var i={},n=[],a=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),s=0;s<a;s++){var o=t.getActiveAttrib(r,s),h=kl(t,o.type),l={type:h,name:o.name,size:A_(h),location:0};i[o.name]=l,n.push(l)}n.sort(function(u,f){return u.name>f.name?1:-1});for(var s=0;s<n.length;s++)n[s].location=s;return i},e.prototype.getUniformData=function(r,t){for(var i={},n=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),a=0;a<n;a++){var s=t.getActiveUniform(r,a),o=s.name.replace(/\[.*?\]$/,""),h=s.name.match(/\[.*?\]$/),l=kl(t,s.type);i[o]={type:l,size:s.size,isArray:h,value:Al(l,s.size)}}return i},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return N_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return L_},enumerable:!1,configurable:!0}),e.from=function(r,t,i){var n=r+t,a=Qh[n];return a||(Qh[n]=a=new e(r,t,i)),a},e}(),Vr=function(){function e(r,t){this.program=r,t?t instanceof jr?this.uniformGroup=t:this.uniformGroup=new jr(t):this.uniformGroup=new jr({});for(var i in r.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return e.prototype.checkUniformExists=function(r,t){if(t.uniforms[r])return!0;for(var i in t.uniforms){var n=t.uniforms[i];if(n.group&&this.checkUniformExists(r,n))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(r,t,i){var n=qn.from(r,t);return new e(n,i)},e}(),gs=0,ys=1,xs=2,bs=3,ws=4,Ts=5,Yr=function(){function e(){this.data=0,this.blendMode=wt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<gs)},set:function(r){!!(this.data&1<<gs)!==r&&(this.data^=1<<gs)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<ys)},set:function(r){!!(this.data&1<<ys)!==r&&(this.data^=1<<ys)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<xs)},set:function(r){!!(this.data&1<<xs)!==r&&(this.data^=1<<xs)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<bs)},set:function(r){!!(this.data&1<<bs)!==r&&(this.data^=1<<bs)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<Ts)},set:function(r){!!(this.data&1<<Ts)!==r&&(this.data^=1<<Ts)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<ws)},set:function(r){!!(this.data&1<<ws)!==r&&(this.data^=1<<ws)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(r){this.blend=r!==wt.NONE,this._blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(r){this.offsets=!!r,this._polygonOffset=r},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var r=new e;return r.depthTest=!1,r.blend=!0,r},e}(),B_=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,G_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Pr=function(e){Mt(r,e);function r(t,i,n){var a=this,s=qn.from(t||r.defaultVertexSrc,i||r.defaultFragmentSrc);return a=e.call(this,s,n)||this,a.padding=0,a.resolution=yt.FILTER_RESOLUTION,a.enabled=!0,a.autoFit=!0,a.legacy=!!a.program.attributeData.aTextureCoord,a.state=new Yr,a}return r.prototype.apply=function(t,i,n,a,s){t.applyFilter(this,i,n,a)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultVertexSrc",{get:function(){return B_},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return G_},enumerable:!1,configurable:!0}),r}(Vr),X_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,H_=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Fl=new fe,Es=function(){function e(r,t){this._texture=r,this.mapCoord=new fe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t=="undefined"?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture=r,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(r,t){t===void 0&&(t=r);for(var i=this.mapCoord,n=0;n<r.length;n+=2){var a=r[n],s=r[n+1];t[n]=a*i.a+s*i.c+i.tx,t[n+1]=a*i.b+s*i.d+i.ty}return t},e.prototype.update=function(r){var t=this._texture;if(!t||!t.valid||!r&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=t.orig,a=t.trim;a&&(Fl.set(n.width/a.width,0,0,n.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(Fl));var s=t.baseTexture,o=this.uClampFrame,h=this.clampMargin/s.resolution,l=this.clampOffset;return o[0]=(t._frame.x+h+l)/s.width,o[1]=(t._frame.y+h+l)/s.height,o[2]=(t._frame.x+t._frame.width-h+l)/s.width,o[3]=(t._frame.y+t._frame.height-h+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&t.rotate===0,!0},e}(),j_=function(e){Mt(r,e);function r(t){var i=this,n=new fe;return i=e.call(this,X_,H_)||this,t.renderable=!1,i.maskSprite=t,i.maskMatrix=n,i}return r.prototype.apply=function(t,i,n,a){var s=this.maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new Es(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,i,n,a))},r}(Pr),Ml=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.enableScissor=!0,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,i){var n=i;if(!n.isMaskData){var a=this.maskDataPool.pop()||new S_;a.pooled=!0,a.maskObject=i,n=a}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case Ce.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case Ce.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case Ce.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n);break}},r.prototype.pop=function(t){var i=this.maskStack.pop();if(!(!i||i._target!==t)){switch(i.type){case Ce.SCISSOR:this.renderer.scissor.pop();break;case Ce.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case Ce.SPRITE:this.popSpriteMask();break}i.reset(),i.pooled&&this.maskDataPool.push(i)}},r.prototype.detect=function(t){var i=t.maskObject;if(i.isSprite){t.type=Ce.SPRITE;return}if(t.type=Ce.STENCIL,this.enableScissor&&i.isFastRect&&i.isFastRect()){var n=i.worldTransform,a=Math.atan2(n.b,n.a),s=Math.atan2(n.d,n.c);a=Math.round(a*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-a,a=(a%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,a===0&&s===9e3&&(t.type=Ce.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var i=t.maskObject,n=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new j_(i)]),a[0].resolution=this.renderer.resolution,a[0].maskSprite=i;var s=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filter.push(n,a),n.filterArea=s,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r}(Re),Ll=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.maskStack=[],i.glConst=0,i}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var i=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var a=this.getStackLength();a!==n&&(a===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskStack=null},r}(Re),Nl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},r.prototype.push=function(t){var i=t.maskObject;i.renderable=!0;var n=t._scissorRect,a=i.getBounds(!0),s=this.renderer.gl;i.renderable=!1,n?a.fit(n):s.enable(s.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=a,this._useCurrent()},r.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},r.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,a=n.transform,s=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,l=o.width/s.width,u=o.height/s.height,f=((t.x-s.x)*l+o.x)*h,c=((t.y-s.y)*u+o.y)*h,p=t.width*l*h,m=t.height*u*h;a&&(f+=a.tx*h,c+=a.ty*h),i||(c=this.renderer.height-m-c),this.renderer.gl.scissor(f,c,p,m)},r}(Ll),Dl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},r.prototype.push=function(t){var i=t.maskObject,n=this.renderer.gl,a=t._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,a,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),i.renderable=!1,this._useCurrent()},r.prototype.pop=function(t){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},r.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},r}(Ll),Bl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new fe,i.transform=null,i}return r.prototype.update=function(t,i,n,a){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,a),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,i,n,a){var s=this.projectionMatrix,o=a?-1:1;s.identity(),s.a=1/i.width*2,s.d=o*(1/i.height*2),s.tx=-1-i.x*s.a,s.ty=-o-i.y*s.d},r.prototype.setTransform=function(t){},r}(Re),Wr=new Gt,Zi=new Gt,Gl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.clearColor=t._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new Gt,i.destinationFrame=new Gt,i.viewportFrame=new Gt,i}return r.prototype.bind=function(t,i,n){t===void 0&&(t=null);var a=this.renderer;this.current=t;var s,o,h;t?(s=t.baseTexture,h=s.resolution,i||(Wr.width=t.frame.width,Wr.height=t.frame.height,i=Wr),n||(Zi.x=t.frame.x,Zi.y=t.frame.y,Zi.width=i.width,Zi.height=i.height,n=Zi),o=s.framebuffer):(h=a.resolution,i||(Wr.width=a.screen.width,Wr.height=a.screen.height,i=Wr),n||(n=Wr,n.width=i.width,n.height=i.height));var l=this.viewportFrame;l.x=n.x*h,l.y=n.y*h,l.width=n.width*h,l.height=n.height*h,t||(l.y=a.view.height-(l.y+l.height)),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,i,h,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)},r.prototype.clear=function(t,i){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var n=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer.screen,s=n.width!==a.width||n.height!==a.height;if(s){var o=this.viewportFrame,h=o.x,l=o.y,u=o.width,f=o.height;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,l,u,f)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],i),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r}(Re),ox=function(){function e(){}return e}(),V_=function(){function e(r,t){this.program=r,this.uniformData=t,this.uniformGroups={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},e}(),Y_=0,Xl={textureCount:0},Hl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=Y_++,i}return r.prototype.systemCheck=function(){if(!M_())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,i){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,a=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(a.program)),i||(Xl.textureCount=0,this.syncUniformGroup(t.uniformGroup,Xl)),a},r.prototype.setUniforms=function(t){var i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,i){var n=this.getglProgram();(!t.static||t.dirtyId!==n.uniformGroups[t.id])&&(n.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,i))},r.prototype.syncUniforms=function(t,i,n){var a=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);a(i.uniformData,t.uniforms,this.renderer,n)},r.prototype.createSyncGroups=function(t){var i=this.getSignature(t,this.shader.program.uniformData);return this.cache[i]||(this.cache[i]=O_(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]},r.prototype.getSignature=function(t,i){var n=t.uniforms,a=[];for(var s in n)a.push(s),i[s]&&a.push(i[s].type);return a.join("-")},r.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateShader=function(t){var i=this.gl,n=t.program,a={};for(var s in n.attributeData)a[s]=n.attributeData[s].location;var o=Pl(i,n.vertexSrc,n.fragmentSrc,a),h={};for(var s in n.uniformData){var l=n.uniformData[s];h[s]={location:i.getUniformLocation(o,s),value:Al(l.type,l.size)}}var u=new V_(o,h);return n.glPrograms[this.renderer.CONTEXT_UID]=u,u},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.destroyed=!0},r}(Re);function W_(e,r){return r===void 0&&(r=[]),r[wt.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.ADD]=[e.ONE,e.ONE],r[wt.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.NONE]=[0,0],r[wt.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],r[wt.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[wt.SRC_IN]=[e.DST_ALPHA,e.ZERO],r[wt.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],r[wt.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],r[wt.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],r[wt.DST_IN]=[e.ZERO,e.SRC_ALPHA],r[wt.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],r[wt.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],r[wt.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],r[wt.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],r}var z_=0,q_=1,$_=2,Z_=3,K_=4,J_=5,jl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=wt.NONE,i._blendEq=!1,i.map=[],i.map[z_]=i.setBlend,i.map[q_]=i.setOffset,i.map[$_]=i.setCullFace,i.map[Z_]=i.setDepthTest,i.map[K_]=i.setFrontFace,i.map[J_]=i.setDepthMask,i.checks=[],i.defaultState=new Yr,i.defaultState.blend=!0,i}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=W_(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var i=this.stateId^t.data,n=0;i;)i&1&&this.map[n].call(this,!!(t.data&1<<n)),i=i>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var i=0;i<this.map.length;i++)this.map[i].call(this,!!(t.data&1<<i));for(var i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var i=this.blendModes[t],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,i){this.gl.polygonOffset(t,i)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,i){var n=this.checks.indexOf(t);i&&n===-1?this.checks.push(t):!i&&n!==-1&&this.checks.splice(n,1)},r.checkBlendMode=function(t,i){t.setBlendMode(i.blendMode)},r.checkPolygonOffset=function(t,i){t.setPolygonOffset(1,i.polygonOffset)},r}(Re),Vl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.count=0,i.checkCount=0,i.maxIdle=yt.GC_MAX_IDLE,i.checkCountMax=yt.GC_MAX_CHECK_COUNT,i.mode=yt.GC_MODE,i}return r.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==Qa.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,i=t.managedTextures,n=!1,a=0;a<i.length;a++){var s=i[a];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),i[a]=null,n=!0)}if(n){for(var o=0,a=0;a<i.length;a++)i[a]!==null&&(i[o++]=i[a]);i.length=o}},r.prototype.unload=function(t){var i=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&i.destroyTexture(n);for(var a=t.children.length-1;a>=0;a--)this.unload(t.children[a])},r}(Re),Ss=function(){function e(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121,this.samplerType=0}return e}(),Yl=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new $t,i.hasIntegerTextures=!1,i}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(var n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};var a=new Ss(t.createTexture());t.bindTexture(t.TEXTURE_2D,a.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=a,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Ss(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},r.prototype.bind=function(t,i){i===void 0&&(i=0);var n=this.gl;if(t){if(t=t.castToBaseTexture(),t.parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var a=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(t.target,a.texture)),a.dirtyId!==t.dirtyId&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(t)),this.boundTextures[i]=t}}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var i=this,n=i.gl,a=i.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<a.length;s++)a[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<a.length;s++)a[s]===t&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(t.target,this.emptyTextures[t.target].texture),a[s]=null)},r.prototype.ensureSamplerType=function(t){var i=this,n=i.boundTextures,a=i.hasIntegerTextures,s=i.CONTEXT_UID;if(!!a)for(var o=t-1;o>=0;--o){var h=n[o];if(h){var l=h._glTextures[s];l.samplerType!==Rn.FLOAT&&this.renderer.texture.unbind(h)}}},r.prototype.initTexture=function(t){var i=new Ss(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i},r.prototype.initTextureType=function(t,i){if(i.internalFormat=t.format,i.type=t.type,this.webGLVersion===2){var n=this.renderer.gl;t.type===n.FLOAT&&t.format===n.RGBA&&(i.internalFormat=n.RGBA32F),t.type===qt.HALF_FLOAT&&(i.type=n.HALF_FLOAT),i.type===n.HALF_FLOAT&&t.format===n.RGBA&&(i.internalFormat=n.RGBA16F)}},r.prototype.updateTexture=function(t){var i=t._glTextures[this.CONTEXT_UID];if(!!i){var n=this.renderer;if(this.initTextureType(t,i),t.resource&&t.resource.upload(n,t,i))i.samplerType!==Rn.FLOAT&&(this.hasIntegerTextures=!0);else{var a=t.realWidth,s=t.realHeight,o=n.gl;(i.width!==a||i.height!==s||i.dirtyId<0)&&(i.width=a,i.height=s,o.texImage2D(t.target,0,i.internalFormat,a,s,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,i){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){var a=this.managedTextures.indexOf(t);a!==-1&&ci(this.managedTextures,a,1)}},r.prototype.updateTextureStyle=function(t){var i=t._glTextures[this.CONTEXT_UID];!i||((t.mipmap===Sr.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=ur.CLAMP:i.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,i){var n=this.gl;if(i.mipmap&&t.mipmap!==Sr.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===lr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var a=this.renderer.context.extensions.anisotropicFiltering;if(a&&t.anisotropicLevel>0&&t.scaleMode===lr.LINEAR){var s=Math.min(t.anisotropicLevel,n.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,a.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===lr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===lr.LINEAR?n.LINEAR:n.NEAREST)},r}(Re),Wl={__proto__:null,FilterSystem:xl,BatchSystem:bl,ContextSystem:Tl,FramebufferSystem:El,GeometrySystem:Sl,MaskSystem:Ml,ScissorSystem:Nl,StencilSystem:Dl,ProjectionSystem:Bl,RenderTextureSystem:Gl,ShaderSystem:Hl,StateSystem:jl,TextureGCSystem:Vl,TextureSystem:Yl},Is=new fe,Q_=function(e){Mt(r,e);function r(t,i){t===void 0&&(t=Yi.UNKNOWN);var n=e.call(this)||this;return i=Object.assign({},yt.RENDER_OPTIONS,i),n.options=i,n.type=t,n.screen=new Gt(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||yt.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(vi("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return r.prototype.initPlugins=function(t){for(var i in t)this.plugins[i]=new t[i](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,i){this.screen.width=t,this.screen.height=i,this.view.width=t*this.resolution,this.view.height=i*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=i+"px"),this.emit("resize",t,i)},r.prototype.generateTexture=function(t,i,n,a){a=a||t.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var s=Hr.create({width:a.width|0,height:a.height|0,scaleMode:i,resolution:n});return Is.tx=-a.x,Is.ty=-a.y,this.render(t,{renderTexture:s,clear:!1,transform:Is,skipUpdateTransform:!!t.parent}),s},r.prototype.destroy=function(t){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Yi.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Yh(t),fi(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),r}(Bi),Ar=function(e){Mt(r,e);function r(t){var i=e.call(this,Yi.WEBGL,t)||this;return t=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new ye("destroy"),contextChange:new ye("contextChange"),reset:new ye("reset"),update:new ye("update"),postrender:new ye("postrender"),prerender:new ye("prerender"),resize:new ye("resize")},i.globalUniforms=new jr({projectionMatrix:new fe},!0),i.addSystem(Ml,"mask").addSystem(Tl,"context").addSystem(jl,"state").addSystem(Hl,"shader").addSystem(Yl,"texture").addSystem(Sl,"geometry").addSystem(El,"framebuffer").addSystem(Nl,"scissor").addSystem(Dl,"stencil").addSystem(Bl,"projection").addSystem(Vl,"textureGC").addSystem(xl,"filter").addSystem(Gl,"renderTexture").addSystem(bl,"batch"),i.initPlugins(r.__plugins),t.context?i.context.initFromContext(t.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:t.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,qd(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return r.create=function(t){if($d())return new r(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.addSystem=function(t,i){i||(i=t.name);var n=new t(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var a in this.runners)this.runners[a].add(n);return this},r.prototype.render=function(t,i){var n,a,s,o;if(i&&(i instanceof Hr?(vi("6.0.0","Renderer#render arguments changed, use options instead."),n=i,a=arguments[2],s=arguments[3],o=arguments[4]):(n=i.renderTexture,a=i.clear,s=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(n||(this._lastObjectRendered=t),!o){var h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.resize=function(t,i){e.prototype.resize.call(this,t,i),this.runners.resize.emit(t,i)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(t){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(r.prototype,"extract",{get:function(){return vi("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),r.registerPlugin=function(t,i){r.__plugins=r.__plugins||{},r.__plugins[t]=i},r}(Q_);function tm(e){return Ar.create(e)}var em=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,rm=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,im=em,zl=rm,Ps=function(){function e(){this.texArray=null,this.blend=0,this.type=He.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),As=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0},e}(),Cs=function(){function e(r){typeof r=="number"?this.rawBinaryData=new ArrayBuffer(r):r instanceof Uint8Array?this.rawBinaryData=r.buffer:this.rawBinaryData=r,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(r){return this[r+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},e}(),nm=function(e){Mt(r,e);function r(t){var i=e.call(this,t)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Yr.for2d(),i.size=yt.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),t.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return r.prototype.contextChange=function(){var t=this.renderer.gl;yt.PREFER_ENV===hr.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),yt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=F_(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var t=r._drawCallPool,i=r._textureArrayPool,n=this.size/4,a=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new Ps);for(;i.length<a;)i.push(new As);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},r.prototype.buildTexturesAndDrawCalls=function(){var t=this,i=t._bufferedTextures,n=t.MAX_TEXTURES,a=r._textureArrayPool,s=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,l=++$t._globalBatch,u=0,f=a[0],c=0;s.copyBoundTextures(o,n);for(var p=0;p<this._bufferSize;++p){var m=i[p];i[p]=null,m._batchEnabled!==l&&(f.count>=n&&(s.boundArray(f,o,l,n),this.buildDrawCalls(f,c,p),c=p,f=a[++u],++l),m._batchEnabled=l,m.touched=h,f.elements[f.count++]=m)}f.count>0&&(s.boundArray(f,o,l,n),this.buildDrawCalls(f,c,this._bufferSize),++u,++l);for(var p=0;p<o.length;p++)o[p]=null;$t._globalBatch=l},r.prototype.buildDrawCalls=function(t,i,n){var a=this,s=a._bufferedElements,o=a._attributeBuffer,h=a._indexBuffer,l=a.vertexSize,u=r._drawCallPool,f=this._dcIndex,c=this._aIndex,p=this._iIndex,m=u[f];m.start=this._iIndex,m.texArray=t;for(var _=i;_<n;++_){var v=s[_],y=v._texture.baseTexture,E=zh[y.alphaMode?1:0][v.blendMode];s[_]=null,i<_&&m.blend!==E&&(m.size=p-m.start,i=_,m=u[++f],m.texArray=t,m.start=p),this.packInterleavedGeometry(v,o,h,c,p),c+=v.vertexData.length/2*l,p+=v.indices.length,m.blend=E}i<n&&(m.size=p-m.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=p},r.prototype.bindAndClearTexArray=function(t){for(var i=this.renderer.texture,n=0;n<t.count;n++)i.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},r.prototype.updateGeometry=function(){var t=this,i=t._packedGeometries,n=t._attributeBuffer,a=t._indexBuffer;yt.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,a=i.state,s=r._drawCallPool,o=null,h=0;h<t;h++){var l=s[h],u=l.texArray,f=l.type,c=l.size,p=l.start,m=l.blend;o!==u&&(o=u,this.bindAndClearTexArray(u)),this.state.blendMode=m,a.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,p*2)}},r.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),yt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(t){var i=On(Math.ceil(t/8)),n=Kh(i),a=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._aBuffers[a];return s||(this._aBuffers[a]=s=new Cs(a*this.vertexSize*4)),s},r.prototype.getIndexBuffer=function(t){var i=On(Math.ceil(t/12)),n=Kh(i),a=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(a)),s},r.prototype.packInterleavedGeometry=function(t,i,n,a,s){for(var o=i.uint32View,h=i.float32View,l=a/this.vertexSize,u=t.uvs,f=t.indices,c=t.vertexData,p=t._texture.baseTexture._batchLocation,m=Math.min(t.worldAlpha,1),_=m<1&&t._texture.baseTexture.alphaMode?es(t._tintRGB,m):t._tintRGB+(m*255<<24),v=0;v<c.length;v+=2)h[a++]=c[v],h[a++]=c[v+1],h[a++]=u[v],h[a++]=u[v+1],o[a++]=_,h[a++]=p;for(var v=0;v<f.length;v++)n[s++]=l+f[v]},r._drawCallPool=[],r._textureArrayPool=[],r}(Vn),am=function(){function e(r,t){if(this.vertexSrc=r,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(r){if(!this.programCache[r]){for(var t=new Int32Array(r),i=0;i<r;i++)t[i]=i;this.defaultGroupCache[r]=jr.from({uSamplers:t},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+r),n=n.replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new qn(this.vertexSrc,n)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new fe,default:this.defaultGroupCache[r]};return new Vr(this.programCache[r],a)},e.prototype.generateSampleSrc=function(r){var t="";t+=`
`,t+=`
`;for(var i=0;i<r;i++)i>0&&(t+=`
else `),i<r-1&&(t+="if(vTextureId < "+i+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},e}(),ql=function(e){Mt(r,e);function r(t){t===void 0&&(t=!1);var i=e.call(this)||this;return i._buffer=new me(null,t,!1),i._indexBuffer=new me(null,t,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,qt.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,qt.FLOAT).addAttribute("aColor",i._buffer,4,!0,qt.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,qt.FLOAT).addIndex(i._indexBuffer),i}return r}(zi),$l=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Zl=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,sm=function(){function e(){}return e.create=function(r){var t=Object.assign({vertex:$l,fragment:Zl,geometryClass:ql,vertexSize:6},r),i=t.vertex,n=t.fragment,a=t.vertexSize,s=t.geometryClass;return function(o){Mt(h,o);function h(l){var u=o.call(this,l)||this;return u.shaderGenerator=new am(i,n),u.geometryClass=s,u.vertexSize=a,u}return h}(nm)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return $l},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return Zl},enumerable:!1,configurable:!0}),e}(),om=sm.create(),hm={},lm=function(e){Object.defineProperty(hm,e,{get:function(){return vi("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),cl[e]}})};for(var Rs in cl)lm(Rs);var um={},fm=function(e){Object.defineProperty(um,e,{get:function(){return vi("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),Wl[e]}})};for(var Rs in Wl)fm(Rs);var Ki=function(){function e(r){var t=this;this.stage=new ie,r=Object.assign({forceCanvas:!1},r),this.renderer=tm(r),e._plugins.forEach(function(i){i.init.call(t,r)})}return e.registerPlugin=function(r){e._plugins.push(r)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r,t){var i=this,n=e._plugins.slice(0);n.reverse(),n.forEach(function(a){a.destroy.call(i)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(r),this.renderer=null},e._plugins=[],e}(),cm=function(){function e(){}return e.init=function(r){var t=this;Object.defineProperty(this,"resizeTo",{set:function(i){self.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(!!t._resizeTo){t.cancelResize();var i,n;if(t._resizeTo===self)i=self.innerWidth,n=self.innerHeight;else{var a=t._resizeTo,s=a.clientWidth,o=a.clientHeight;i=s,n=o}t.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=r.resizeTo||null},e.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Ki.registerPlugin(cm);var Kl=new Gt,Jl=4,dm=function(){function e(r){this.renderer=r}return e.prototype.image=function(r,t,i){var n=new Image;return n.src=this.base64(r,t,i),n},e.prototype.base64=function(r,t,i){return this.canvas(r).toDataURL(t,i)},e.prototype.canvas=function(r){var t=this.renderer,i,n,a=!1,s,o=!1;r&&(r instanceof Hr?s=r:(s=this.renderer.generateTexture(r),o=!0)),s?(i=s.baseTexture.resolution,n=s.frame,a=!1,t.renderTexture.bind(s)):(i=this.renderer.resolution,a=!0,n=Kl,n.width=this.renderer.width,n.height=this.renderer.height,t.renderTexture.bind(null));var h=Math.floor(n.width*i+1e-4),l=Math.floor(n.height*i+1e-4),u=new tl(h,l,1),f=new Uint8Array(Jl*h*l),c=t.gl;c.readPixels(n.x*i,n.y*i,h,l,c.RGBA,c.UNSIGNED_BYTE,f);var p=u.context.getImageData(0,0,h,l);if(e.arrayPostDivide(f,p.data),u.context.putImageData(p,0,0),a){var m=new tl(u.width,u.height,1);m.context.scale(1,-1),m.context.drawImage(u.canvas,0,-l),u.destroy(),u=m}return o&&s.destroy(!0),u.canvas},e.prototype.pixels=function(r){var t=this.renderer,i,n,a,s=!1;r&&(r instanceof Hr?a=r:(a=this.renderer.generateTexture(r),s=!0)),a?(i=a.baseTexture.resolution,n=a.frame,t.renderTexture.bind(a)):(i=t.resolution,n=Kl,n.width=t.width,n.height=t.height,t.renderTexture.bind(null));var o=n.width*i,h=n.height*i,l=new Uint8Array(Jl*o*h),u=t.gl;return u.readPixels(n.x*i,n.y*i,o,h,u.RGBA,u.UNSIGNED_BYTE,l),s&&a.destroy(!0),e.arrayPostDivide(l,l),l},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(r,t){for(var i=0;i<r.length;i+=4){var n=t[i+3]=r[i+3];n!==0?(t[i]=Math.round(Math.min(r[i]*255/n,255)),t[i+1]=Math.round(Math.min(r[i+1]*255/n,255)),t[i+2]=Math.round(Math.min(r[i+2]*255/n,255))):(t[i]=r[i],t[i+1]=r[i+1],t[i+2]=r[i+2])}},e}();function pm(e,r){if(!!e){r=r||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=t.parser[r.strictMode?"strict":"loose"].exec(e),n={},a=14;a--;)n[t.key[a]]=i[a]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(s,o,h){o&&(n[t.q.name][o]=h)}),n}}var Ql=pm,Ji=class{constructor(r,t=!1,i){this._fn=r,this._once=t,this._thisArg=i,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}};function tu(e,r){return e._head?(e._tail._next=r,r._prev=e._tail,e._tail=r):(e._head=r,e._tail=r),r._owner=e,r}var tr=class{constructor(){this._head=this._tail=void 0}handlers(r=!1){let t=this._head;if(r)return!!t;let i=[];for(;t;)i.push(t),t=t._next;return i}has(r){if(!(r instanceof Ji))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return r._owner===this}dispatch(){let r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,arguments),r=r._next;return!0}add(r,t=null){if(typeof r!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return tu(this,new Ji(r,!1,t))}once(r,t=null){if(typeof r!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return tu(this,new Ji(r,!0,t))}detach(r){if(!(r instanceof Ji))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return r._owner!==this?this:(r._prev&&(r._prev._next=r._next),r._next&&(r._next._prev=r._prev),r===this._head?(this._head=r._next,r._next===null&&(this._tail=null)):r===this._tail&&(this._tail=r._prev,this._tail._next=null),r._owner=null,this)}detachAll(){let r=this._head;if(!r)return this;for(this._head=this._tail=null;r;)r._owner=null,r=r._next;return this}};function zr(){}function eu(e,r,t,i){var n=0,a=e.length;(function s(o){if(o||n===a){t&&t(o);return}i?setTimeout(function(){r(e[n++],s)},1):r(e[n++],s)})()}function vm(e){return function(){if(e===null)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function _m(e,r){if(r==null)r=1;else if(r===0)throw new Error("Concurrency must not be zero");var t=0,i={_tasks:[],concurrency:r,saturated:zr,unsaturated:zr,buffer:r/4,empty:zr,drain:zr,error:zr,started:!1,paused:!1,push:function(o,h){n(o,!1,h)},kill:function(){t=0,i.drain=zr,i.started=!1,i._tasks=[]},unshift:function(o,h){n(o,!0,h)},process:function(){for(;!i.paused&&t<i.concurrency&&i._tasks.length;){var o=i._tasks.shift();i._tasks.length===0&&i.empty(),t+=1,t===i.concurrency&&i.saturated(),e(o.data,vm(a(o)))}},length:function(){return i._tasks.length},running:function(){return t},idle:function(){return i._tasks.length+t===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var o=1;o<=i.concurrency;o++)i.process()}}};function n(s,o,h){if(h!=null&&typeof h!="function")throw new Error("task callback must be a function");if(i.started=!0,s==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var l={data:s,callback:typeof h=="function"?h:zr};o?i._tasks.unshift(l):i._tasks.push(l),setTimeout(function(){return i.process()},1)}function a(s){return function(){t-=1,s.callback.apply(s,arguments),arguments[0]!=null&&i.error(arguments[0],s.data),t<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}var Os={};function mm(e,r){var t=this;Os[e.url]?(e.data=Os[e.url],e.complete()):e.onComplete.once(function(){return Os[t.url]=t.data}),r()}function ru(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function iu(e,r,t){return r&&ru(e.prototype,r),t&&ru(e,t),e}var gm=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),$n=null,ym=0,nu=200,xm=204,bm=1223,wm=2;function Tm(){}var gt=function(){e.setExtensionLoadType=function(i,n){au(e._loadTypeMap,i,n)},e.setExtensionXhrType=function(i,n){au(e._xhrTypeMap,i,n)};function e(t,i,n){if(typeof t!="string"||typeof i!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,i.indexOf("data:")===0),this.name=t,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Tm,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new tr,this.onProgress=new tr,this.onComplete=new tr,this.onAfterMiddleware=new tr}var r=e.prototype;return r.complete=function(){this._clearEvents(),this._finish()},r.abort=function(i){if(!this.error){if(this.error=new Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.load=function(i){var n=this;if(!this.isLoading){if(this.isComplete){i&&setTimeout(function(){return i(n)},1);return}else i&&this.onComplete.once(i);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:gm&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},r._hasFlag=function(i){return(this._flags&i)!=0},r._setFlag=function(i,n){this._flags=n?this._flags|i:this._flags&~i},r._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r._loadElement=function(i){this.metadata.loadElement?this.data=this.metadata.loadElement:i==="image"&&typeof window.Image!="undefined"?this.data=new Image:this.data=document.createElement(i),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r._loadSourceElement=function(i){if(this.metadata.loadElement?this.data=this.metadata.loadElement:i==="audio"&&typeof window.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(i),this.data===null){this.abort("Unsupported element: "+i);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,a=0;a<this.url.length;++a)this.data.appendChild(this._createSource(i,this.url[a],Array.isArray(n)?n[a]:n));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(i,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=e.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},r._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XDomainRequest;i.timeout=this.timeout||5e3,i.onerror=this._boundXhrOnError,i.ontimeout=this._boundXhrOnTimeout,i.onprogress=this._boundOnProgress,i.onload=this._boundXhrOnLoad,i.open("GET",this.url,!0),setTimeout(function(){return i.send()},1)},r._createSource=function(i,n,a){a||(a=i+"/"+this._getExtension(n));var s=document.createElement("source");return s.src=n,s.type=a,s},r._onError=function(i){this.abort("Failed to load element using: "+i.target.nodeName)},r._onProgress=function(i){i&&i.lengthComputable&&this.onProgress.dispatch(this,i.loaded/i.total)},r._onTimeout=function(){this.abort("Load timed out.")},r._xhrOnError=function(){var i=this.xhr;this.abort(Us(i)+" Request failed. Status: "+i.status+', text: "'+i.statusText+'"')},r._xhrOnTimeout=function(){var i=this.xhr;this.abort(Us(i)+" Request timed out.")},r._xhrOnAbort=function(){var i=this.xhr;this.abort(Us(i)+" Request was aborted by the user.")},r._xhrOnLoad=function(){var i=this.xhr,n="",a=typeof i.status=="undefined"?nu:i.status;(i.responseType===""||i.responseType==="text"||typeof i.responseType=="undefined")&&(n=i.responseText),a===ym&&(n.length>0||i.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?a=nu:a===bm&&(a=xm);var s=a/100|0;if(s===wm)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=e.TYPE.JSON}catch(l){this.abort("Error trying to parse loaded json: "+l);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(n,"text/xml")}else{var h=document.createElement("div");h.innerHTML=n,this.data=h}this.type=e.TYPE.XML}catch(l){this.abort("Error trying to parse loaded xml: "+l);return}else this.data=i.response||n;else{this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL);return}this.complete()},r._determineCrossOrigin=function(i,n){if(i.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,$n||($n=document.createElement("a")),$n.href=i,i=Ql($n.href,{strictMode:!0});var a=!i.port&&n.port===""||i.port===n.port,s=i.protocol?i.protocol+":":"";return i.host!==n.hostname||!a||s!==n.protocol?"anonymous":""},r._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},r._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},r._getExtension=function(){var i=this.url,n="";if(this.isDataUrl){var a=i.indexOf("/");n=i.substring(a+1,i.indexOf(";",a))}else{var s=i.indexOf("?"),o=i.indexOf("#"),h=Math.min(s>-1?s:i.length,o>-1?o:i.length);i=i.substring(0,h),n=i.substring(i.lastIndexOf(".")+1)}return n.toLowerCase()},r._getMimeFromXhrType=function(i){switch(i){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},iu(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();gt.STATUS_FLAGS={NONE:0,DATA_URL:1<<0,COMPLETE:1<<1,LOADING:1<<2};gt.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};gt.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};gt.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};gt._loadTypeMap={gif:gt.LOAD_TYPE.IMAGE,png:gt.LOAD_TYPE.IMAGE,bmp:gt.LOAD_TYPE.IMAGE,jpg:gt.LOAD_TYPE.IMAGE,jpeg:gt.LOAD_TYPE.IMAGE,tif:gt.LOAD_TYPE.IMAGE,tiff:gt.LOAD_TYPE.IMAGE,webp:gt.LOAD_TYPE.IMAGE,tga:gt.LOAD_TYPE.IMAGE,svg:gt.LOAD_TYPE.IMAGE,"svg+xml":gt.LOAD_TYPE.IMAGE,mp3:gt.LOAD_TYPE.AUDIO,ogg:gt.LOAD_TYPE.AUDIO,wav:gt.LOAD_TYPE.AUDIO,mp4:gt.LOAD_TYPE.VIDEO,webm:gt.LOAD_TYPE.VIDEO};gt._xhrTypeMap={xhtml:gt.XHR_RESPONSE_TYPE.DOCUMENT,html:gt.XHR_RESPONSE_TYPE.DOCUMENT,htm:gt.XHR_RESPONSE_TYPE.DOCUMENT,xml:gt.XHR_RESPONSE_TYPE.DOCUMENT,tmx:gt.XHR_RESPONSE_TYPE.DOCUMENT,svg:gt.XHR_RESPONSE_TYPE.DOCUMENT,tsx:gt.XHR_RESPONSE_TYPE.DOCUMENT,gif:gt.XHR_RESPONSE_TYPE.BLOB,png:gt.XHR_RESPONSE_TYPE.BLOB,bmp:gt.XHR_RESPONSE_TYPE.BLOB,jpg:gt.XHR_RESPONSE_TYPE.BLOB,jpeg:gt.XHR_RESPONSE_TYPE.BLOB,tif:gt.XHR_RESPONSE_TYPE.BLOB,tiff:gt.XHR_RESPONSE_TYPE.BLOB,webp:gt.XHR_RESPONSE_TYPE.BLOB,tga:gt.XHR_RESPONSE_TYPE.BLOB,json:gt.XHR_RESPONSE_TYPE.JSON,text:gt.XHR_RESPONSE_TYPE.TEXT,txt:gt.XHR_RESPONSE_TYPE.TEXT,ttf:gt.XHR_RESPONSE_TYPE.BUFFER,otf:gt.XHR_RESPONSE_TYPE.BUFFER};gt.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function au(e,r,t){r&&r.indexOf(".")===0&&(r=r.substring(1)),!!r&&(e[r]=t)}function Us(e){return e.toString().replace("object ","")}var Em="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Sm(e){for(var r="",t=0;t<e.length;){for(var i=[0,0,0],n=[0,0,0,0],a=0;a<i.length;++a)t<e.length?i[a]=e.charCodeAt(t++)&255:i[a]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var s=t-(e.length-1);switch(s){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var o=0;o<n.length;++o)r+=Em.charAt(n[o])}return r}var su=window.URL||window.webkitURL;function Im(e,r){if(!e.data){r();return}if(e.xhr&&e.xhrType===gt.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof e.data=="string"){var t=e.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){e.data=new Image,e.data.src="data:"+t+";base64,"+Sm(e.xhr.responseText),e.type=gt.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,r()};return}}else if(e.data.type.indexOf("image")===0){var i=su.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=gt.TYPE.IMAGE,e.data.onload=function(){su.revokeObjectURL(i),e.data.onload=null,r()};return}}r()}var Pm={caching:mm,parsing:Im},ks=100,Am=/(#[\w-]+)?$/,vr=function(){function e(t,i){var n=this;t===void 0&&(t=""),i===void 0&&(i=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(o,h){return n._loadResource(o,h)},this._queue=_m(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new tr,this.onError=new tr,this.onLoad=new tr,this.onStart=new tr,this.onComplete=new tr;for(var a=0;a<e._defaultBeforeMiddleware.length;++a)this.pre(e._defaultBeforeMiddleware[a]);for(var s=0;s<e._defaultAfterMiddleware.length;++s)this.use(e._defaultAfterMiddleware[s])}var r=e.prototype;return r.add=function(i,n,a,s){if(Array.isArray(i)){for(var o=0;o<i.length;++o)this.add(i[o]);return this}if(typeof i=="object"&&(s=n||i.callback||i.onComplete,a=i,n=i.url,i=i.name||i.key||i.url),typeof n!="string"&&(s=a,a=n,n=i),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof a=="function"&&(s=a,a=null),this.loading&&(!a||!a.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error('Resource named "'+i+'" already exists.');if(n=this._prepareUrl(n),this.resources[i]=new gt(i,n,a),typeof s=="function"&&this.resources[i].onAfterMiddleware.once(s),this.loading){for(var h=a.parentResource,l=[],u=0;u<h.children.length;++u)h.children[u].isComplete||l.push(h.children[u]);var f=h.progressChunk*(l.length+1),c=f/(l.length+2);h.children.push(this.resources[i]),h.progressChunk=c;for(var p=0;p<l.length;++p)l[p].progressChunk=c;this.resources[i].progressChunk=c}return this._queue.push(this.resources[i]),this},r.pre=function(i){return this._beforeMiddleware.push(i),this},r.use=function(i){return this._afterMiddleware.push(i),this},r.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var i in this.resources){var n=this.resources[i];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},r.load=function(i){if(typeof i=="function"&&this.onComplete.once(i),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,a=ks/n,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=a;this._onStart(),this._queue.resume()}return this},r._prepareUrl=function(i){var n=Ql(i,{strictMode:!0}),a;if(n.protocol||!n.path||i.indexOf("//")===0?a=i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&i.charAt(0)!=="/"?a=this.baseUrl+"/"+i:a=this.baseUrl+i,this.defaultQueryString){var s=Am.exec(a)[0];a=a.substr(0,a.length-s.length),a.indexOf("?")!==-1?a+="&"+this.defaultQueryString:a+="?"+this.defaultQueryString,a+=s}return a},r._loadResource=function(i,n){var a=this;i._dequeue=n,eu(this._beforeMiddleware,function(s,o){s.call(a,i,function(){o(i.isComplete?{}:null)})},function(){i.isComplete?a._onLoad(i):(i._onLoadBinding=i.onComplete.once(a._onLoad,a),i.load())},!0)},r._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r._onComplete=function(){this.progress=ks,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r._onLoad=function(i){var n=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),eu(this._afterMiddleware,function(a,s){a.call(n,i,s)},function(){i.onAfterMiddleware.dispatch(i),n.progress=Math.min(ks,n.progress+i.progressChunk),n.onProgress.dispatch(n,i),i.error?n.onError.dispatch(i.error,n,i):n.onLoad.dispatch(n,i),n._resourcesParsing.splice(n._resourcesParsing.indexOf(i),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},iu(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(i){this._queue.concurrency=i}}]),e}();vr._defaultBeforeMiddleware=[];vr._defaultAfterMiddleware=[];vr.pre=function(r){return vr._defaultBeforeMiddleware.push(r),vr};vr.use=function(r){return vr._defaultAfterMiddleware.push(r),vr};var Fs=function(e,r){return Fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Fs(e,r)};function Cm(e,r){Fs(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Rm=function(){function e(){}return e.add=function(){gt.setExtensionLoadType("svg",gt.LOAD_TYPE.XHR),gt.setExtensionXhrType("svg",gt.XHR_RESPONSE_TYPE.TEXT)},e.use=function(r,t){if(r.data&&(r.type===gt.TYPE.IMAGE||r.extension==="svg")){var i=r.data,n=r.url,a=r.name,s=r.metadata;Et.fromLoader(i,n,a,s).then(function(o){r.texture=o,t()}).catch(t)}else t()},e}(),_r=function(e){Cm(r,e);function r(t,i){for(var n=e.call(this,t,i)||this,a=0;a<r._plugins.length;++a){var s=r._plugins[a],o=s.pre,h=s.use;o&&n.pre(o),h&&n.use(h)}return n._protected=!1,n}return r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var t=r._shared;return t||(t=new r,t._protected=!0,r._shared=t),t},enumerable:!1,configurable:!0}),r.registerPlugin=function(t){return r._plugins.push(t),t.add&&t.add(),r},r._plugins=[],r}(vr);_r.registerPlugin({use:Pm.parsing});_r.registerPlugin(Rm);var Om=function(){function e(){}return e.init=function(r){r=Object.assign({sharedLoader:!1},r),this.loader=r.sharedLoader?_r.shared:new _r},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),je=gt;var Yt,Ft;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(Ft||(Ft={}));var Zn=(Yt={},Yt[Ft.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Yt[Ft.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Yt[Ft.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Yt[Ft.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Yt[Ft.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Yt[Ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Yt[Ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Yt[Ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Yt[Ft.COMPRESSED_R11_EAC]=.5,Yt[Ft.COMPRESSED_SIGNED_R11_EAC]=.5,Yt[Ft.COMPRESSED_RG11_EAC]=1,Yt[Ft.COMPRESSED_SIGNED_RG11_EAC]=1,Yt[Ft.COMPRESSED_RGB8_ETC2]=.5,Yt[Ft.COMPRESSED_RGBA8_ETC2_EAC]=1,Yt[Ft.COMPRESSED_SRGB8_ETC2]=.5,Yt[Ft.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Yt[Ft.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Yt[Ft.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Yt[Ft.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Yt[Ft.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Yt[Ft.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Yt[Ft.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Yt[Ft.COMPRESSED_RGB_ETC1_WEBGL]=.5,Yt[Ft.COMPRESSED_RGB_ATC_WEBGL]=.5,Yt[Ft.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Yt[Ft.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Yt);var Ms=function(e,r){return Ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Ms(e,r)};function ou(e,r){Ms(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}function Um(e,r,t,i){return new(t||(t=Promise))(function(n,a){function s(l){try{h(i.next(l))}catch(u){a(u)}}function o(l){try{h(i.throw(l))}catch(u){a(u)}}function h(l){l.done?n(l.value):new t(function(u){u(l.value)}).then(s,o)}h((i=i.apply(e,r||[])).next())})}function km(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return h([l,u])}}function h(l){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(a=l[0]&2?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,n=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=r.call(e,t)}catch(u){l=[6,u],n=0}finally{i=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Fm=function(e){ou(r,e);function r(t,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var n=this,a,s;return typeof t=="string"?(a=t,s=new Uint8Array):(a=null,s=t),n=e.call(this,s,i)||this,n.origin=a,n.buffer=s?new Cs(s):null,n.origin&&i.autoLoad!==!1&&n.load(),s&&s.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return r.prototype.onBlobLoaded=function(t){},r.prototype.load=function(){return Um(this,void 0,Promise,function(){var t,i,n;return km(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return t=a.sent(),[4,t.blob()];case 2:return i=a.sent(),[4,i.arrayBuffer()];case 3:return n=a.sent(),this.data=new Uint32Array(n),this.buffer=new Cs(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},r}(Wi),Ls=function(e){ou(r,e);function r(t,i){var n=e.call(this,t,i)||this;return n.format=i.format,n.levels=i.levels||1,n._width=i.width,n._height=i.height,n._extension=r._formatToExtension(n.format),(i.levelBuffers||n.buffer)&&(n._levelBuffers=i.levelBuffers||r._createLevelBuffers(t instanceof Uint8Array?t:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return r.prototype.upload=function(t,i,n){var a=t.gl,s=t.context.extensions[this._extension];if(!s)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var o=0,h=this.levels;o<h;o++){var l=this._levelBuffers[o],u=l.levelID,f=l.levelWidth,c=l.levelHeight,p=l.levelBuffer;a.compressedTexImage2D(a.TEXTURE_2D,u,this.format,f,c,0,p)}return!0},r.prototype.onBlobLoaded=function(){this._levelBuffers=r._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},r._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},r._createLevelBuffers=function(t,i,n,a,s,o,h){for(var l=new Array(n),u=t.byteOffset,f=o,c=h,p=f+a-1&~(a-1),m=c+s-1&~(s-1),_=p*m*Zn[i],v=0;v<n;v++)l[v]={levelID:v,levelWidth:n>1?f:p,levelHeight:n>1?c:m,levelBuffer:new Uint8Array(t.buffer,u,_)},u+=_,f=f>>1||1,c=c>>1||1,p=f+a-1&~(a-1),m=c+s-1&~(s-1),_=p*m*Zn[i];return l},r}(Fm),Mm=function(){function e(){}return e.use=function(r,t){var i=r.data,n=this;if(r.type===je.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var a=i.textures,s=void 0,o=void 0,h=0,l=a.length;h<l;h++){var u=a[h],f=u.src,c=u.format;if(c||(o=f),e.textureFormats[c]){s=f;break}}if(s=s||o,!s){t(new Error("Cannot load compressed-textures in "+r.url+", make sure you provide a fallback"));return}if(s===r.url){t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var p={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},m=ui.resolve(r.url.replace(n.baseUrl,""),s),_=i.cacheID;n.add(_,m,p,function(v){if(v.error){t(v.error);return}var y=v.texture,E=y===void 0?null:y,T=v.textures,M=T===void 0?{}:T;Object.assign(r,{texture:E,textures:M}),t()})}else t()},e.add=function(){var r=document.createElement("canvas"),t=r.getContext("webgl");if(!t){console.error("WebGL not available for compressed textures. Silently failing.");return}var i={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};e.textureExtensions=i,e.textureFormats={};for(var n in i){var a=i[n];!a||Object.assign(e.textureFormats,Object.getPrototypeOf(a))}},e}();function hu(e,r,t){var i={textures:{},texture:null};if(!r)return i;var n=r.map(function(a){return new Et(new $t(a,Object.assign({mipmap:Sr.OFF,alphaMode:fr.NO_PREMULTIPLIED_ALPHA},t)))});return n.forEach(function(a,s){var o=a.baseTexture,h=e+"-"+(s+1);$t.addToCache(o,h),Et.addToCache(a,h),s===0&&($t.addToCache(o,e),Et.addToCache(a,e),i.texture=a),i.textures[h]=a}),i}var Qi,Ve;je.setExtensionXhrType("dds",je.XHR_RESPONSE_TYPE.BUFFER);var Ns=4,Kn=124,Lm=32,lu=20,Nm=542327876,Jn={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Dm={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Qn={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Ye;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ye||(Ye={}));var Ds;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Ds||(Ds={}));var Bm=1,Gm=2,Xm=4,Hm=64,jm=512,Vm=131072,Ym=827611204,Wm=861165636,zm=894720068,qm=808540228,$m=4,Zm=(Qi={},Qi[Ym]=Ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,Qi[Wm]=Ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,Qi[zm]=Ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,Qi),Km=(Ve={},Ve[Ye.DXGI_FORMAT_BC1_TYPELESS]=Ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ve[Ye.DXGI_FORMAT_BC1_UNORM]=Ft.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ve[Ye.DXGI_FORMAT_BC2_TYPELESS]=Ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ve[Ye.DXGI_FORMAT_BC2_UNORM]=Ft.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ve[Ye.DXGI_FORMAT_BC3_TYPELESS]=Ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ve[Ye.DXGI_FORMAT_BC3_UNORM]=Ft.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ve[Ye.DXGI_FORMAT_BC1_UNORM_SRGB]=Ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Ve[Ye.DXGI_FORMAT_BC2_UNORM_SRGB]=Ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Ve[Ye.DXGI_FORMAT_BC3_UNORM_SRGB]=Ft.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Ve),Jm=function(){function e(){}return e.use=function(r,t){if(r.extension==="dds"&&r.data)try{Object.assign(r,hu(r.name||r.url,e.parse(r.data),r.metadata))}catch(i){t(i);return}t()},e.parse=function(r){var t=new Uint32Array(r),i=t[0];if(i!==Nm)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(r,0,Kn/Uint32Array.BYTES_PER_ELEMENT),a=n[Jn.HEIGHT],s=n[Jn.WIDTH],o=n[Jn.MIPMAP_COUNT],h=new Uint32Array(r,Jn.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Lm/Uint32Array.BYTES_PER_ELEMENT),l=h[Bm];if(l&Xm){var u=h[Dm.FOURCC];if(u!==qm){var f=Zm[u],c=Ns+Kn,p=new Uint8Array(r,c),m=new Ls(p,{format:f,width:s,height:a,levels:o});return[m]}var _=Ns+Kn,v=new Uint32Array(t.buffer,_,lu/Uint32Array.BYTES_PER_ELEMENT),y=v[Qn.DXGI_FORMAT],E=v[Qn.RESOURCE_DIMENSION],T=v[Qn.MISC_FLAG],M=v[Qn.ARRAY_SIZE],b=Km[y];if(b===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+y);if(T===$m)throw new Error("DDSLoader does not support cubemap textures");if(E===Ds.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var S=new Array,U=Ns+Kn+lu;if(M===1)S.push(new Uint8Array(r,U));else{for(var D=Zn[b],F=0,N=s,X=a,$=0;$<o;$++){var Z=Math.max(1,N+3&~3),ut=Math.max(1,X+3&~3),W=Z*ut*D;F+=W,N=N>>>1,X=X>>>1}for(var Y=U,$=0;$<M;$++)S.push(new Uint8Array(r,Y,F)),Y+=F}return S.map(function(at){return new Ls(at,{format:b,width:s,height:a,levels:o})})}throw l&Hm?new Error("DDSLoader does not support uncompressed texture data."):l&jm?new Error("DDSLoader does not supported YUV uncompressed texture data."):l&Vm?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):l&Gm?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}(),gi,qr,tn;je.setExtensionXhrType("ktx",je.XHR_RESPONSE_TYPE.BUFFER);var uu=[171,75,84,88,32,49,49,187,13,10,26,10],Qm=67305985,We={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},tg=64,fu=(gi={},gi[qt.UNSIGNED_BYTE]=1,gi[qt.UNSIGNED_SHORT]=2,gi[qt.FLOAT]=4,gi[qt.HALF_FLOAT]=8,gi),eg=(qr={},qr[Je.RGBA]=4,qr[Je.RGB]=3,qr[Je.LUMINANCE]=1,qr[Je.LUMINANCE_ALPHA]=2,qr[Je.ALPHA]=1,qr),rg=(tn={},tn[qt.UNSIGNED_SHORT_4_4_4_4]=2,tn[qt.UNSIGNED_SHORT_5_5_5_1]=2,tn[qt.UNSIGNED_SHORT_5_6_5]=2,tn),ig=function(){function e(){}return e.use=function(r,t){if(r.extension==="ktx"&&r.data)try{var i=r.name||r.url;Object.assign(r,hu(i,e.parse(i,r.data),r.metadata))}catch(n){t(n);return}t()},e.parse=function(r,t){var i=new DataView(t);if(!e.validate(r,i))return null;var n=i.getUint32(We.ENDIANNESS,!0)===Qm,a=i.getUint32(We.GL_TYPE,n),s=i.getUint32(We.GL_FORMAT,n),o=i.getUint32(We.GL_INTERNAL_FORMAT,n),h=i.getUint32(We.PIXEL_WIDTH,n),l=i.getUint32(We.PIXEL_HEIGHT,n)||1,u=i.getUint32(We.PIXEL_DEPTH,n)||1,f=i.getUint32(We.NUMBER_OF_ARRAY_ELEMENTS,n)||1,c=i.getUint32(We.NUMBER_OF_FACES,n),p=i.getUint32(We.NUMBER_OF_MIPMAP_LEVELS,n),m=i.getUint32(We.BYTES_OF_KEY_VALUE_DATA,n);if(l===0||u!==1)throw new Error("Only 2D textures are supported");if(c!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var _=4,v=4,y=h+3&~3,E=l+3&~3,T=new Array(f),M=h*l;a===0&&(M=y*E);var b;if(a!==0?fu[a]?b=fu[a]*eg[s]:b=rg[a]:b=Zn[o],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var S=M*b,U=S,D=h,F=l,N=y,X=E,$=tg+m,Z=0;Z<p;Z++){for(var ut=i.getUint32($,n),W=$+4,Y=0;Y<f;Y++){var at=T[Y];at||(at=T[Y]=new Array(p)),at[Z]={levelID:Z,levelWidth:p>1?D:N,levelHeight:p>1?F:X,levelBuffer:new Uint8Array(t,W,U)},W+=U}$+=ut+4,$=$%4!=0?$+4-$%4:$,D=D>>1||1,F=F>>1||1,N=D+_-1&~(_-1),X=F+v-1&~(v-1),U=N*X*b}if(a!==0)throw new Error("TODO: Uncompressed");return T.map(function(mt){return new Ls(null,{format:o,width:h,height:l,levels:p,levelBuffers:mt})})},e.validate=function(r,t){for(var i=0;i<uu.length;i++)if(t.getUint8(i)!==uu[i])return console.error(r+" is not a valid *.ktx file!"),!1;return!0},e}();var Bs=function(e,r){return Bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Bs(e,r)};function cu(e,r){Bs(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var hx=function(e){cu(r,e);function r(t,i,n,a){t===void 0&&(t=1500),n===void 0&&(n=16384),a===void 0&&(a=!1);var s=e.call(this)||this,o=16384;return n>o&&(n=o),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=wt.NORMAL,s.autoResize=a,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return r.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,fi(t,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(t){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.onChildrenChange=function(t){for(var i=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r}(ie),du=function(){function e(r,t,i){this.geometry=new zi,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<r.length;++n){var a=r[n];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||qt.FLOAT,offset:a.offset},t[n]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var r=this.geometry,t=0;this.indexBuffer=new me(Bv(this.size),!0,!0),r.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new me(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=s,s+=n.size,this.staticStride+=n.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new me(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];r.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===qt.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];r.addAttribute(n.attributeName,this.staticBuffer,0,n.type===qt.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},e.prototype.uploadDynamic=function(r,t,i){for(var n=0;n<this.dynamicProperties.length;n++){var a=this.dynamicProperties[n];a.uploadFunction(r,t,i,a.type===qt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(r,t,i){for(var n=0;n<this.staticProperties.length;n++){var a=this.staticProperties[n];a.uploadFunction(r,t,i,a.type===qt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),ng=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,ag=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,sg=function(e){cu(r,e);function r(t){var i=e.call(this,t)||this;return i.shader=null,i.properties=null,i.tempMatrix=new fe,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:qt.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=Vr.from(ag,ng,{}),i.state=Yr.for2d(),i}return r.prototype.render=function(t){var i=t.children,n=t._maxSize,a=t._batchSize,s=this.renderer,o=i.length;if(o!==0){o>n&&!t.autoResize&&(o=n);var h=t._buffers;h||(h=t._buffers=this.generateBuffers(t));var l=i[0]._texture.baseTexture;this.state.blendMode=qh(t.blendMode,l.alphaMode),s.state.set(this.state);var u=s.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=Dv(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,l.alphaMode),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var c=!1,p=0,m=0;p<o;p+=a,m+=1){var _=o-p;_>a&&(_=a),m>=h.length&&h.push(this._generateOneMoreBuffer(t));var v=h[m];v.uploadDynamic(i,p,_);var y=t._bufferUpdateIDs[m]||0;c=c||v._updateID<y,c&&(v._updateID=t._updateID,v.uploadStatic(i,p,_)),s.geometry.bind(v.geometry),u.drawElements(u.TRIANGLES,_*6,u.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(t){for(var i=[],n=t._maxSize,a=t._batchSize,s=t._properties,o=0;o<n;o+=a)i.push(new du(this.properties,s,a));return i},r.prototype._generateOneMoreBuffer=function(t){var i=t._batchSize,n=t._properties;return new du(this.properties,n,i)},r.prototype.uploadVertices=function(t,i,n,a,s,o){for(var h=0,l=0,u=0,f=0,c=0;c<n;++c){var p=t[i+c],m=p._texture,_=p.scale.x,v=p.scale.y,y=m.trim,E=m.orig;y?(l=y.x-p.anchor.x*E.width,h=l+y.width,f=y.y-p.anchor.y*E.height,u=f+y.height):(h=E.width*(1-p.anchor.x),l=E.width*-p.anchor.x,u=E.height*(1-p.anchor.y),f=E.height*-p.anchor.y),a[o]=l*_,a[o+1]=f*v,a[o+s]=h*_,a[o+s+1]=f*v,a[o+s*2]=h*_,a[o+s*2+1]=u*v,a[o+s*3]=l*_,a[o+s*3+1]=u*v,o+=s*4}},r.prototype.uploadPosition=function(t,i,n,a,s,o){for(var h=0;h<n;h++){var l=t[i+h].position;a[o]=l.x,a[o+1]=l.y,a[o+s]=l.x,a[o+s+1]=l.y,a[o+s*2]=l.x,a[o+s*2+1]=l.y,a[o+s*3]=l.x,a[o+s*3+1]=l.y,o+=s*4}},r.prototype.uploadRotation=function(t,i,n,a,s,o){for(var h=0;h<n;h++){var l=t[i+h].rotation;a[o]=l,a[o+s]=l,a[o+s*2]=l,a[o+s*3]=l,o+=s*4}},r.prototype.uploadUvs=function(t,i,n,a,s,o){for(var h=0;h<n;++h){var l=t[i+h]._texture._uvs;l?(a[o]=l.x0,a[o+1]=l.y0,a[o+s]=l.x1,a[o+s+1]=l.y1,a[o+s*2]=l.x2,a[o+s*2+1]=l.y2,a[o+s*3]=l.x3,a[o+s*3+1]=l.y3,o+=s*4):(a[o]=0,a[o+1]=0,a[o+s]=0,a[o+s+1]=0,a[o+s*2]=0,a[o+s*2+1]=0,a[o+s*3]=0,a[o+s*3+1]=0,o+=s*4)}},r.prototype.uploadTint=function(t,i,n,a,s,o){for(var h=0;h<n;++h){var l=t[i+h],u=l._texture.baseTexture.alphaMode>0,f=l.alpha,c=f<1&&u?es(l._tintRGB,f):l._tintRGB+(f*255<<24);a[o]=c,a[o+s]=c,a[o+s*2]=c,a[o+s*3]=c,o+=s*4}},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r}(Vn);var Cr;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(Cr||(Cr={}));var Rr;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(Rr||(Rr={}));var en={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,r){if(r===void 0&&(r=20),!this.adaptive||!e||isNaN(e))return r;var t=Math.ceil(e/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},pu=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Et.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Et.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();var Gs=function(e,r){return Gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Gs(e,r)};function Xs(e,r){Gs(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var vu={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,r){var t=e.points,i=e.holes,n=r.points,a=r.indices;if(t.length>=6){for(var s=[],o=0;o<i.length;o++){var h=i[o];s.push(t.length/2),t=t.concat(h.points)}var l=Ga(t,s,2);if(!l)return;for(var u=n.length/2,o=0;o<l.length;o+=3)a.push(l[o]+u),a.push(l[o+1]+u),a.push(l[o+2]+u);for(var o=0;o<t.length;o++)n.push(t[o])}}},_u={build:function(e){var r=e.shape,t=e.points,i=r.x,n=r.y,a,s;if(t.length=0,e.type===oe.CIRC)a=r.radius,s=r.radius;else{var o=e.shape;a=o.width,s=o.height}if(!(a===0||s===0)){var h=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(a+s));h/=2.3;for(var l=Math.PI*2/h,u=0;u<h-.5;u++)t.push(i+Math.sin(-l*u)*a,n+Math.cos(-l*u)*s);t.push(t[0],t[1])}},triangulate:function(e,r){var t=e.points,i=r.points,n=r.indices,a=i.length/2,s=a,o=e.shape,h=e.matrix,l=o.x,u=o.y;i.push(e.matrix?h.a*l+h.c*u+h.tx:l,e.matrix?h.b*l+h.d*u+h.ty:u);for(var f=0;f<t.length;f+=2)i.push(t[f],t[f+1]),n.push(a++,s,a)}},og={build:function(e){var r=e.shape,t=r.x,i=r.y,n=r.width,a=r.height,s=e.points;s.length=0,s.push(t,i,t+n,i,t+n,i+a,t,i+a)},triangulate:function(e,r){var t=e.points,i=r.points,n=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),r.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function yi(e,r,t){var i=r-e;return e+i*t}function ta(e,r,t,i,n,a,s){s===void 0&&(s=[]);for(var o=20,h=s,l=0,u=0,f=0,c=0,p=0,m=0,_=0,v=0;_<=o;++_)v=_/o,l=yi(e,t,v),u=yi(r,i,v),f=yi(t,n,v),c=yi(i,a,v),p=yi(l,f,v),m=yi(u,c,v),h.push(p,m);return h}var hg={build:function(e){var r=e.shape,t=e.points,i=r.x,n=r.y,a=r.width,s=r.height,o=Math.max(0,Math.min(r.radius,Math.min(a,s)/2));t.length=0,o?(ta(i,n+o,i,n,i+o,n,t),ta(i+a-o,n,i+a,n,i+a,n+o,t),ta(i+a,n+s-o,i+a,n+s,i+a-o,n+s,t),ta(i+o,n+s,i,n+s,i,n+s-o,t)):t.push(i,n,i+a,n,i+a,n+s,i,n+s)},triangulate:function(e,r){for(var t=e.points,i=r.points,n=r.indices,a=i.length/2,s=Ga(t,null,2),o=0,h=s.length;o<h;o+=3)n.push(s[o]+a),n.push(s[o+1]+a),n.push(s[o+2]+a);for(var o=0,h=t.length;o<h;o++)i.push(t[o],t[++o])}};function mu(e,r,t,i,n,a,s,o){var h=e-t*n,l=r-i*n,u=e+t*a,f=r+i*a,c,p;s?(c=i,p=-t):(c=-i,p=t);var m=h+c,_=l+p,v=u+c,y=f+p;return o.push(m,_),o.push(v,y),2}function xi(e,r,t,i,n,a,s,o){var h=t-e,l=i-r,u=Math.atan2(h,l),f=Math.atan2(n-e,a-r);o&&u<f?u+=Math.PI*2:!o&&u>f&&(f+=Math.PI*2);var c=u,p=f-u,m=Math.abs(p),_=Math.sqrt(h*h+l*l),v=(15*m*Math.sqrt(_)/Math.PI>>0)+1,y=p/v;if(c+=y,o){s.push(e,r),s.push(t,i);for(var E=1,T=c;E<v;E++,T+=y)s.push(e,r),s.push(e+Math.sin(T)*_,r+Math.cos(T)*_);s.push(e,r),s.push(n,a)}else{s.push(t,i),s.push(e,r);for(var E=1,T=c;E<v;E++,T+=y)s.push(e+Math.sin(T)*_,r+Math.cos(T)*_),s.push(e,r);s.push(n,a),s.push(e,r)}return v*2}function lg(e,r){var t=e.shape,i=e.points||t.points.slice(),n=r.closePointEps;if(i.length!==0){var a=e.lineStyle,s=new he(i[0],i[1]),o=new he(i[i.length-2],i[i.length-1]),h=t.type!==oe.POLY||t.closeStroke,l=Math.abs(s.x-o.x)<n&&Math.abs(s.y-o.y)<n;if(h){i=i.slice(),l&&(i.pop(),i.pop(),o.set(i[i.length-2],i[i.length-1]));var u=(s.x+o.x)*.5,f=(o.y+s.y)*.5;i.unshift(u,f),i.push(u,f)}var c=r.points,p=i.length/2,m=i.length,_=c.length/2,v=a.width/2,y=v*v,E=a.miterLimit*a.miterLimit,T=i[0],M=i[1],b=i[2],S=i[3],U=0,D=0,F=-(M-S),N=T-b,X=0,$=0,Z=Math.sqrt(F*F+N*N);F/=Z,N/=Z,F*=v,N*=v;var ut=a.alignment,W=(1-ut)*2,Y=ut*2;h||(a.cap===Rr.ROUND?m+=xi(T-F*(W-Y)*.5,M-N*(W-Y)*.5,T-F*W,M-N*W,T+F*Y,M+N*Y,c,!0)+2:a.cap===Rr.SQUARE&&(m+=mu(T,M,F,N,W,Y,!0,c))),c.push(T-F*W,M-N*W),c.push(T+F*Y,M+N*Y);for(var at=1;at<p-1;++at){T=i[(at-1)*2],M=i[(at-1)*2+1],b=i[at*2],S=i[at*2+1],U=i[(at+1)*2],D=i[(at+1)*2+1],F=-(M-S),N=T-b,Z=Math.sqrt(F*F+N*N),F/=Z,N/=Z,F*=v,N*=v,X=-(S-D),$=b-U,Z=Math.sqrt(X*X+$*$),X/=Z,$/=Z,X*=v,$*=v;var mt=b-T,dt=M-S,vt=b-U,xt=D-S,ot=dt*vt-xt*mt,ft=ot<0;if(Math.abs(ot)<.1){c.push(b-F*W,S-N*W),c.push(b+F*Y,S+N*Y);continue}var Wt=(-F+T)*(-N+S)-(-F+b)*(-N+M),Dt=(-X+U)*(-$+S)-(-X+b)*(-$+D),de=(mt*Dt-vt*Wt)/ot,Tt=(xt*Wt-dt*Dt)/ot,Rt=(de-b)*(de-b)+(Tt-S)*(Tt-S),zt=b+(de-b)*W,jt=S+(Tt-S)*W,kt=b-(de-b)*Y,ue=S-(Tt-S)*Y,Se=Math.min(mt*mt+dt*dt,vt*vt+xt*xt),Ut=ft?W:Y,ve=Se+Ut*Ut*y,ne=Rt<=ve;ne?a.join===Cr.BEVEL||Rt/y>E?(ft?(c.push(zt,jt),c.push(b+F*Y,S+N*Y),c.push(zt,jt),c.push(b+X*Y,S+$*Y)):(c.push(b-F*W,S-N*W),c.push(kt,ue),c.push(b-X*W,S-$*W),c.push(kt,ue)),m+=2):a.join===Cr.ROUND?ft?(c.push(zt,jt),c.push(b+F*Y,S+N*Y),m+=xi(b,S,b+F*Y,S+N*Y,b+X*Y,S+$*Y,c,!0)+4,c.push(zt,jt),c.push(b+X*Y,S+$*Y)):(c.push(b-F*W,S-N*W),c.push(kt,ue),m+=xi(b,S,b-F*W,S-N*W,b-X*W,S-$*W,c,!1)+4,c.push(b-X*W,S-$*W),c.push(kt,ue)):(c.push(zt,jt),c.push(kt,ue)):(c.push(b-F*W,S-N*W),c.push(b+F*Y,S+N*Y),a.join===Cr.BEVEL||Rt/y>E||(a.join===Cr.ROUND?ft?m+=xi(b,S,b+F*Y,S+N*Y,b+X*Y,S+$*Y,c,!0)+2:m+=xi(b,S,b-F*W,S-N*W,b-X*W,S-$*W,c,!1)+2:(ft?(c.push(kt,ue),c.push(kt,ue)):(c.push(zt,jt),c.push(zt,jt)),m+=2)),c.push(b-X*W,S-$*W),c.push(b+X*Y,S+$*Y),m+=2)}T=i[(p-2)*2],M=i[(p-2)*2+1],b=i[(p-1)*2],S=i[(p-1)*2+1],F=-(M-S),N=T-b,Z=Math.sqrt(F*F+N*N),F/=Z,N/=Z,F*=v,N*=v,c.push(b-F*W,S-N*W),c.push(b+F*Y,S+N*Y),h||(a.cap===Rr.ROUND?m+=xi(b-F*(W-Y)*.5,S-N*(W-Y)*.5,b-F*W,S-N*W,b+F*Y,S+N*Y,c,!1)+2:a.cap===Rr.SQUARE&&(m+=mu(b,S,F,N,W,Y,!1,c)));for(var Jt=r.indices,_e=en.epsilon*en.epsilon,at=_;at<m+_-2;++at)T=c[at*2],M=c[at*2+1],b=c[(at+1)*2],S=c[(at+1)*2+1],U=c[(at+2)*2],D=c[(at+2)*2+1],!(Math.abs(T*(S-D)+b*(D-M)+U*(M-S))<_e)&&Jt.push(at,at+1,at+2)}}function ug(e,r){var t=0,i=e.shape,n=e.points||i.points,a=i.type!==oe.POLY||i.closeStroke;if(n.length!==0){var s=r.points,o=r.indices,h=n.length/2,l=s.length/2,u=l;for(s.push(n[0],n[1]),t=1;t<h;t++)s.push(n[t*2],n[t*2+1]),o.push(u,u+1),u++;a&&o.push(u,l)}}function gu(e,r){e.lineStyle.native?ug(e,r):lg(e,r)}var yu=function(){function e(){}return e.curveTo=function(r,t,i,n,a,s){var o=s[s.length-2],h=s[s.length-1],l=h-t,u=o-r,f=n-t,c=i-r,p=Math.abs(l*c-u*f);if(p<1e-8||a===0)return(s[s.length-2]!==r||s[s.length-1]!==t)&&s.push(r,t),null;var m=l*l+u*u,_=f*f+c*c,v=l*f+u*c,y=a*Math.sqrt(m)/p,E=a*Math.sqrt(_)/p,T=y*v/m,M=E*v/_,b=y*c+E*u,S=y*f+E*l,U=u*(E+T),D=l*(E+T),F=c*(y+M),N=f*(y+M),X=Math.atan2(D-S,U-b),$=Math.atan2(N-S,F-b);return{cx:b+r,cy:S+t,radius:a,startAngle:X,endAngle:$,anticlockwise:u*f>c*l}},e.arc=function(r,t,i,n,a,s,o,h,l){for(var u=o-s,f=en._segmentsCount(Math.abs(u)*a,Math.ceil(Math.abs(u)/Fn)*40),c=u/(f*2),p=c*2,m=Math.cos(c),_=Math.sin(c),v=f-1,y=v%1/v,E=0;E<=v;++E){var T=E+y*E,M=c+s+p*T,b=Math.cos(M),S=-Math.sin(M);l.push((m*b+_*S)*a+i,(m*-S+_*b)*a+n)}},e}(),fg=function(){function e(){}return e.curveLength=function(r,t,i,n,a,s,o,h){for(var l=10,u=0,f=0,c=0,p=0,m=0,_=0,v=0,y=0,E=0,T=0,M=0,b=r,S=t,U=1;U<=l;++U)f=U/l,c=f*f,p=c*f,m=1-f,_=m*m,v=_*m,y=v*r+3*_*f*i+3*m*c*a+p*o,E=v*t+3*_*f*n+3*m*c*s+p*h,T=b-y,M=S-E,b=y,S=E,u+=Math.sqrt(T*T+M*M);return u},e.curveTo=function(r,t,i,n,a,s,o){var h=o[o.length-2],l=o[o.length-1];o.length-=2;var u=en._segmentsCount(e.curveLength(h,l,r,t,i,n,a,s)),f=0,c=0,p=0,m=0,_=0;o.push(h,l);for(var v=1,y=0;v<=u;++v)y=v/u,f=1-y,c=f*f,p=c*f,m=y*y,_=m*y,o.push(p*h+3*c*y*r+3*f*m*i+_*a,p*l+3*c*y*t+3*f*m*n+_*s)},e}(),cg=function(){function e(){}return e.curveLength=function(r,t,i,n,a,s){var o=r-2*i+a,h=t-2*n+s,l=2*i-2*r,u=2*n-2*t,f=4*(o*o+h*h),c=4*(o*l+h*u),p=l*l+u*u,m=2*Math.sqrt(f+c+p),_=Math.sqrt(f),v=2*f*_,y=2*Math.sqrt(p),E=c/_;return(v*m+_*c*(m-y)+(4*p*f-c*c)*Math.log((2*_+E+m)/(E+y)))/(4*v)},e.curveTo=function(r,t,i,n,a){for(var s=a[a.length-2],o=a[a.length-1],h=en._segmentsCount(e.curveLength(s,o,r,t,i,n)),l=0,u=0,f=1;f<=h;++f){var c=f/h;l=s+(r-s)*c,u=o+(t-o)*c,a.push(l+(r+(i-r)*c-l)*c,u+(t+(n-t)*c-u)*c)}},e}(),dg=function(){function e(){this.reset()}return e.prototype.begin=function(r,t,i){this.reset(),this.style=r,this.start=t,this.attribStart=i},e.prototype.end=function(r,t){this.attribSize=t-this.attribStart,this.size=r-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),$r,Hs=($r={},$r[oe.POLY]=vu,$r[oe.CIRC]=_u,$r[oe.ELIP]=_u,$r[oe.RECT]=og,$r[oe.RREC]=hg,$r),xu=[],ea=[],bu=function(){function e(r,t,i,n){t===void 0&&(t=null),i===void 0&&(i=null),n===void 0&&(n=null),this.shape=r,this.lineStyle=i,this.fillStyle=t,this.matrix=n,this.type=r.type,this.points=[],this.holes=[]}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),bi=new he,pg=new Nn,vg=function(e){Xs(r,e);function r(){var t=e.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new Nn,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return Object.defineProperty(r.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),ea.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var i=this.batches[t];i.reset(),xu.push(i)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(t,i,n,a){i===void 0&&(i=null),n===void 0&&(n=null),a===void 0&&(a=null);var s=new bu(t,i,n,a);return this.graphicsData.push(s),this.dirty++,this},r.prototype.drawHole=function(t,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new bu(t,null,null,i),a=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=a.lineStyle,a.holes.push(n),this.dirty++,this},r.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(t){for(var i=this.graphicsData,n=0;n<i.length;++n){var a=i[n];if(!!a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(t,bi):bi.copyFrom(t),a.shape.contains(bi.x,bi.y))){var s=!1;if(a.holes)for(var o=0;o<a.holes.length;o++){var h=a.holes[o];if(h.shape.contains(bi.x,bi.y)){s=!0;break}}if(!s)return!0}}return!1},r.prototype.updateBatches=function(t){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,n=this.graphicsData,a=null,s=null;this.batches.length>0&&(a=this.batches[this.batches.length-1],s=a.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var h=n[o],l=h.fillStyle,u=h.lineStyle,f=Hs[h.type];f.build(h),h.matrix&&this.transformPoints(h.points,h.matrix);for(var c=0;c<2;c++){var p=c===0?l:u;if(!!p.visible){var m=p.texture.baseTexture,_=this.indices.length,v=this.points.length/2;m.wrapMode=ur.REPEAT,c===0?this.processFill(h):this.processLine(h);var y=this.points.length/2-v;y!==0&&(a&&!this._compareStyles(s,p)&&(a.end(_,v),a=null),a||(a=xu.pop()||new dg,a.begin(p,_,v),this.batches.push(a),s=p),this.addUvs(this.points,i,p.texture,v,y,p.matrix))}}}var E=this.indices.length,T=this.points.length/2;if(a&&a.end(E,T),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var M=T>65535&&t;this.indicesUint16=M?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},r.prototype._compareStyles=function(t,i){return!(!t||!i||t.texture.baseTexture!==i.texture.baseTexture||t.color+t.alpha!==i.color+i.alpha||!!t.native!=!!i.native)},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,i=this.graphicsData.length;t<i;t++){var n=this.graphicsData[t],a=n.fillStyle,s=n.lineStyle;if(a&&!a.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,i=0,n=t.length;i<n;i++)for(var a=t[i],s=0;s<a.size;s++){var o=a.start+s;this.indicesUint16[o]=this.indicesUint16[o]-a.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<r.BATCHABLE_SIZE*2},r.prototype.buildDrawCalls=function(){for(var t=++$t._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),ea.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,a=this.textureIds,s=ea.pop();s||(s=new Ps,s.texArray=new As),s.texArray.count=0,s.start=0,s.size=0,s.type=He.TRIANGLES;var o=0,h=null,l=0,u=!1,f=He.TRIANGLES,c=0;this.drawCalls.push(s);for(var i=0;i<this.batches.length;i++){var p=this.batches[i],m=8,_=p.style,v=_.texture.baseTexture;u!==!!_.native&&(u=!!_.native,f=u?He.LINES:He.TRIANGLES,h=null,o=m,t++),h!==v&&(h=v,v._batchEnabled!==t&&(o===m&&(t++,o=0,s.size>0&&(s=ea.pop(),s||(s=new Ps,s.texArray=new As),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=f),v.touched=1,v._batchEnabled=t,v._batchLocation=o,v.wrapMode=ur.REPEAT,s.texArray.elements[s.texArray.count++]=v,o++)),s.size+=p.size,c+=p.size,l=v._batchLocation,this.addColors(n,_.color,_.alpha,p.attribSize),this.addTextureIds(a,l,p.attribSize)}$t._globalBatch=t,this.packAttributes()},r.prototype.packAttributes=function(){for(var t=this.points,i=this.uvs,n=this.colors,a=this.textureIds,s=new ArrayBuffer(t.length*3*4),o=new Float32Array(s),h=new Uint32Array(s),l=0,u=0;u<t.length/2;u++)o[l++]=t[u*2],o[l++]=t[u*2+1],o[l++]=i[u*2],o[l++]=i[u*2+1],h[l++]=n[u],o[l++]=a[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(t){if(t.holes.length)this.processHoles(t.holes),vu.triangulate(t,this);else{var i=Hs[t.type];i.triangulate(t,this)}},r.prototype.processLine=function(t){gu(t,this);for(var i=0;i<t.holes.length;i++)gu(t.holes[i],this)},r.prototype.processHoles=function(t){for(var i=0;i<t.length;i++){var n=t[i],a=Hs[n.type];a.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},r.prototype.calculateBounds=function(){var t=this._bounds,i=pg,n=fe.IDENTITY;this._bounds.clear(),i.clear();for(var a=0;a<this.graphicsData.length;a++){var s=this.graphicsData[a],o=s.shape,h=s.type,l=s.lineStyle,u=s.matrix||fe.IDENTITY,f=0;if(l&&l.visible){var c=l.alignment;f=l.width,h===oe.POLY?f=f*(.5+Math.abs(.5-c)):f=f*Math.max(0,c)}if(n!==u&&(i.isEmpty()||(t.addBoundsMatrix(i,n),i.clear()),n=u),h===oe.RECT||h===oe.RREC){var p=o;i.addFramePad(p.x,p.y,p.x+p.width,p.y+p.height,f,f)}else if(h===oe.CIRC){var m=o;i.addFramePad(m.x,m.y,m.x,m.y,m.radius+f,m.radius+f)}else if(h===oe.ELIP){var _=o;i.addFramePad(_.x,_.y,_.x,_.y,_.width+f,_.height+f)}else{var v=o;t.addVerticesMatrix(n,v.points,0,v.points.length,f,f)}}i.isEmpty()||t.addBoundsMatrix(i,n),t.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(t,i){for(var n=0;n<t.length/2;n++){var a=t[n*2],s=t[n*2+1];t[n*2]=i.a*a+i.c*s+i.tx,t[n*2+1]=i.b*a+i.d*s+i.ty}},r.prototype.addColors=function(t,i,n,a){for(var s=(i>>16)+(i&65280)+((i&255)<<16),o=es(s,n);a-- >0;)t.push(o)},r.prototype.addTextureIds=function(t,i,n){for(;n-- >0;)t.push(i)},r.prototype.addUvs=function(t,i,n,a,s,o){o===void 0&&(o=null);for(var h=0,l=i.length,u=n.frame;h<s;){var f=t[(a+h)*2],c=t[(a+h)*2+1];if(o){var p=o.a*f+o.c*c+o.tx;c=o.b*f+o.d*c+o.ty,f=p}h++,i.push(f/u.width,c/u.height)}var m=n.baseTexture;(u.width<m.width||u.height<m.height)&&this.adjustUvs(i,n,l,s)},r.prototype.adjustUvs=function(t,i,n,a){for(var s=i.baseTexture,o=1e-6,h=n+a*2,l=i.frame,u=l.width/s.width,f=l.height/s.height,c=l.x/l.width,p=l.y/l.height,m=Math.floor(t[n]+o),_=Math.floor(t[n+1]+o),v=n+2;v<h;v+=2)m=Math.min(m,Math.floor(t[v]+o)),_=Math.min(_,Math.floor(t[v+1]+o));c-=m,p-=_;for(var v=n;v<h;v+=2)t[v]=(t[v]+c)*u,t[v+1]=(t[v+1]+p)*f},r.BATCHABLE_SIZE=100,r}(ql),_g=function(e){Xs(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Rr.BUTT,t.join=Cr.MITER,t.miterLimit=10,t}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},r.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r}(pu),mg=new Float32Array(3),js={},Oe=function(e){Xs(r,e);function r(t){t===void 0&&(t=null);var i=e.call(this)||this;return i._geometry=t||new vg,i._geometry.refCount++,i.shader=null,i.state=Yr.for2d(),i._fillStyle=new pu,i._lineStyle=new _g,i._matrix=null,i._holeMode=!1,i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i.pluginName="batch",i._transformID=-1,i.tint=16777215,i.blendMode=wt.NORMAL,i}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(t,i,n,a,s){return t===void 0&&(t=null),i===void 0&&(i=0),n===void 0&&(n=1),a===void 0&&(a=.5),s===void 0&&(s=!1),typeof t=="number"&&(t={width:t,color:i,alpha:n,alignment:a,native:s}),this.lineTextureStyle(t)},r.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Et.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Rr.BUTT,join:Cr.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new Mn,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[i-2],t[i-1]))}else this.currentPath=new Mn,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(t,i){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=i,this},r.prototype.lineTo=function(t,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,a=n[n.length-2],s=n[n.length-1];return(a!==t||s!==i)&&n.push(t,i),this},r.prototype._initCurve=function(t,i){t===void 0&&(t=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,i]):this.moveTo(t,i)},r.prototype.quadraticCurveTo=function(t,i,n,a){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),cg.curveTo(t,i,n,a,s),this},r.prototype.bezierCurveTo=function(t,i,n,a,s,o){return this._initCurve(),fg.curveTo(t,i,n,a,s,o,this.currentPath.points),this},r.prototype.arcTo=function(t,i,n,a,s){this._initCurve(t,i);var o=this.currentPath.points,h=yu.curveTo(t,i,n,a,s,o);if(h){var l=h.cx,u=h.cy,f=h.radius,c=h.startAngle,p=h.endAngle,m=h.anticlockwise;this.arc(l,u,f,c,p,m)}return this},r.prototype.arc=function(t,i,n,a,s,o){if(o===void 0&&(o=!1),a===s)return this;!o&&s<=a?s+=Fn:o&&a<=s&&(a+=Fn);var h=s-a;if(h===0)return this;var l=t+Math.cos(a)*n,u=i+Math.sin(a)*n,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var p=Math.abs(c[c.length-2]-l),m=Math.abs(c[c.length-1]-u);p<f&&m<f||c.push(l,u)}else this.moveTo(l,u),c=this.currentPath.points;return yu.arc(l,u,t,i,n,a,s,o,c),this},r.prototype.beginFill=function(t,i){return t===void 0&&(t=0),i===void 0&&(i=1),this.beginTextureFill({texture:Et.WHITE,color:t,alpha:i})},r.prototype.beginTextureFill=function(t){t=Object.assign({texture:Et.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(t,i,n,a){return this.drawShape(new Gt(t,i,n,a))},r.prototype.drawRoundedRect=function(t,i,n,a,s){return this.drawShape(new zv(t,i,n,a,s))},r.prototype.drawCircle=function(t,i,n){return this.drawShape(new Yv(t,i,n))},r.prototype.drawEllipse=function(t,i,n,a){return this.drawShape(new Wv(t,i,n,a))},r.prototype.drawPolygon=function(){for(var t=arguments,i=[],n=0;n<arguments.length;n++)i[n]=t[n];var a,s=!0,o=i[0];o.points?(s=o.closeStroke,a=o.points):Array.isArray(i[0])?a=i[0]:a=i;var h=new Mn(a);return h.closeStroke=s,this.drawShape(h),this},r.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===oe.RECT&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},r.prototype._render=function(t){this.finishPoly();var i=this._geometry,n=t.context.supports.uint32Indices;i.updateBatches(n),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},r.prototype._populateBatches=function(){var t=this._geometry,i=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var a=0;a<n;a++){var s=t.batches[a],o=s.style.color,h=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),f={vertexData:h,blendMode:i,indices:u,uvs:l,_batchRGB:fi(o),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[a]=f}},r.prototype._renderBatched=function(t){if(!!this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var a=this.batches[i];a.worldAlpha=this.worldAlpha*a.alpha,t.plugins[this.pluginName].render(a)}}},r.prototype._renderDirect=function(t){var i=this._resolveDirectShader(t),n=this._geometry,a=this.tint,s=this.worldAlpha,o=i.uniforms,h=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(a>>16&255)/255*s,o.tint[1]=(a>>8&255)/255*s,o.tint[2]=(a&255)/255*s,o.tint[3]=s,t.shader.bind(i),t.geometry.bind(n,i),t.state.set(this.state);for(var l=0,u=h.length;l<u;l++)this._renderDrawCallDirect(t,n.drawCalls[l])},r.prototype._renderDrawCallDirect=function(t,i){for(var n=i.texArray,a=i.type,s=i.size,o=i.start,h=n.count,l=0;l<h;l++)t.texture.bind(n.elements[l],l);t.geometry.draw(a,s,o)},r.prototype._resolveDirectShader=function(t){var i=this.shader,n=this.pluginName;if(!i){if(!js[n]){for(var a=t.plugins.batch.MAX_TEXTURES,s=new Int32Array(a),o=0;o<a;o++)s[o]=o;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new fe,default:jr.from({uSamplers:s},!0)},l=t.plugins[n]._shader.program;js[n]=new Vr(l,h)}i=js[n]}return i},r.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(!!t.graphicsData.length){var i=t.bounds,n=i.minX,a=i.minY,s=i.maxX,o=i.maxY;this._bounds.addFrame(this.transform,n,a,s,o)}},r.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=fi(this.tint,mg),i=0;i<this.batches.length;i++){var n=this.batches[i],a=n._batchRGB,s=t[0]*a[0]*255,o=t[1]*a[1]*255,h=t[2]*a[2]*255,l=(s<<16)+(o<<8)+(h|0);n._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},r.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var i=this.transform.worldTransform,n=i.a,a=i.b,s=i.c,o=i.d,h=i.tx,l=i.ty,u=this._geometry.points,f=this.vertexData,c=0,p=0;p<u.length;p+=2){var m=u[p],_=u[p+1];f[c++]=n*m+s*_+h,f[c++]=o*_+a*m+l}}},r.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},r.prototype.setMatrix=function(t){return this._matrix=t,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},r._TEMP_POINT=new he,r}(ie);var Vs=function(e,r){return Vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Vs(e,r)};function gg(e,r){Vs(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var rn=new he,yg=new Uint16Array([0,1,2,0,2,3]),ze=function(e){gg(r,e);function r(t){var i=e.call(this)||this;return i._anchor=new _i(i._onAnchorUpdate,i,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=wt.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=t||Et.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=yg,i.pluginName="batch",i.isSprite=!0,i._roundPixels=yt.ROUND_PIXELS,i}return r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=di(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=di(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var i=this.transform.worldTransform,n=i.a,a=i.b,s=i.c,o=i.d,h=i.tx,l=i.ty,u=this.vertexData,f=t.trim,c=t.orig,p=this._anchor,m=0,_=0,v=0,y=0;if(f?(_=f.x-p._x*c.width,m=_+f.width,y=f.y-p._y*c.height,v=y+f.height):(_=-p._x*c.width,m=_+c.width,y=-p._y*c.height,v=y+c.height),u[0]=n*_+s*y+h,u[1]=o*y+a*_+l,u[2]=n*m+s*y+h,u[3]=o*y+a*m+l,u[4]=n*m+s*v+h,u[5]=o*v+a*m+l,u[6]=n*_+s*v+h,u[7]=o*v+a*_+l,this._roundPixels)for(var E=yt.RESOLUTION,T=0;T<u.length;++T)u[T]=Math.round((u[T]*E|0)/E)}},r.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,i=this.vertexTrimmedData,n=t.orig,a=this._anchor,s=this.transform.worldTransform,o=s.a,h=s.b,l=s.c,u=s.d,f=s.tx,c=s.ty,p=-a._x*n.width,m=p+n.width,_=-a._y*n.height,v=_+n.height;i[0]=o*p+l*_+f,i[1]=u*_+h*p+c,i[2]=o*m+l*_+f,i[3]=u*_+h*m+c,i[4]=o*m+l*v+f,i[5]=u*v+h*m+c,i[6]=o*p+l*v+f,i[7]=u*v+h*p+c},r.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Gt),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,rn);var i=this._texture.orig.width,n=this._texture.orig.height,a=-i*this.anchor.x,s=0;return!!(rn.x>=a&&rn.x<a+i&&(s=-n*this.anchor.y,rn.y>=s&&rn.y<s+n))},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof t=="boolean"?t:t&&t.texture;if(i){var n=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},r.from=function(t,i){var n=t instanceof Et?t:Et.from(t,i);return new r(n)},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var i=di(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var i=di(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Et.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r}(ie);var Ys=function(e,r){return Ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Ys(e,r)};function xg(e,r){Ys(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var nn;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(nn||(nn={}));var Ws={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:nn.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},bg=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],wi=function(){function e(r){this.styleID=0,this.reset(),qs(this,r,r)}return e.prototype.clone=function(){var r={};return qs(r,this,Ws),new e(r)},e.prototype.reset=function(){qs(this,Ws,Ws)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(r){var t=zs(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(r){var t=zs(r);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(r){wg(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(r){var t=zs(r);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var r=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var i=t.length-1;i>=0;i--){var n=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&bg.indexOf(n)<0&&(n='"'+n+'"'),t[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+t.join(",")},e}();function wu(e){return typeof e=="number"?Yh(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function zs(e){if(Array.isArray(e)){for(var r=0;r<e.length;++r)e[r]=wu(e[r]);return e}else return wu(e)}function wg(e,r){if(!Array.isArray(e)||!Array.isArray(r)||e.length!==r.length)return!1;for(var t=0;t<e.length;++t)if(e[t]!==r[t])return!1;return!0}function qs(e,r,t){for(var i in t)Array.isArray(r[i])?e[i]=r[i].slice():e[i]=r[i]}var De=function(){function e(r,t,i,n,a,s,o,h,l){this.text=r,this.style=t,this.width=i,this.height=n,this.lines=a,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=l}return e.measureText=function(r,t,i,n){n===void 0&&(n=e._canvas),i=i==null?t.wordWrap:i;var a=t.toFontString(),s=e.measureFont(a);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);var o=n.getContext("2d");o.font=a;for(var h=i?e.wordWrap(r,t,n):r,l=h.split(/(?:\r\n|\r|\n)/),u=new Array(l.length),f=0,c=0;c<l.length;c++){var p=o.measureText(l[c]).width+(l[c].length-1)*t.letterSpacing;u[c]=p,f=Math.max(f,p)}var m=f+t.strokeThickness;t.dropShadow&&(m+=t.dropShadowDistance);var _=t.lineHeight||s.fontSize+t.strokeThickness,v=Math.max(_,s.fontSize+t.strokeThickness)+(l.length-1)*(_+t.leading);return t.dropShadow&&(v+=t.dropShadowDistance),new e(r,t,m,v,l,u,_+t.leading,f,s)},e.wordWrap=function(r,t,i){i===void 0&&(i=e._canvas);for(var n=i.getContext("2d"),a=0,s="",o="",h=Object.create(null),l=t.letterSpacing,u=t.whiteSpace,f=e.collapseSpaces(u),c=e.collapseNewlines(u),p=!f,m=t.wordWrapWidth+l,_=e.tokenize(r),v=0;v<_.length;v++){var y=_[v];if(e.isNewline(y)){if(!c){o+=e.addLine(s),p=!f,s="",a=0;continue}y=" "}if(f){var E=e.isBreakingSpace(y),T=e.isBreakingSpace(s[s.length-1]);if(E&&T)continue}var M=e.getFromCache(y,l,h,n);if(M>m)if(s!==""&&(o+=e.addLine(s),s="",a=0),e.canBreakWords(y,t.breakWords))for(var b=e.wordWrapSplit(y),S=0;S<b.length;S++){for(var U=b[S],D=1;b[S+D];){var F=b[S+D],N=U[U.length-1];if(!e.canBreakChars(N,F,y,S,t.breakWords))U+=F;else break;D++}S+=U.length-1;var X=e.getFromCache(U,l,h,n);X+a>m&&(o+=e.addLine(s),p=!1,s="",a=0),s+=U,a+=X}else{s.length>0&&(o+=e.addLine(s),s="",a=0);var $=v===_.length-1;o+=e.addLine(y,!$),p=!1,s="",a=0}else M+a>m&&(p=!1,o+=e.addLine(s),s="",a=0),(s.length>0||!e.isBreakingSpace(y)||p)&&(s+=y,a+=M)}return o+=e.addLine(s,!1),o},e.addLine=function(r,t){return t===void 0&&(t=!0),r=e.trimRight(r),r=t?r+`
`:r,r},e.getFromCache=function(r,t,i,n){var a=i[r];if(typeof a!="number"){var s=r.length*t;a=n.measureText(r).width+s,i[r]=a}return a},e.collapseSpaces=function(r){return r==="normal"||r==="pre-line"},e.collapseNewlines=function(r){return r==="normal"},e.trimRight=function(r){if(typeof r!="string")return"";for(var t=r.length-1;t>=0;t--){var i=r[t];if(!e.isBreakingSpace(i))break;r=r.slice(0,-1)}return r},e.isNewline=function(r){return typeof r!="string"?!1:e._newlines.indexOf(r.charCodeAt(0))>=0},e.isBreakingSpace=function(r,t){return typeof r!="string"?!1:e._breakingSpaces.indexOf(r.charCodeAt(0))>=0},e.tokenize=function(r){var t=[],i="";if(typeof r!="string")return t;for(var n=0;n<r.length;n++){var a=r[n],s=r[n+1];if(e.isBreakingSpace(a,s)||e.isNewline(a)){i!==""&&(t.push(i),i=""),t.push(a);continue}i+=a}return i!==""&&t.push(i),t},e.canBreakWords=function(r,t){return t},e.canBreakChars=function(r,t,i,n,a){return!0},e.wordWrapSplit=function(r){return r.split("")},e.measureFont=function(r){if(e._fonts[r])return e._fonts[r];var t={ascent:0,descent:0,fontSize:0},i=e._canvas,n=e._context;n.font=r;var a=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(n.measureText(a).width),o=Math.ceil(n.measureText(e.BASELINE_SYMBOL).width),h=Math.ceil(e.HEIGHT_MULTIPLIER*o);o=o*e.BASELINE_MULTIPLIER|0,i.width=s,i.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=r,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(a,0,o);var l=n.getImageData(0,0,s,h).data,u=l.length,f=s*4,c=0,p=0,m=!1;for(c=0;c<o;++c){for(var _=0;_<f;_+=4)if(l[p+_]!==255){m=!0;break}if(!m)p+=f;else break}for(t.ascent=o-c,p=u-f,m=!1,c=h;c>o;--c){for(var _=0;_<f;_+=4)if(l[p+_]!==255){m=!0;break}if(!m)p-=f;else break}return t.descent=c-o,t.fontSize=t.ascent+t.descent,e._fonts[r]=t,t},e.clearMetrics=function(r){r===void 0&&(r=""),r?delete e._fonts[r]:e._fonts={}},e}(),ra=function(){try{var e=new OffscreenCanvas(0,0),r=e.getContext("2d");return r&&r.measureText?e:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();ra.width=ra.height=10;De._canvas=ra;De._context=ra.getContext("2d");De._fonts={};De.METRICS_STRING="|ÉqÅ";De.BASELINE_SYMBOL="M";De.BASELINE_MULTIPLIER=1.4;De.HEIGHT_MULTIPLIER=2;De._newlines=[10,13];De._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Tg={texture:!0,children:!1,baseTexture:!0},le=function(e){xg(r,e);function r(t,i,n){var a=this,s=!1;n||(n=document.createElement("canvas"),s=!0),n.width=3,n.height=3;var o=Et.from(n);return o.orig=new Gt,o.trim=new Gt,a=e.call(this,o)||this,a._ownCanvas=s,a.canvas=n,a.context=a.canvas.getContext("2d"),a._resolution=yt.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=t,a.style=i,a.localStyleID=-1,a}return r.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var n=this.context,a=De.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,o=a.height,h=a.lines,l=a.lineHeight,u=a.lineWidths,f=a.maxLineWidth,c=a.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var p,m,_=i.dropShadow?2:1,v=0;v<_;++v){var y=i.dropShadow&&v===0,E=y?Math.ceil(Math.max(1,o)+i.padding*2):0,T=E*this._resolution;if(y){n.fillStyle="black",n.strokeStyle="black";var M=i.dropShadowColor,b=fi(typeof M=="number"?M:Wh(M));n.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=i.dropShadowBlur,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+T}else n.fillStyle=this._generateFillStyle(i,h,a),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var S=(l-c.fontSize)/2;(!r.nextLineHeightBehavior||l-c.fontSize<0)&&(S=0);for(var U=0;U<h.length;U++)p=i.strokeThickness/2,m=i.strokeThickness/2+U*l+c.ascent+S,i.align==="right"?p+=f-u[U]:i.align==="center"&&(p+=(f-u[U])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(h[U],p+i.padding,m+i.padding-E,!0),i.fill&&this.drawLetterSpacing(h[U],p+i.padding,m+i.padding-E)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(t,i,n,a){a===void 0&&(a=!1);var s=this._style,o=s.letterSpacing;if(o===0){a?this.context.strokeText(t,i,n):this.context.fillText(t,i,n);return}for(var h=i,l=Array.from?Array.from(t):t.split(""),u=this.context.measureText(t).width,f=0,c=0;c<l.length;++c){var p=l[c];a?this.context.strokeText(p,h,n):this.context.fillText(p,h,n),f=this.context.measureText(t.substring(c+1)).width,h+=u-f+o,u=f}},r.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var i=Xv(t);i.data&&(t.width=i.width,t.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,a=this._style,s=a.trim?0:a.padding,o=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(t.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(t.height/this._resolution),n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},r.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},r.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},r.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(t,i,n){var a=t.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var s,o=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,l=Math.ceil(this.canvas.width/this._resolution)-o-h*2,u=Math.ceil(this.canvas.height/this._resolution)-o-h*2,f=a.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var p=f.length+1,m=1;m<p;++m)c.push(m/p);if(f.unshift(a[0]),c.unshift(0),f.push(a[a.length-1]),c.push(1),t.fillGradientType===nn.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,h,l/2,u+h);for(var _=n.fontProperties.fontSize+t.strokeThickness,v=_/u,m=0;m<i.length;m++)for(var y=n.lineHeight*m,E=0;E<f.length;E++){var T=0;typeof c[E]=="number"?T=c[E]:T=E/f.length;var M=Math.min(1,Math.max(0,y/u+T*v));M=Number(M.toFixed(5)),s.addColorStop(M,f[E])}}else{s=this.context.createLinearGradient(h,u/2,l+h,u/2);for(var b=f.length+1,S=1,m=0;m<f.length;m++){var U=void 0;typeof c[m]=="number"?U=c[m]:U=S/b,s.addColorStop(U,f[m]),S++}}return s},r.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Tg,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var i=di(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var i=di(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof wi?this._style=t:this._style=new wi(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),r.nextLineHeightBehavior=!1,r}(ze);yt.UPLOADS_PER_FRAME=4;var $s=function(e,r){return $s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},$s(e,r)};function Eg(e,r){$s(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Sg=function(){function e(r){this.maxItemsPerFrame=r,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Ig(e,r){var t=!1;if(e&&e._textures&&e._textures.length){for(var i=0;i<e._textures.length;i++)if(e._textures[i]instanceof Et){var n=e._textures[i].baseTexture;r.indexOf(n)===-1&&(r.push(n),t=!0)}}return t}function Pg(e,r){if(e.baseTexture instanceof $t){var t=e.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function Ag(e,r){if(e._texture&&e._texture instanceof Et){var t=e._texture.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function Cg(e,r){return r instanceof le?(r.updateText(!0),!0):!1}function Rg(e,r){if(r instanceof wi){var t=r.toFontString();return De.measureFont(t),!0}return!1}function Og(e,r){if(e instanceof le){r.indexOf(e.style)===-1&&r.push(e.style),r.indexOf(e)===-1&&r.push(e);var t=e._texture.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function Ug(e,r){return e instanceof wi?(r.indexOf(e)===-1&&r.push(e),!0):!1}var kg=function(){function e(r){var t=this;this.limiter=new Sg(yt.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(Og),this.registerFindHook(Ug),this.registerFindHook(Ig),this.registerFindHook(Pg),this.registerFindHook(Ag),this.registerUploadHook(Cg),this.registerUploadHook(Rg)}return e.prototype.upload=function(r,t){typeof r=="function"&&(t=r,r=null),r&&this.add(r),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,pe.system.addOnce(this.tick,this,dr.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],t=!1;if(r&&!r._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,r)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)pe.system.addOnce(this.tick,this,dr.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var i=0,n=a.length;i<n;i++)a[i]()}},e.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},e.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},e.prototype.add=function(r){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](r,this.queue);t++);if(r instanceof ie)for(var t=r.children.length-1;t>=0;t--)this.add(r.children[t]);return this},e.prototype.destroy=function(){this.ticking&&pe.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Tu(e,r){return r instanceof $t?(r._glTextures[e.CONTEXT_UID]||e.texture.bind(r),!0):!1}function Fg(e,r){if(!(r instanceof Oe))return!1;var t=r.geometry;r.finishPoly(),t.updateBatches();for(var i=t.batches,n=0;n<i.length;n++){var a=i[n].style.texture;a&&Tu(e,a.baseTexture)}return t.batchable||e.geometry.bind(t,r._resolveDirectShader(e)),!0}function Mg(e,r){return e instanceof Oe?(r.push(e),!0):!1}var Lg=function(e){Eg(r,e);function r(t){var i=e.call(this,t)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(Mg),i.registerUploadHook(Tu),i.registerUploadHook(Fg),i}return r}(kg),lx=function(){function e(r){this.maxMilliseconds=r,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();var Ng=function(){function e(r,t,i){i===void 0&&(i=null),this._texture=r instanceof Et?r:null,this.baseTexture=r instanceof $t?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(r){r===void 0&&(r=null);var t=this.data.meta.scale,i=kn(r,null);return i===null&&(i=t!==void 0?parseFloat(t):1),i!==1&&this.baseTexture.setResolution(i),i},e.prototype.parse=function(r){this._batchIndex=0,this._callback=r,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(r){for(var t=r,i=e.BATCH_SIZE;t-r<i&&t<this._frameKeys.length;){var n=this._frameKeys[t],a=this._frames[n],s=a.frame;if(s){var o=null,h=null,l=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,u=new Gt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);a.rotated?o=new Gt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new Gt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(h=new Gt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new Et(this.baseTexture,o,u,h,a.rotated?2:0,a.anchor),Et.addToCache(this.textures[n],n)}t++}},e.prototype._processAnimations=function(){var r=this.data.animations||{};for(var t in r){this.animations[t]=[];for(var i=0;i<r[t].length;i++){var n=r[t][i];this.animations[t].push(this.textures[n])}}},e.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},e.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){r._batchIndex*e.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())},0)},e.prototype.destroy=function(r){var t;r===void 0&&(r=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),Dg=function(){function e(){}return e.use=function(r,t){var i,n,a=this,s=r.name+"_image";if(!r.data||r.type!==je.TYPE.JSON||!r.data.frames||a.resources[s]){t();return}var o=(n=(i=r.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(o))for(var h=function(m){if(typeof m!="string")return"continue";var _=m.replace(".json",""),v=ui.resolve(r.url.replace(a.baseUrl,""),m);if(a.resources[_]||Object.values(a.resources).some(function(E){return ui.format(ui.parse(E.url))===v}))return"continue";var y={crossOrigin:r.crossOrigin,loadType:je.LOAD_TYPE.XHR,xhrType:je.XHR_RESPONSE_TYPE.JSON,parentResource:r};a.add(_,v,y)},l=0,u=o;l<u.length;l++){var f=u[l];h(f)}var c={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},p=e.getResourcePath(r,a.baseUrl);a.add(s,p,c,function(_){if(_.error){t(_.error);return}var v=new Ng(_.texture,r.data,r.url);v.parse(function(){r.spritesheet=v,r.textures=v.textures,t()})})},e.getResourcePath=function(r,t){return r.isDataUrl?r.data.meta.image:ui.resolve(r.url.replace(t,""),r.data.meta.image)},e}();var Zs=function(e,r){return Zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Zs(e,r)};function Eu(e,r){Zs(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var an=new he,ux=function(e){Eu(r,e);function r(t,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var a=e.call(this,t)||this;return a.tileTransform=new rl,a._width=i,a._height=n,a.uvMatrix=a.texture.uvMatrix||new Es(t),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(t){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,i,n,a)},r.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Gt),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,an);var i=this._width,n=this._height,a=-i*this.anchor._x;if(an.x>=a&&an.x<a+i){var s=-n*this.anchor._y;if(an.y>=s&&an.y<s+n)return!0}return!1},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},r.from=function(t,i){var n=t instanceof Et?t:Et.from(t,i);return new r(n,i.width,i.height)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),r}(ze),Su=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Bg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,Gg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,ia=new fe,Xg=function(e){Eu(r,e);function r(t){var i=e.call(this,t)||this,n={globals:i.renderer.globalUniforms};return i.shader=Vr.from(Su,Bg,n),i.simpleShader=Vr.from(Su,Gg,n),i.quad=new yl,i.state=Yr.for2d(),i}return r.prototype.render=function(t){var i=this.renderer,n=this.quad,a=n.vertices;a[0]=a[6]=t._width*-t.anchor.x,a[1]=a[3]=t._height*-t.anchor.y,a[2]=a[4]=t._width*(1-t.anchor.x),a[5]=a[7]=t._height*(1-t.anchor.y);var s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;a=n.uvs,a[0]=a[6]=-s,a[1]=a[3]=-o,a[2]=a[4]=1-s,a[5]=a[7]=1-o,n.invalidate();var h=t._texture,l=h.baseTexture,u=t.tileTransform.localTransform,f=t.uvMatrix,c=l.isPowerOfTwo&&h.frame.width===l.width&&h.frame.height===l.height;c&&(l._glTextures[i.CONTEXT_UID]?c=l.wrapMode!==ur.CLAMP:l.wrapMode===ur.CLAMP&&(l.wrapMode=ur.REPEAT));var p=c?this.simpleShader:this.shader,m=h.width,_=h.height,v=t._width,y=t._height;ia.set(u.a*m/v,u.b*m/y,u.c*_/v,u.d*_/y,u.tx/v,u.ty/y),ia.invert(),c?ia.prepend(f.mapCoord):(p.uniforms.uMapCoord=f.mapCoord.toArray(!0),p.uniforms.uClampFrame=f.uClampFrame,p.uniforms.uClampOffset=f.uClampOffset),p.uniforms.uTransform=ia.toArray(!0),p.uniforms.uColor=$h(t.tint,t.worldAlpha,p.uniforms.uColor,l.alphaMode),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=h,i.shader.bind(p),i.geometry.bind(n),this.state.blendMode=qh(t.blendMode,l.alphaMode),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r}(Vn);var Ks=function(e,r){return Ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Ks(e,r)};function Js(e,r){Ks(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Hg=function(){function e(r,t){this.uvBuffer=r,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(r){if(!(!r&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),Qs=new he,Iu=new Mn,sn=function(e){Js(r,e);function r(t,i,n,a){a===void 0&&(a=He.TRIANGLES);var s=e.call(this)||this;return s.geometry=t,t.refCount++,s.shader=i,s.state=n||Yr.for2d(),s.drawMode=a,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=yt.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){var i=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===He.TRIANGLES&&i.length<r.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},r.prototype._renderDefault=function(t){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),t.batch.flush(),i.program.uniformData.translationMatrix&&(i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(i),t.state.set(this.state),t.geometry.bind(this.geometry,i),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(t){var i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var a=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[a]),t.plugins[a].render(this)},r.prototype.calculateVertices=function(){var t=this.geometry,i=t.buffers[0],n=i.data,a=i._updateID;if(!(a===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var s=this.transform.worldTransform,o=s.a,h=s.b,l=s.c,u=s.d,f=s.tx,c=s.ty,p=this.vertexData,m=0;m<p.length/2;m++){var _=n[m*2],v=n[m*2+1];p[m*2]=o*_+l*v+f,p[m*2+1]=h*_+u*v+c}if(this._roundPixels)for(var y=yt.RESOLUTION,m=0;m<p.length;++m)p[m]=Math.round((p[m]*y|0)/y);this.vertexDirty=a}},r.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Hg(t,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Qs);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=Iu.points,a=this.geometry.getIndex().data,s=a.length,o=this.drawMode===4?3:1,h=0;h+2<s;h+=o){var l=a[h]*2,u=a[h+1]*2,f=a[h+2]*2;if(n[0]=i[l],n[1]=i[l+1],n[2]=i[u],n[3]=i[u+1],n[4]=i[f],n[5]=i[f+1],Iu.contains(Qs.x,Qs.y))return!0}return!1},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r}(ie),jg=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Vg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,na=function(e){Js(r,e);function r(t,i){var n=this,a={uSampler:t,alpha:1,uTextureMatrix:fe.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(a,i.uniforms),n=e.call(this,i.program||qn.from(Vg,jg),a)||this,n._colorDirty=!1,n.uvMatrix=new Es(t),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(r.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),r.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;$h(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},r}(Vr),aa=function(e){Js(r,e);function r(t,i,n){var a=e.call(this)||this,s=new me(t),o=new me(i,!0),h=new me(n,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,qt.FLOAT).addAttribute("aTextureCoord",o,2,!1,qt.FLOAT).addIndex(h),a._updateId=-1,a}return Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r}(zi);var to=function(e,r){return to=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},to(e,r)};function Yg(e,r){to(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var sa=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return e}(),Wg=function(){function e(){}return e.test=function(r){return typeof r=="string"&&r.indexOf("info face=")===0},e.parse=function(r){var t=r.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var n in t){var a=t[n].match(/^[a-z]+/gm)[0],s=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var h in s){var l=s[h].split("="),u=l[0],f=l[1].replace(/"/gm,""),c=parseFloat(f),p=isNaN(c)?f:c;o[u]=p}i[a].push(o)}var m=new sa;return i.info.forEach(function(_){return m.info.push({face:_.face,size:parseInt(_.size,10)})}),i.common.forEach(function(_){return m.common.push({lineHeight:parseInt(_.lineHeight,10)})}),i.page.forEach(function(_){return m.page.push({id:parseInt(_.id,10),file:_.file})}),i.char.forEach(function(_){return m.char.push({id:parseInt(_.id,10),page:parseInt(_.page,10),x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xoffset:parseInt(_.xoffset,10),yoffset:parseInt(_.yoffset,10),xadvance:parseInt(_.xadvance,10)})}),i.kerning.forEach(function(_){return m.kerning.push({first:parseInt(_.first,10),second:parseInt(_.second,10),amount:parseInt(_.amount,10)})}),m},e}(),eo=function(){function e(){}return e.test=function(r){return r instanceof XMLDocument&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(r){for(var t=new sa,i=r.getElementsByTagName("info"),n=r.getElementsByTagName("common"),a=r.getElementsByTagName("page"),s=r.getElementsByTagName("char"),o=r.getElementsByTagName("kerning"),h=0;h<i.length;h++)t.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(var h=0;h<n.length;h++)t.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(var h=0;h<a.length;h++)t.page.push({id:parseInt(a[h].getAttribute("id"),10)||0,file:a[h].getAttribute("file")});for(var h=0;h<s.length;h++){var l=s[h];t.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(var h=0;h<o.length;h++)t.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});return t},e}(),zg=function(){function e(){}return e.test=function(r){if(typeof r=="string"&&r.indexOf("<font>")>-1){var t=new self.DOMParser().parseFromString(r,"text/xml");return eo.test(t)}return!1},e.parse=function(r){var t=new self.DOMParser().parseFromString(r,"text/xml");return eo.parse(t)},e}(),ro=[Wg,eo,zg];function Pu(e){for(var r=0;r<ro.length;r++)if(ro[r].test(e))return ro[r];return null}function Au(e,r,t,i,n,a){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var o,h=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,u=Math.ceil(e.width/i)-h-l*2,f=Math.ceil(e.height/i)-h-l*2,c=s.slice(),p=t.fillGradientStops.slice();if(!p.length)for(var m=c.length+1,_=1;_<m;++_)p.push(_/m);if(c.unshift(s[0]),p.unshift(0),c.push(s[s.length-1]),p.push(1),t.fillGradientType===nn.LINEAR_VERTICAL){o=r.createLinearGradient(u/2,l,u/2,f+l);for(var v=0,y=a.fontProperties.fontSize+t.strokeThickness,E=y/f,_=0;_<n.length;_++)for(var T=a.lineHeight*_,M=0;M<c.length;M++){var b=0;typeof p[M]=="number"?b=p[M]:b=M/c.length;var S=T/f+b*E,U=Math.max(v,S);U=Math.min(U,1),o.addColorStop(U,c[M]),v=U}}else{o=r.createLinearGradient(l,f/2,u+l,f/2);for(var D=c.length+1,F=1,_=0;_<c.length;_++){var N=void 0;typeof p[_]=="number"?N=p[_]:N=F/D,o.addColorStop(N,c[_]),F++}}return o}function qg(e,r,t,i,n,a,s){var o=t.text,h=t.fontProperties;r.translate(i,n),r.scale(a,a);var l=s.strokeThickness/2,u=-(s.strokeThickness/2);r.font=s.toFontString(),r.lineWidth=s.strokeThickness,r.textBaseline=s.textBaseline,r.lineJoin=s.lineJoin,r.miterLimit=s.miterLimit,r.fillStyle=Au(e,r,s,a,[o],t),r.strokeStyle=s.stroke,r.font=s.toFontString(),r.lineWidth=s.strokeThickness,r.textBaseline=s.textBaseline,r.lineJoin=s.lineJoin,r.miterLimit=s.miterLimit,r.fillStyle=Au(e,r,s,a,[o],t),r.strokeStyle=s.stroke;var f=s.dropShadowColor,c=fi(typeof f=="number"?f:Wh(f));s.dropShadow?(r.shadowColor="rgba("+c[0]*255+","+c[1]*255+","+c[2]*255+","+s.dropShadowAlpha+")",r.shadowBlur=s.dropShadowBlur,r.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,r.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0),s.stroke&&s.strokeThickness&&r.strokeText(o,l,u+t.lineHeight-h.descent),s.fill&&r.fillText(o,l,u+t.lineHeight-h.descent),r.setTransform(1,0,0,1,0,0),r.fillStyle="rgba(0, 0, 0, 0)"}function $g(e){typeof e=="string"&&(e=[e]);for(var r=[],t=0,i=e.length;t<i;t++){var n=e[t];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var a=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<a)throw new Error("[BitmapFont]: Invalid character range.");for(var o=a,h=s;o<=h;o++)r.push(String.fromCharCode(o))}else r.push.apply(r,n.split(""))}if(r.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return r}var on=function(){function e(r,t,i){var n=r.info[0],a=r.common[0],s=r.page[0],o=kn(s.file),h={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=a.lineHeight/o,this.chars={},this.pageTextures=h;for(var l=0;l<r.page.length;l++){var u=r.page[l],f=u.id,c=u.file;h[f]=t instanceof Array?t[l]:t[c]}for(var l=0;l<r.char.length;l++){var p=r.char[l],f=p.id,m=p.page,_=r.char[l],v=_.x,y=_.y,E=_.width,T=_.height,M=_.xoffset,b=_.yoffset,S=_.xadvance;v/=o,y/=o,E/=o,T/=o,M/=o,b/=o,S/=o;var U=new Gt(v+h[m].frame.x/o,y+h[m].frame.y/o,E,T);this.chars[f]={xOffset:M,yOffset:b,xAdvance:S,kerning:{},texture:new Et(h[m].baseTexture,U),page:m}}for(var l=0;l<r.kerning.length;l++){var D=r.kerning[l],F=D.first,N=D.second,X=D.amount;F/=o,N/=o,X/=o,this.chars[N]&&(this.chars[N].kerning[F]=X)}}return e.prototype.destroy=function(){for(var r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(var r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null},e.install=function(r,t,i){var n;if(r instanceof sa)n=r;else{var a=Pu(r);if(!a)throw new Error("Unrecognized data format for font.");n=a.parse(r)}t instanceof Et&&(t=[t]);var s=new e(n,t,i);return e.available[s.font]=s,s},e.uninstall=function(r){var t=e.available[r];if(!t)throw new Error("No font found named '"+r+"'");t.destroy(),delete e.available[r]},e.from=function(r,t,i){if(!r)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},e.defaultOptions,i),a=n.chars,s=n.padding,o=n.resolution,h=n.textureWidth,l=n.textureHeight,u=$g(a),f=t instanceof wi?t:new wi(t),c=h,p=new sa;p.info[0]={face:f.fontFamily,size:f.fontSize},p.common[0]={lineHeight:f.fontSize};for(var m=0,_=0,v,y,E,T=0,M=[],b=0;b<u.length;b++){v||(v=document.createElement("canvas"),v.width=h,v.height=l,y=v.getContext("2d"),E=new $t(v,{resolution:o}),M.push(new Et(E)),p.page.push({id:M.length-1,file:""}));var S=De.measureText(u[b],f,!1,v),U=S.width,D=Math.ceil(S.height),F=Math.ceil((f.fontStyle==="italic"?2:1)*U);if(_>=l-D*o){if(_===0)throw new Error("[BitmapFont] textureHeight "+l+"px is "+("too small for "+f.fontSize+"px fonts"));--b,v=null,y=null,E=null,_=0,m=0,T=0;continue}if(T=Math.max(D+S.fontProperties.descent,T),F*o+m>=c){--b,_+=T*o,_=Math.ceil(_),m=0,T=0;continue}qg(v,y,S,m,_,o,f);var N=S.text.charCodeAt(0);p.char.push({id:N,page:M.length-1,x:m/o,y:_/o,width:F,height:D,xoffset:0,yoffset:0,xadvance:Math.ceil(U-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),m+=(F+2*s)*o,m=Math.ceil(m)}for(var b=0,X=u.length;b<X;b++)for(var $=u[b],Z=0;Z<X;Z++){var ut=u[Z],W=y.measureText($).width,Y=y.measureText(ut).width,at=y.measureText($+ut).width,mt=at-(W+Y);mt&&p.kerning.push({first:$.charCodeAt(0),second:ut.charCodeAt(0),amount:mt})}var dt=new e(p,M,!0);return e.available[r]!==void 0&&e.uninstall(r),e.available[r]=dt,dt},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),Cu=[],Ru=[],fx=function(e){Yg(r,e);function r(t,i){i===void 0&&(i={});var n=e.call(this)||this;n._tint=16777215;var a=Object.assign({},r.styleDefaults,i),s=a.align,o=a.tint,h=a.maxWidth,l=a.letterSpacing,u=a.fontName,f=a.fontSize;if(!on.available[u])throw new Error('Missing BitmapFont "'+u+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=s,n._tint=o,n._fontName=u,n._fontSize=f||on.available[u].size,n._text=t,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=l,n._anchor=new _i(function(){n.dirty=!0},n,0,0),n._roundPixels=yt.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return r.prototype.updateText=function(){for(var t,i=on.available[this._fontName],n=this._fontSize/i.size,a=new he,s=[],o=[],h=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=l.length,f=this._maxWidth*i.size/this._fontSize,c=null,p=0,m=0,_=0,v=-1,y=0,E=0,T=0,M=0,b=0;b<u;b++){var S=l.charCodeAt(b),U=l.charAt(b);if(/(?:\s)/.test(U)&&(v=b,y=p,M++),U==="\r"||U===`
`){o.push(p),h.push(-1),m=Math.max(m,p),++_,++E,a.x=0,a.y+=i.lineHeight,c=null,M=0;continue}var D=i.chars[S];if(!!D){c&&D.kerning[c]&&(a.x+=D.kerning[c]);var F=Ru.pop()||{texture:Et.EMPTY,line:0,charCode:0,prevSpaces:0,position:new he};F.texture=D.texture,F.line=_,F.charCode=S,F.position.x=a.x+D.xOffset+this._letterSpacing/2,F.position.y=a.y+D.yOffset,F.prevSpaces=M,s.push(F),a.x+=D.xAdvance+this._letterSpacing,p=a.x,T=Math.max(T,D.yOffset+D.texture.height),c=S,v!==-1&&f>0&&a.x>f&&(++E,ci(s,1+v-E,1+b-v),b=v,v=-1,o.push(y),h.push(s.length>0?s[s.length-1].prevSpaces:0),m=Math.max(m,y),_++,a.x=0,a.y+=i.lineHeight,c=null,M=0)}}var N=l.charAt(l.length-1);N!=="\r"&&N!==`
`&&(/(?:\s)/.test(N)&&(p=y),o.push(p),m=Math.max(m,p),h.push(-1));for(var X=[],b=0;b<=_;b++){var $=0;this._align==="right"?$=m-o[b]:this._align==="center"?$=(m-o[b])/2:this._align==="justify"&&($=h[b]<0?0:(m-o[b])/h[b]),X.push($)}for(var Z=s.length,ut={},W=[],Y=this._activePagesMeshData,b=0;b<Y.length;b++)Cu.push(Y[b]);for(var b=0;b<Z;b++){var at=s[b].texture,mt=at.baseTexture.uid;if(!ut[mt]){var dt=Cu.pop();if(!dt){var vt=new aa,xt=new na(Et.EMPTY),ot=new sn(vt,xt);dt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ot,vertices:null,uvs:null,indices:null}}dt.index=0,dt.indexCount=0,dt.vertexCount=0,dt.uvsCount=0,dt.total=0;var ft=this._textureCache;ft[mt]=ft[mt]||new Et(at.baseTexture),dt.mesh.texture=ft[mt],dt.mesh.tint=this._tint,W.push(dt),ut[mt]=dt}ut[mt].total++}for(var b=0;b<Y.length;b++)W.indexOf(Y[b])===-1&&this.removeChild(Y[b].mesh);for(var b=0;b<W.length;b++)W[b].mesh.parent!==this&&this.addChild(W[b].mesh);this._activePagesMeshData=W;for(var b in ut){var dt=ut[b],Wt=dt.total;if(!(((t=dt.indices)===null||t===void 0?void 0:t.length)>6*Wt)||dt.vertices.length<sn.BATCHABLE_SIZE*2)dt.vertices=new Float32Array(4*2*Wt),dt.uvs=new Float32Array(4*2*Wt),dt.indices=new Uint16Array(6*Wt);else for(var Dt=dt.total,de=dt.vertices,Tt=Dt*4*2;Tt<de.length;Tt++)de[Tt]=0;dt.mesh.size=6*Wt}for(var b=0;b<Z;b++){var U=s[b],Rt=U.position.x+X[U.line]*(this._align==="justify"?U.prevSpaces:1);this._roundPixels&&(Rt=Math.round(Rt));var zt=Rt*n,jt=U.position.y*n,at=U.texture,kt=ut[at.baseTexture.uid],ue=at.frame,Se=at._uvs,Ut=kt.index++;kt.indices[Ut*6+0]=0+Ut*4,kt.indices[Ut*6+1]=1+Ut*4,kt.indices[Ut*6+2]=2+Ut*4,kt.indices[Ut*6+3]=0+Ut*4,kt.indices[Ut*6+4]=2+Ut*4,kt.indices[Ut*6+5]=3+Ut*4,kt.vertices[Ut*8+0]=zt,kt.vertices[Ut*8+1]=jt,kt.vertices[Ut*8+2]=zt+ue.width*n,kt.vertices[Ut*8+3]=jt,kt.vertices[Ut*8+4]=zt+ue.width*n,kt.vertices[Ut*8+5]=jt+ue.height*n,kt.vertices[Ut*8+6]=zt,kt.vertices[Ut*8+7]=jt+ue.height*n,kt.uvs[Ut*8+0]=Se.x0,kt.uvs[Ut*8+1]=Se.y0,kt.uvs[Ut*8+2]=Se.x1,kt.uvs[Ut*8+3]=Se.y1,kt.uvs[Ut*8+4]=Se.x2,kt.uvs[Ut*8+5]=Se.y2,kt.uvs[Ut*8+6]=Se.x3,kt.uvs[Ut*8+7]=Se.y3}this._textWidth=m*n,this._textHeight=(a.y+i.lineHeight)*n;for(var b in ut){var dt=ut[b];if(this.anchor.x!==0||this.anchor.y!==0)for(var ve=0,ne=this._textWidth*this.anchor.x,Jt=this._textHeight*this.anchor.y,_e=0;_e<dt.total;_e++)dt.vertices[ve++]-=ne,dt.vertices[ve++]-=Jt,dt.vertices[ve++]-=ne,dt.vertices[ve++]-=Jt,dt.vertices[ve++]-=ne,dt.vertices[ve++]-=Jt,dt.vertices[ve++]-=ne,dt.vertices[ve++]-=Jt;this._maxLineHeight=T*n;var Fr=dt.mesh.geometry.getBuffer("aVertexPosition"),ii=dt.mesh.geometry.getBuffer("aTextureCoord"),Mr=dt.mesh.geometry.getIndex();Fr.data=dt.vertices,ii.data=dt.uvs,Mr.data=dt.indices,Fr.update(),ii.update(),Mr.update()}for(var b=0;b<s.length;b++)Ru.push(s[b])},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!on.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),r.prototype.destroy=function(t){var i=this._textureCache;for(var n in i){var a=i[n];a.destroy(),delete i[n]}this._textureCache=null,e.prototype.destroy.call(this,t)},r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r}(ie),Zg=function(){function e(){}return e.add=function(){je.setExtensionXhrType("fnt",je.XHR_RESPONSE_TYPE.TEXT)},e.use=function(r,t){var i=Pu(r.data);if(!i){t();return}for(var n=e.getBaseUrl(this,r),a=i.parse(r.data),s={},o=function(_){s[_.metadata.pageFile]=_.texture,Object.keys(s).length===a.page.length&&(r.bitmapFont=on.install(a,s,!0),t())},h=0;h<a.page.length;++h){var l=a.page[h].file,u=n+l,f=!1;for(var c in this.resources){var p=this.resources[c];if(p.url===u){p.metadata.pageFile=l,p.texture?o(p):p.onAfterMiddleware.add(o),f=!0;break}}if(!f){var m={crossOrigin:r.crossOrigin,loadType:je.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},r.metadata.imageMetadata),parentResource:r};this.add(u,m,o)}}},e.getBaseUrl=function(r,t){var i=t.isDataUrl?"":e.dirname(t.url);return t.isDataUrl&&(i==="."&&(i=""),r.baseUrl&&i&&r.baseUrl.charAt(r.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(r.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},e.dirname=function(r){var t=r.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===r?".":t===""?"/":t},e}();var io=function(e,r){return io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},io(e,r)};function Kg(e,r){io(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Jg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,cx=function(e){Kg(r,e);function r(t){t===void 0&&(t=1);var i=e.call(this,im,Jg,{uAlpha:1})||this;return i.alpha=t,i}return Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r}(Pr);var no=function(e,r){return no=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},no(e,r)};function Ou(e,r){no(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Qg=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function t1(e,r){var t=Math.ceil(e/2),i=Qg,n="",a;r?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var o=a.replace("%index%",s.toString());o=o.replace("%sampleIndex%",s-(t-1)+".0"),n+=o,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",e.toString()),i}var e1={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r1=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function i1(e){for(var r=e1[e],t=r.length,i=r1,n="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,o=0;o<e;o++){var h=a.replace("%index%",o.toString());s=o,o>=t&&(s=e-o-1),h=h.replace("%value%",r[s].toString()),n+=h,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",e.toString()),i}var Uu;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Uu||(Uu={}));var ku;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(ku||(ku={}));var Fu;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(Fu||(Fu={}));var Mu;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Mu||(Mu={}));var Lu;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Lu||(Lu={}));var Nu;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Nu||(Nu={}));var Du;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Du||(Du={}));var Bu;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(Bu||(Bu={}));var Gu;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Gu||(Gu={}));var Xu;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Xu||(Xu={}));var Hu;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Hu||(Hu={}));var ju;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(ju||(ju={}));var Vu;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Vu||(Vu={}));var hn;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(hn||(hn={}));var Yu;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Yu||(Yu={}));var Wu;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Wu||(Wu={}));var zu;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(zu||(zu={}));var qu;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(qu||(qu={}));var $u=function(e){Ou(r,e);function r(t,i,n,a,s){i===void 0&&(i=8),n===void 0&&(n=4),a===void 0&&(a=yt.FILTER_RESOLUTION),s===void 0&&(s=5);var o=this,h=t1(s,t),l=i1(s);return o=e.call(this,h,l)||this,o.horizontal=t,o.resolution=a,o._quality=0,o.quality=n,o.blur=i,o}return r.prototype.apply=function(t,i,n,a){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,n,a);else{var s=t.getFilterTexture(),o=t.renderer,h=i,l=s;this.state.blend=!1,t.applyFilter(this,h,l,hn.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(h,hn.BLIT),this.uniforms.uSampler=l;var f=l;l=h,h=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,n,a),t.returnFilterTexture(s)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),r}(Pr),dx=function(e){Ou(r,e);function r(t,i,n,a){t===void 0&&(t=8),i===void 0&&(i=4),n===void 0&&(n=yt.FILTER_RESOLUTION),a===void 0&&(a=5);var s=e.call(this)||this;return s.blurXFilter=new $u(!0,t,i,n,a),s.blurYFilter=new $u(!1,t,i,n,a),s.resolution=n,s.quality=i,s.blur=t,s.repeatEdgePixels=!1,s}return r.prototype.apply=function(t,i,n,a){var s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){var h=t.getFilterTexture();this.blurXFilter.apply(t,i,h,hn.CLEAR),this.blurYFilter.apply(t,h,n,a),t.returnFilterTexture(h)}else o?this.blurYFilter.apply(t,i,n,a):this.blurXFilter.apply(t,i,n,a)},r.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),r}(Pr);var ao=function(e,r){return ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},ao(e,r)};function n1(e,r){ao(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var a1=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Zu=function(e){n1(r,e);function r(){var t=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=e.call(this,zl,a1,i)||this,t.alpha=1,t}return r.prototype._loadMatrix=function(t,i){i===void 0&&(i=!1);var n=t;i&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},r.prototype._multiply=function(t,i,n){return t[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],t[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],t[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],t[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],t[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],t[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],t[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],t[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],t[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],t[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],t[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],t[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],t[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],t[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],t[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],t[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],t[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],t[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],t[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],t[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],t},r.prototype._colorMatrix=function(t){var i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},r.prototype.brightness=function(t,i){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.greyscale=function(t,i){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.blackAndWhite=function(t){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.hue=function(t,i){t=(t||0)/180*Math.PI;var n=Math.cos(t),a=Math.sin(t),s=Math.sqrt,o=1/3,h=s(o),l=n+(1-n)*o,u=o*(1-n)-h*a,f=o*(1-n)+h*a,c=o*(1-n)+h*a,p=n+o*(1-n),m=o*(1-n)-h*a,_=o*(1-n)-h*a,v=o*(1-n)+h*a,y=n+o*(1-n),E=[l,u,f,0,0,c,p,m,0,0,_,v,y,0,0,0,0,0,1,0];this._loadMatrix(E,i)},r.prototype.contrast=function(t,i){var n=(t||0)+1,a=-.5*(n-1),s=[n,0,0,0,a,0,n,0,0,a,0,0,n,0,a,0,0,0,1,0];this._loadMatrix(s,i)},r.prototype.saturate=function(t,i){t===void 0&&(t=0);var n=t*2/3+1,a=(n-1)*-.5,s=[n,a,a,0,0,a,n,a,0,0,a,a,n,0,0,0,0,0,1,0];this._loadMatrix(s,i)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.sepia=function(t){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.technicolor=function(t){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.polaroid=function(t){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.toBGR=function(t){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.kodachrome=function(t){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.browni=function(t){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.vintage=function(t){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.colorTone=function(t,i,n,a,s){t=t||.2,i=i||.15,n=n||16770432,a=a||3375104;var o=(n>>16&255)/255,h=(n>>8&255)/255,l=(n&255)/255,u=(a>>16&255)/255,f=(a>>8&255)/255,c=(a&255)/255,p=[.3,.59,.11,0,0,o,h,l,t,0,u,f,c,i,0,o-u,h-f,l-c,0,0];this._loadMatrix(p,s)},r.prototype.night=function(t,i){t=t||.1;var n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.predator=function(t,i){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.lsd=function(t){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(r.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r}(Pr);Zu.prototype.grayscale=Zu.prototype.greyscale;var so=function(e,r){return so=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},so(e,r)};function s1(e,r){so(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var o1=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,h1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,px=function(e){s1(r,e);function r(t,i){var n=this,a=new fe;return t.renderable=!1,n=e.call(this,h1,o1,{mapSampler:t._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=t,n.maskMatrix=a,i==null&&(i=20),n.scale=new he(i,i),n}return r.prototype.apply=function(t,i,n,a){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),h=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&h!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/h,this.uniforms.rotation[3]=s.d/h),t.applyFilter(this,i,n,a)},Object.defineProperty(r.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),r}(Pr);var oo=function(e,r){return oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},oo(e,r)};function l1(e,r){oo(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var u1=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,f1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vx=function(e){l1(r,e);function r(){return e.call(this,u1,f1)||this}return r}(Pr);var ho=function(e,r){return ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},ho(e,r)};function c1(e,r){ho(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var d1=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,_x=function(e){c1(r,e);function r(t,i){t===void 0&&(t=.5),i===void 0&&(i=Math.random());var n=e.call(this,zl,d1,{uNoise:0,uSeed:0})||this;return n.noise=t,n.seed=i,n}return Object.defineProperty(r.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),r}(Pr);var Ku=new fe;ce.prototype._cacheAsBitmap=!1;ce.prototype._cacheData=null;ce.prototype._cacheAsBitmapResolution=null;var p1=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(ce.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var r;e?(this._cacheData||(this._cacheData=new p1),r=this._cacheData,r.originalRender=this.render,r.originalRenderCanvas=this.renderCanvas,r.originalUpdateTransform=this.updateTransform,r.originalCalculateBounds=this.calculateBounds,r.originalGetLocalBounds=this.getLocalBounds,r.originalDestroy=this.destroy,r.originalContainsPoint=this.containsPoint,r.originalMask=this._mask,r.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(r=this._cacheData,r.sprite&&this._destroyCachedDisplayObject(),this.render=r.originalRender,this.renderCanvas=r.originalRenderCanvas,this.calculateBounds=r.originalCalculateBounds,this.getLocalBounds=r.originalGetLocalBounds,this.destroy=r.originalDestroy,this.updateTransform=r.originalUpdateTransform,this.containsPoint=r.originalContainsPoint,this._mask=r.originalMask,this.filterArea=r.originalFilterArea)}}}});ce.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};ce.prototype._initCachedDisplayObject=function(r){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.alpha;this.alpha=1,r.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(yt.RESOLUTION);var a=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),h=r.projection.transform,l=Hr.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||r.resolution}),u="cacheAsBitmap_"+pi();this._cacheData.textureCacheId=u,$t.addToCache(l.baseTexture,u),Et.addToCache(l,u);var f=this.transform.localTransform.copyTo(Ku).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:f,skipUpdateTransform:!1}),r.projection.transform=h,r.renderTexture.bind(a,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;var c=new ze(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(i.x/i.width),c.anchor.y=-(i.y/i.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}};ce.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};ce.prototype._initCachedDisplayObjectCanvas=function(r){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=r.context,a=r._projTransform;t.ceil(yt.RESOLUTION);var s=Hr.create({width:t.width,height:t.height}),o="cacheAsBitmap_"+pi();this._cacheData.textureCacheId=o,$t.addToCache(s.baseTexture,o),Et.addToCache(s,o);var h=Ku;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:s,clear:!0,transform:h,skipUpdateTransform:!1}),r.context=n,r._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var l=new ze(s);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(t.x/t.width),l.anchor.y=-(t.y/t.height),l.alpha=i,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};ce.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ce.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ce.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,$t.removeFromCache(this._cacheData.textureCacheId),Et.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ce.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};ce.prototype.name=null;ie.prototype.getChildByName=function(r,t){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===r)return this.children[i];if(t)for(var i=0,n=this.children.length;i<n;i++){var a=this.children[i];if(!!a.getChildByName){var s=this.children[i].getChildByName(r,!0);if(s)return s}}return null};ce.prototype.getGlobalPosition=function(r,t){return r===void 0&&(r=new he),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};var lo=function(e,r){return lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},lo(e,r)};function Ti(e,r){lo(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var v1=function(e){Ti(r,e);function r(t,i,n,a){t===void 0&&(t=100),i===void 0&&(i=100),n===void 0&&(n=10),a===void 0&&(a=10);var s=e.call(this)||this;return s.segWidth=n,s.segHeight=a,s.width=t,s.height=i,s.build(),s}return r.prototype.build=function(){for(var t=this.segWidth*this.segHeight,i=[],n=[],a=[],s=this.segWidth-1,o=this.segHeight-1,h=this.width/s,l=this.height/o,u=0;u<t;u++){var f=u%this.segWidth,c=u/this.segWidth|0;i.push(f*h,c*l),n.push(f/s,c/o)}for(var p=s*o,u=0;u<p;u++){var m=u%s,_=u/s|0,v=_*this.segWidth+m,y=_*this.segWidth+m+1,E=(_+1)*this.segWidth+m,T=(_+1)*this.segWidth+m+1;a.push(v,y,E,y,T,E)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},r}(aa),_1=function(e){Ti(r,e);function r(t,i,n){t===void 0&&(t=200),n===void 0&&(n=0);var a=e.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return a.points=i,a._width=t,a.textureScale=n,a.build(),a}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),r.prototype.build=function(){var t=this.points;if(!!t){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(t.length<1)){i.data.length/4!==t.length&&(i.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),a.data=new Uint16Array((t.length-1)*6));var s=n.data,o=a.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var h=0,l=t[0],u=this._width*this.textureScale,f=t.length,c=0;c<f;c++){var p=c*4;if(this.textureScale>0){var m=l.x-t[c].x,_=l.y-t[c].y,v=Math.sqrt(m*m+_*_);l=t[c],h+=v/u}else h=c/(f-1);s[p]=h,s[p+1]=0,s[p+2]=h,s[p+3]=1}for(var y=0,c=0;c<f-1;c++){var p=c*2;o[y++]=p,o[y++]=p+1,o[y++]=p+2,o[y++]=p+2,o[y++]=p+1,o[y++]=p+3}n.update(),a.update(),this.updateVertices()}}},r.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var i=t[0],n,a=0,s=0,o=this.buffers[0].data,h=t.length,l=0;l<h;l++){var u=t[l],f=l*4;l<t.length-1?n=t[l+1]:n=u,s=-(n.x-i.x),a=n.y-i.y;var c=Math.sqrt(a*a+s*s),p=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=c,s/=c,a*=p,s*=p,o[f]=u.x+a,o[f+1]=u.y+s,o[f+2]=u.x-a,o[f+3]=u.y-s,i=u}this.buffers[0].update()}},r.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},r}(aa),mx=function(e){Ti(r,e);function r(t,i,n){n===void 0&&(n=0);var a=this,s=new _1(t.height,i,n),o=new na(t);return n>0&&(t.baseTexture.wrapMode=ur.REPEAT),a=e.call(this,s,o)||this,a.autoUpdate=!0,a}return r.prototype._render=function(t){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),e.prototype._render.call(this,t)},r}(sn),m1=function(e){Ti(r,e);function r(t,i,n){var a=this,s=new v1(t.width,t.height,i,n),o=new na(Et.WHITE);return a=e.call(this,s,o)||this,a.texture=t,a}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},r.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},r}(sn),gx=function(e){Ti(r,e);function r(t,i,n,a,s){t===void 0&&(t=Et.EMPTY);var o=this,h=new aa(i,n,a);h.getBuffer("aVertexPosition").static=!1;var l=new na(t);return o=e.call(this,h,l,null,s)||this,o.autoUpdate=!0,o}return Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},r}(sn),oa=10,yx=function(e){Ti(r,e);function r(t,i,n,a,s){i===void 0&&(i=oa),n===void 0&&(n=oa),a===void 0&&(a=oa),s===void 0&&(s=oa);var o=e.call(this,Et.WHITE,4,4)||this;return o._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=i,o._rightWidth=a,o._topHeight=n,o._bottomHeight=s,o.texture=t,o}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype.updateHorizontalVertices=function(){var t=this.vertices,i=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},r.prototype.updateVerticalVertices=function(){var t=this.vertices,i=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},r.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,i=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,a=this._height>n?1:this._height/n,s=Math.min(i,a);return s},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),r.prototype._refresh=function(){var t=this.texture,i=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,a=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=a*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},r}(m1);var uo=function(e,r){return uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},uo(e,r)};function g1(e,r){uo(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var xx=function(e){g1(r,e);function r(t,i){i===void 0&&(i=!0);var n=e.call(this,t[0]instanceof Et?t[0]:t[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=t,n}return r.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(pe.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(pe.shared.add(this.update,this,dr.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(t){this.stop();var i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(t){var i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(t){if(!!this._playing){var i=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=i/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},r.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(Et.from(t[n]));return new r(i)},r.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(Et.from(t[n]));return new r(i)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Et)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<t.length;i++)this._textures.push(t[i].texture),this._durations.push(t[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(pe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(pe.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r}(ze);Ar.registerPlugin("accessibility",i_);Ar.registerPlugin("extract",dm);Ar.registerPlugin("interaction",l_);Ar.registerPlugin("particle",sg);Ar.registerPlugin("prepare",Lg);Ar.registerPlugin("batch",om);Ar.registerPlugin("tilingSprite",Xg);_r.registerPlugin(Zg);_r.registerPlugin(Mm);_r.registerPlugin(Jm);_r.registerPlugin(ig);_r.registerPlugin(Dg);Ki.registerPlugin(n_);Ki.registerPlugin(Om);var fo=class{constructor(){this.update(),window.addEventListener("resize",this.update.bind(this))}update(){this.width=window.innerWidth,this.height=window.innerHeight,this.center_x=this.width/2,this.center_y=this.height/2,this.radius=Math.min(this.center_x,this.center_y)}};function Ju(e){let r={value:e,isDown:!1,isUp:!0,press:()=>{},release:()=>{},unsubscribe:()=>{}},t=n=>{n.key===r.value&&(r.isUp&&r.press&&r.press(r,n),r.isDown=!0,r.isUp=!1,n.preventDefault())},i=n=>{n.key===r.value&&(r.isDown&&r.release&&r.release(r,n),r.isDown=!1,r.isUp=!0,n.preventDefault())};return window.addEventListener("keydown",t,!1),window.addEventListener("keyup",i,!1),r.unsubscribe=()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",i)},r}var co=(e,r)=>(e%r+r)%r,y1=e=>{let r=new Map;return t=>{if(r.has(t))return r.get(t);let i=e(t);return r.set(t,i),i}},Qu=y1(URL.createObjectURL),ln=(e,r,t)=>{e.removeChild(r),e.addChild(t)};var x1=[[0,1],[-1,0],[0,-1],[1,0]],tf=150,b1=[{delay:50,score:3,color:16757002,displayName:"Perfect",name:"perfect"},{delay:100,score:2,color:14688970,displayName:"Great",name:"great"},{delay:150,score:1,color:2867787,displayName:"Good",name:"good"}],w1=["v","t","i","m"],Zr=40,T1={lanes:4,ntime:500},ef=(e,{song:r,notes:t,bgTexture:i},{lanes:n,ntime:a}=T1)=>{let s=new ie;s.x=e.center_x,s.y=e.center_y;let o=new ze(i);o.x=-e.center_x,o.y=-e.center_y,o.width=e.width,o.height=e.height,o.alpha=.5,s.addChild(o);let h=new ie;h.rotation=Math.PI/4,s.addChild(h);let l=new Oe;l.beginFill(306420),l.drawCircle(0,0,e.radius),h.addChild(l);let u=new Oe;u.beginFill(306420),u.drawCircle(0,0,e.radius),h.addChild(u);function f(xt,ot,ft=0){xt.beginFill(ot),xt.drawRect(-Zr/2,ft,Zr,e.radius-ft)}let c=Math.PI*2/n,p=[],m=[];for(let xt=0;xt<n;xt++){let ot=new Oe;f(ot,16777215),ot.rotation=c*xt,h.addChild(ot),p.push(ot);let ft=new Oe;ft.beginFill(16777215),ft.drawRect(-Zr/2,0,Zr,e.radius),ft.rotation=c*xt,h.addChild(ft),m.push(ft)}p[0].mask=u;let _=e.radius*19/20,v=new Oe;v.lineStyle(10,317340,1),v.drawCircle(0,0,_),v.zIndex=100,h.addChild(v);let y=new Oe;y.beginFill(3582889),y.drawCircle(0,0,Zr/Math.sqrt(2)),y.zIndex=100,h.addChild(y);function E(xt,ot,ft){let Wt=(ot.end-ot.start)/a*_;xt.beginFill(ft),xt.drawRect(-Zr/2,0,Zr,Wt)}let T=new le("",{fontSize:40});T.y=300,s.addChild(T);let M=0;function b(xt,ot,ft=1e3){clearTimeout(M),T.text=xt,T.style.fill=ot,T.x=-T.width/2,M=setTimeout(()=>{T.text=""},ft)}let S=0,U=0,D=new le("0x",{fill:0,fontSize:40});D.x=-D.width/2,D.y=-300,s.addChild(D);function F(xt){U=xt,D.text=`${U}x`,D.x=-D.width/2,U>S&&(S=U)}let N=0,X=new le("0",{fill:0,fontSize:40});X.x=-X.width/2,X.y=-300+D.height,s.addChild(X);function $(xt){N=xt,X.text=`${N}`,X.x=-X.width/2}let Z={perfect:0,great:0,good:0,miss:0},ut=t.map(xt=>Object.assign({pressed:!1,done:!1,end:xt.start+50},xt)),W=new pe,Y=[];function at(){for(let[xt,ot]of w1.entries()){let ft=Ju(ot);ft.press=()=>{f(p[xt],991060,_);let Wt=dt.currentTime*1e3;for(let Dt of ut)Dt.lane==xt&&Math.abs(Wt-Dt.start)<=tf&&Dt.g&&(Dt.g.clear(),E(Dt.g,Dt,8094085),Dt.pressed=!0)},ft.release=()=>{f(p[xt],16777215,_);let Wt=dt.currentTime*1e3;for(let Dt of ut)if(Dt.lane==xt&&Dt.pressed&&Dt.g){Dt.pressed=!1;let de=!1,Tt=Math.abs(Wt-Dt.end);for(let{delay:Rt,score:zt,color:jt,displayName:kt,name:ue}of b1)if(Tt<=Rt){Dt.g.clear(),E(Dt.g,Dt,5287263),F(U+1),$(N+zt*U),Z[ue]++,b(kt,jt),de=!0;break}de||(Dt.g.clear(),E(Dt.g,Dt,11355973),F(0),Z.miss++,b("Miss",14689049)),Dt.done=!0}},Y.push(ft)}W.add(()=>{let xt=dt.currentTime*1e3;for(let ot of ut){if(xt+a>=ot.start&&!ot.g){let ft=new Oe;E(ft,ot,12305609),ft.rotation=c*ot.lane,ft.mask=m[ot.lane],h.addChild(ft),ot.g=ft}if(ot.g)if(xt-a/20<=ot.end){let Wt=x1[ot.lane],Dt=(a+xt-ot.end)/a*_;ot.g.x=Wt[0]*Dt,ot.g.y=Wt[1]*Dt}else h.removeChild(ot.g);xt-ot.start>=tf&&!ot.pressed&&!ot.done&&ot.g&&(ot.g.clear(),E(ot.g,ot,11355973),F(0),Z.miss++,b("Miss",14689049),ot.done=!0)}h.sortChildren()}),W.start()}let mt=URL.createObjectURL(r),dt=new Audio(mt);dt.onplay=at,dt.play();let vt=new Promise(xt=>{dt.onended=xt}).then(()=>{for(let xt of Y)xt.unsubscribe();return W.stop(),{maxCombo:S,score:N,counts:Z}});return{container:s,done:vt}},rf=(e,r,t)=>{let i=new ie,n=new ze(r.bgTexture);n.width=e.width,n.height=e.height,n.alpha=.5,i.addChild(n);let a=new ie,s=new le(r.title,{fill:16777215});a.addChild(s);let o=new ie;o.y=s.height+80,a.addChild(o);let h=[new le(`Perfect: ${t.counts.perfect}`,{fill:16777215}),new le(`Great: ${t.counts.great}`,{fill:16777215}),new le(`Good: ${t.counts.good}`,{fill:16777215}),new le(`Miss: ${t.counts.miss}`,{fill:16777215}),new le(`Score: ${t.score}`,{fill:16777215}),new le(`Max Combo: ${t.maxCombo}`,{fill:16777215})],l={y:0,height:0};for(let c of h)c.y=l.y+l.height,o.addChild(c),l=c;let u=new le("Back To Menu",{fill:16777215,fontWeight:"bold"});u.interactive=!0,u.buttonMode=!0,u.x=a.width/2-u.width/2,u.y=o.y+o.height+40,a.addChild(u);let f=new Promise(c=>{u.on("click",c)});return a.x=e.center_x-a.width/2,a.y=e.center_y-a.height/2,i.addChild(a),{container:i,done:f}};var E1={},un=15,po=30,vo=19,S1=29,ha=256,_o=ha+1+S1,nf=2*_o+1,fn=256,I1=7,af=16,sf=17,of=18,mo=8*2,la=-1,P1=1,ua=2,A1=0,Ei=0,hf=1,C1=3,Ie=4,qe=0,lf=1,fa=2,$e=-2,R1=-3,Si=-5;function uf(e){return e.map(([r,t])=>new Array(r).fill(t,0,r)).flat()}var ff=[0,1,2,3].concat(...uf([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Zt(){let e=this;function r(n){let a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,l=e.stat_desc.max_length,u,f,c,p,m,_,v=0;for(p=0;p<=un;p++)n.bl_count[p]=0;for(a[n.heap[n.heap_max]*2+1]=0,u=n.heap_max+1;u<nf;u++)f=n.heap[u],p=a[a[f*2+1]*2+1]+1,p>l&&(p=l,v++),a[f*2+1]=p,!(f>e.max_code)&&(n.bl_count[p]++,m=0,f>=h&&(m=o[f-h]),_=a[f*2],n.opt_len+=_*(p+m),s&&(n.static_len+=_*(s[f*2+1]+m)));if(v!==0){do{for(p=l-1;n.bl_count[p]===0;)p--;n.bl_count[p]--,n.bl_count[p+1]+=2,n.bl_count[l]--,v-=2}while(v>0);for(p=l;p!==0;p--)for(f=n.bl_count[p];f!==0;)c=n.heap[--u],!(c>e.max_code)&&(a[c*2+1]!=p&&(n.opt_len+=(p-a[c*2+1])*a[c*2],a[c*2+1]=p),f--)}}function t(n,a){let s=0;do s|=n&1,n>>>=1,s<<=1;while(--a>0);return s>>>1}function i(n,a,s){let o=[],h=0,l,u,f;for(l=1;l<=un;l++)o[l]=h=h+s[l-1]<<1;for(u=0;u<=a;u++)f=n[u*2+1],f!==0&&(n[u*2]=t(o[f]++,f))}e.build_tree=function(n){let a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.elems,h,l,u=-1,f;for(n.heap_len=0,n.heap_max=nf,h=0;h<o;h++)a[h*2]!==0?(n.heap[++n.heap_len]=u=h,n.depth[h]=0):a[h*2+1]=0;for(;n.heap_len<2;)f=n.heap[++n.heap_len]=u<2?++u:0,a[f*2]=1,n.depth[f]=0,n.opt_len--,s&&(n.static_len-=s[f*2+1]);for(e.max_code=u,h=Math.floor(n.heap_len/2);h>=1;h--)n.pqdownheap(a,h);f=o;do h=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(a,1),l=n.heap[1],n.heap[--n.heap_max]=h,n.heap[--n.heap_max]=l,a[f*2]=a[h*2]+a[l*2],n.depth[f]=Math.max(n.depth[h],n.depth[l])+1,a[h*2+1]=a[l*2+1]=f,n.heap[1]=f++,n.pqdownheap(a,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],r(n),i(a,e.max_code,n.bl_count)}}Zt._length_code=[0,1,2,3,4,5,6,7].concat(...uf([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]]));Zt.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];Zt.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];Zt.d_code=function(e){return e<256?ff[e]:ff[256+(e>>>7)]};Zt.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];Zt.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];Zt.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];Zt.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function ge(e,r,t,i,n){let a=this;a.static_tree=e,a.extra_bits=r,a.extra_base=t,a.elems=i,a.max_length=n}ge.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8];ge.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5];ge.static_l_desc=new ge(ge.static_ltree,Zt.extra_lbits,ha+1,_o,un);ge.static_d_desc=new ge(ge.static_dtree,Zt.extra_dbits,0,po,un);ge.static_bl_desc=new ge(null,Zt.extra_blbits,0,vo,I1);var O1=9,U1=8;function er(e,r,t,i,n){let a=this;a.good_length=e,a.max_lazy=r,a.nice_length=t,a.max_chain=i,a.func=n}var cf=0,ca=1,Kr=2,Ze=[new er(0,0,0,0,cf),new er(4,4,8,4,ca),new er(4,5,16,8,ca),new er(4,6,32,32,ca),new er(4,4,16,16,Kr),new er(8,16,32,32,Kr),new er(8,16,128,128,Kr),new er(8,32,128,256,Kr),new er(32,128,258,1024,Kr),new er(32,258,258,4096,Kr)],da=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Be=0,pa=1,cn=2,va=3,k1=32,go=42,_a=113,dn=666,yo=8,F1=0,xo=1,M1=2,Qt=3,ma=258,Ue=ma+Qt+1;function df(e,r,t,i){let n=e[r*2],a=e[t*2];return n<a||n==a&&i[r]<=i[t]}function L1(){let e=this,r,t,i,n,a,s,o,h,l,u,f,c,p,m,_,v,y,E,T,M,b,S,U,D,F,N,X,$,Z,ut,W,Y,at,mt=new Zt,dt=new Zt,vt=new Zt;e.depth=[];let xt,ot,ft,Wt,Dt,de,Tt,Rt;e.bl_count=[],e.heap=[],W=[],Y=[],at=[];function zt(){l=2*a,f[p-1]=0;for(let w=0;w<p-1;w++)f[w]=0;N=Ze[X].max_lazy,Z=Ze[X].good_length,ut=Ze[X].nice_length,F=Ze[X].max_chain,b=0,y=0,U=0,E=D=Qt-1,M=0,c=0}function jt(){let w;for(w=0;w<_o;w++)W[w*2]=0;for(w=0;w<po;w++)Y[w*2]=0;for(w=0;w<vo;w++)at[w*2]=0;W[fn*2]=1,e.opt_len=e.static_len=0,ft=Dt=0}function kt(){mt.dyn_tree=W,mt.stat_desc=ge.static_l_desc,dt.dyn_tree=Y,dt.stat_desc=ge.static_d_desc,vt.dyn_tree=at,vt.stat_desc=ge.static_bl_desc,Tt=0,Rt=0,de=8,jt()}e.pqdownheap=function(w,P){let O=e.heap,C=O[P],B=P<<1;for(;B<=e.heap_len&&(B<e.heap_len&&df(w,O[B+1],O[B],e.depth)&&B++,!df(w,C,O[B],e.depth));)O[P]=O[B],P=B,B<<=1;O[P]=C};function ue(w,P){let O=-1,C,B=w[0*2+1],H=0,z=7,Q=4;B===0&&(z=138,Q=3),w[(P+1)*2+1]=65535;for(let _t=0;_t<=P;_t++)C=B,B=w[(_t+1)*2+1],!(++H<z&&C==B)&&(H<Q?at[C*2]+=H:C!==0?(C!=O&&at[C*2]++,at[af*2]++):H<=10?at[sf*2]++:at[of*2]++,H=0,O=C,B===0?(z=138,Q=3):C==B?(z=6,Q=3):(z=7,Q=4))}function Se(){let w;for(ue(W,mt.max_code),ue(Y,dt.max_code),vt.build_tree(e),w=vo-1;w>=3&&at[Zt.bl_order[w]*2+1]===0;w--);return e.opt_len+=3*(w+1)+5+5+4,w}function Ut(w){e.pending_buf[e.pending++]=w}function ve(w){Ut(w&255),Ut(w>>>8&255)}function ne(w){Ut(w>>8&255),Ut(w&255&255)}function Jt(w,P){let O,C=P;Rt>mo-C?(O=w,Tt|=O<<Rt&65535,ve(Tt),Tt=O>>>mo-Rt,Rt+=C-mo):(Tt|=w<<Rt&65535,Rt+=C)}function _e(w,P){let O=w*2;Jt(P[O]&65535,P[O+1]&65535)}function Fr(w,P){let O,C=-1,B,H=w[0*2+1],z=0,Q=7,_t=4;for(H===0&&(Q=138,_t=3),O=0;O<=P;O++)if(B=H,H=w[(O+1)*2+1],!(++z<Q&&B==H)){if(z<_t)do _e(B,at);while(--z!=0);else B!==0?(B!=C&&(_e(B,at),z--),_e(af,at),Jt(z-3,2)):z<=10?(_e(sf,at),Jt(z-3,3)):(_e(of,at),Jt(z-11,7));z=0,C=B,H===0?(Q=138,_t=3):B==H?(Q=6,_t=3):(Q=7,_t=4)}}function ii(w,P,O){let C;for(Jt(w-257,5),Jt(P-1,5),Jt(O-4,4),C=0;C<O;C++)Jt(at[Zt.bl_order[C]*2+1],3);Fr(W,w-1),Fr(Y,P-1)}function Mr(){Rt==16?(ve(Tt),Tt=0,Rt=0):Rt>=8&&(Ut(Tt&255),Tt>>>=8,Rt-=8)}function Sa(){Jt(xo<<1,3),_e(fn,ge.static_ltree),Mr(),1+de+10-Rt<9&&(Jt(xo<<1,3),_e(fn,ge.static_ltree),Mr()),de=7}function ar(w,P){let O,C,B;if(e.pending_buf[Wt+ft*2]=w>>>8&255,e.pending_buf[Wt+ft*2+1]=w&255,e.pending_buf[xt+ft]=P&255,ft++,w===0?W[P*2]++:(Dt++,w--,W[(Zt._length_code[P]+ha+1)*2]++,Y[Zt.d_code(w)*2]++),(ft&8191)==0&&X>2){for(O=ft*8,C=b-y,B=0;B<po;B++)O+=Y[B*2]*(5+Zt.extra_dbits[B]);if(O>>>=3,Dt<Math.floor(ft/2)&&O<Math.floor(C/2))return!0}return ft==ot-1}function xn(w,P){let O,C,B=0,H,z;if(ft!==0)do O=e.pending_buf[Wt+B*2]<<8&65280|e.pending_buf[Wt+B*2+1]&255,C=e.pending_buf[xt+B]&255,B++,O===0?_e(C,w):(H=Zt._length_code[C],_e(H+ha+1,w),z=Zt.extra_lbits[H],z!==0&&(C-=Zt.base_length[H],Jt(C,z)),O--,H=Zt.d_code(O),_e(H,P),z=Zt.extra_dbits[H],z!==0&&(O-=Zt.base_dist[H],Jt(O,z)));while(B<ft);_e(fn,w),de=w[fn*2+1]}function Oi(){Rt>8?ve(Tt):Rt>0&&Ut(Tt&255),Tt=0,Rt=0}function Ia(w,P,O){Oi(),de=8,O&&(ve(P),ve(~P)),e.pending_buf.set(h.subarray(w,w+P),e.pending),e.pending+=P}function bn(w,P,O){Jt((F1<<1)+(O?1:0),3),Ia(w,P,!0)}function Pa(w,P,O){let C,B,H=0;X>0?(mt.build_tree(e),dt.build_tree(e),H=Se(),C=e.opt_len+3+7>>>3,B=e.static_len+3+7>>>3,B<=C&&(C=B)):C=B=P+5,P+4<=C&&w!=-1?bn(w,P,O):B==C?(Jt((xo<<1)+(O?1:0),3),xn(ge.static_ltree,ge.static_dtree)):(Jt((M1<<1)+(O?1:0),3),ii(mt.max_code+1,dt.max_code+1,H+1),xn(W,Y)),jt(),O&&Oi()}function Ge(w){Pa(y>=0?y:-1,b-y,w),y=b,r.flush_pending()}function Ui(){let w,P,O,C;do{if(C=l-U-b,C===0&&b===0&&U===0)C=a;else if(C==-1)C--;else if(b>=a+a-Ue){h.set(h.subarray(a,a+a),0),S-=a,b-=a,y-=a,w=p,O=w;do P=f[--O]&65535,f[O]=P>=a?P-a:0;while(--w!=0);w=a,O=w;do P=u[--O]&65535,u[O]=P>=a?P-a:0;while(--w!=0);C+=a}if(r.avail_in===0)return;w=r.read_buf(h,b+U,C),U+=w,U>=Qt&&(c=h[b]&255,c=(c<<v^h[b+1]&255)&_)}while(U<Ue&&r.avail_in!==0)}function x(w){let P=65535,O;for(P>i-5&&(P=i-5);;){if(U<=1){if(Ui(),U===0&&w==Ei)return Be;if(U===0)break}if(b+=U,U=0,O=y+P,(b===0||b>=O)&&(U=b-O,b=O,Ge(!1),r.avail_out===0)||b-y>=a-Ue&&(Ge(!1),r.avail_out===0))return Be}return Ge(w==Ie),r.avail_out===0?w==Ie?cn:Be:w==Ie?va:pa}function g(w){let P=F,O=b,C,B,H=D,z=b>a-Ue?b-(a-Ue):0,Q=ut,_t=o,L=b+ma,K=h[O+H-1],A=h[O+H];D>=Z&&(P>>=2),Q>U&&(Q=U);do if(C=w,!(h[C+H]!=A||h[C+H-1]!=K||h[C]!=h[O]||h[++C]!=h[O+1])){O+=2,C++;do;while(h[++O]==h[++C]&&h[++O]==h[++C]&&h[++O]==h[++C]&&h[++O]==h[++C]&&h[++O]==h[++C]&&h[++O]==h[++C]&&h[++O]==h[++C]&&h[++O]==h[++C]&&O<L);if(B=ma-(L-O),O=L-ma,B>H){if(S=w,H=B,B>=Q)break;K=h[O+H-1],A=h[O+H]}}while((w=u[w&_t]&65535)>z&&--P!=0);return H<=U?H:U}function d(w){let P=0,O;for(;;){if(U<Ue){if(Ui(),U<Ue&&w==Ei)return Be;if(U===0)break}if(U>=Qt&&(c=(c<<v^h[b+(Qt-1)]&255)&_,P=f[c]&65535,u[b&o]=f[c],f[c]=b),P!==0&&(b-P&65535)<=a-Ue&&$!=ua&&(E=g(P)),E>=Qt)if(O=ar(b-S,E-Qt),U-=E,E<=N&&U>=Qt){E--;do b++,c=(c<<v^h[b+(Qt-1)]&255)&_,P=f[c]&65535,u[b&o]=f[c],f[c]=b;while(--E!=0);b++}else b+=E,E=0,c=h[b]&255,c=(c<<v^h[b+1]&255)&_;else O=ar(0,h[b]&255),U--,b++;if(O&&(Ge(!1),r.avail_out===0))return Be}return Ge(w==Ie),r.avail_out===0?w==Ie?cn:Be:w==Ie?va:pa}function I(w){let P=0,O,C;for(;;){if(U<Ue){if(Ui(),U<Ue&&w==Ei)return Be;if(U===0)break}if(U>=Qt&&(c=(c<<v^h[b+(Qt-1)]&255)&_,P=f[c]&65535,u[b&o]=f[c],f[c]=b),D=E,T=S,E=Qt-1,P!==0&&D<N&&(b-P&65535)<=a-Ue&&($!=ua&&(E=g(P)),E<=5&&($==P1||E==Qt&&b-S>4096)&&(E=Qt-1)),D>=Qt&&E<=D){C=b+U-Qt,O=ar(b-1-T,D-Qt),U-=D-1,D-=2;do++b<=C&&(c=(c<<v^h[b+(Qt-1)]&255)&_,P=f[c]&65535,u[b&o]=f[c],f[c]=b);while(--D!=0);if(M=0,E=Qt-1,b++,O&&(Ge(!1),r.avail_out===0))return Be}else if(M!==0){if(O=ar(0,h[b-1]&255),O&&Ge(!1),b++,U--,r.avail_out===0)return Be}else M=1,b++,U--}return M!==0&&(O=ar(0,h[b-1]&255),M=0),Ge(w==Ie),r.avail_out===0?w==Ie?cn:Be:w==Ie?va:pa}function R(w){return w.total_in=w.total_out=0,w.msg=null,e.pending=0,e.pending_out=0,t=_a,n=Ei,kt(),zt(),qe}e.deflateInit=function(w,P,O,C,B,H){return C||(C=yo),B||(B=U1),H||(H=A1),w.msg=null,P==la&&(P=6),B<1||B>O1||C!=yo||O<9||O>15||P<0||P>9||H<0||H>ua?$e:(w.dstate=e,s=O,a=1<<s,o=a-1,m=B+7,p=1<<m,_=p-1,v=Math.floor((m+Qt-1)/Qt),h=new Uint8Array(a*2),u=[],f=[],ot=1<<B+6,e.pending_buf=new Uint8Array(ot*4),i=ot*4,Wt=Math.floor(ot/2),xt=(1+2)*ot,X=P,$=H,R(w))},e.deflateEnd=function(){return t!=go&&t!=_a&&t!=dn?$e:(e.pending_buf=null,f=null,u=null,h=null,e.dstate=null,t==_a?R1:qe)},e.deflateParams=function(w,P,O){let C=qe;return P==la&&(P=6),P<0||P>9||O<0||O>ua?$e:(Ze[X].func!=Ze[P].func&&w.total_in!==0&&(C=w.deflate(hf)),X!=P&&(X=P,N=Ze[X].max_lazy,Z=Ze[X].good_length,ut=Ze[X].nice_length,F=Ze[X].max_chain),$=O,C)},e.deflateSetDictionary=function(w,P,O){let C=O,B,H=0;if(!P||t!=go)return $e;if(C<Qt)return qe;for(C>a-Ue&&(C=a-Ue,H=O-C),h.set(P.subarray(H,H+C),0),b=C,y=C,c=h[0]&255,c=(c<<v^h[1]&255)&_,B=0;B<=C-Qt;B++)c=(c<<v^h[B+(Qt-1)]&255)&_,u[B&o]=f[c],f[c]=B;return qe},e.deflate=function(w,P){let O,C,B,H,z;if(P>Ie||P<0)return $e;if(!w.next_out||!w.next_in&&w.avail_in!==0||t==dn&&P!=Ie)return w.msg=da[fa-$e],$e;if(w.avail_out===0)return w.msg=da[fa-Si],Si;if(r=w,H=n,n=P,t==go&&(C=yo+(s-8<<4)<<8,B=(X-1&255)>>1,B>3&&(B=3),C|=B<<6,b!==0&&(C|=k1),C+=31-C%31,t=_a,ne(C)),e.pending!==0){if(r.flush_pending(),r.avail_out===0)return n=-1,qe}else if(r.avail_in===0&&P<=H&&P!=Ie)return r.msg=da[fa-Si],Si;if(t==dn&&r.avail_in!==0)return w.msg=da[fa-Si],Si;if(r.avail_in!==0||U!==0||P!=Ei&&t!=dn){switch(z=-1,Ze[X].func){case cf:z=x(P);break;case ca:z=d(P);break;case Kr:z=I(P);break}if((z==cn||z==va)&&(t=dn),z==Be||z==cn)return r.avail_out===0&&(n=-1),qe;if(z==pa){if(P==hf)Sa();else if(bn(0,0,!1),P==C1)for(O=0;O<p;O++)f[O]=0;if(r.flush_pending(),r.avail_out===0)return n=-1,qe}}return P!=Ie?qe:lf}}function pf(){let e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}pf.prototype={deflateInit:function(e,r){let t=this;return t.dstate=new L1,r||(r=un),t.dstate.deflateInit(t,e,r)},deflate:function(e){let r=this;return r.dstate?r.dstate.deflate(r,e):$e},deflateEnd:function(){let e=this;if(!e.dstate)return $e;let r=e.dstate.deflateEnd();return e.dstate=null,r},deflateParams:function(e,r){let t=this;return t.dstate?t.dstate.deflateParams(t,e,r):$e},deflateSetDictionary:function(e,r){let t=this;return t.dstate?t.dstate.deflateSetDictionary(t,e,r):$e},read_buf:function(e,r,t){let i=this,n=i.avail_in;return n>t&&(n=t),n===0?0:(i.avail_in-=n,e.set(i.next_in.subarray(i.next_in_index,i.next_in_index+n),r),i.next_in_index+=n,i.total_in+=n,n)},flush_pending:function(){let e=this,r=e.dstate.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+r),e.next_out_index),e.next_out_index+=r,e.dstate.pending_out+=r,e.total_out+=r,e.avail_out-=r,e.dstate.pending-=r,e.dstate.pending===0&&(e.dstate.pending_out=0))}};function D1(e){let r=this,t=new pf,i=N1(e&&e.chunkSize?e.chunkSize:64*1024),n=Ei,a=new Uint8Array(i),s=e?e.level:la;typeof s=="undefined"&&(s=la),t.deflateInit(s),t.next_out=a,r.append=function(o,h){let l,u,f=0,c=0,p=0,m=[];if(!!o.length){t.next_in_index=0,t.next_in=o,t.avail_in=o.length;do{if(t.next_out_index=0,t.avail_out=i,l=t.deflate(n),l!=qe)throw new Error("deflating: "+t.msg);t.next_out_index&&(t.next_out_index==i?m.push(new Uint8Array(a)):m.push(a.slice(0,t.next_out_index))),p+=t.next_out_index,h&&t.next_in_index>0&&t.next_in_index!=f&&(h(t.next_in_index),f=t.next_in_index)}while(t.avail_in>0||t.avail_out===0);return m.length>1?(u=new Uint8Array(p),m.forEach(function(_){u.set(_,c),c+=_.length})):u=m[0]||new Uint8Array(0),u}},r.flush=function(){let o,h,l=0,u=0,f=[];do{if(t.next_out_index=0,t.avail_out=i,o=t.deflate(Ie),o!=lf&&o!=qe)throw new Error("deflating: "+t.msg);i-t.avail_out>0&&f.push(a.slice(0,t.next_out_index)),u+=t.next_out_index}while(t.avail_in>0||t.avail_out===0);return t.deflateEnd(),h=new Uint8Array(u),f.forEach(function(c){h.set(c,l),l+=c.length}),h}}function N1(e){return e+5*(Math.floor(e/16383)+1)}var B1=15,Xt=0,mr=1,G1=2,Pe=-2,Kt=-3,vf=-4,gr=-5,ke=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],_f=1440,X1=0,H1=4,j1=9,V1=5,Y1=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],W1=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],z1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],q1=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],$1=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Z1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Or=15;function bo(){let e=this,r,t,i,n,a,s;function o(l,u,f,c,p,m,_,v,y,E,T){let M,b,S,U,D,F,N,X,$,Z,ut,W,Y,at,mt;Z=0,D=f;do i[l[u+Z]]++,Z++,D--;while(D!==0);if(i[0]==f)return _[0]=-1,v[0]=0,Xt;for(X=v[0],F=1;F<=Or&&i[F]===0;F++);for(N=F,X<F&&(X=F),D=Or;D!==0&&i[D]===0;D--);for(S=D,X>D&&(X=D),v[0]=X,at=1<<F;F<D;F++,at<<=1)if((at-=i[F])<0)return Kt;if((at-=i[D])<0)return Kt;for(i[D]+=at,s[1]=F=0,Z=1,Y=2;--D!=0;)s[Y]=F+=i[Z],Y++,Z++;D=0,Z=0;do(F=l[u+Z])!==0&&(T[s[F]++]=D),Z++;while(++D<f);for(f=s[S],s[0]=D=0,Z=0,U=-1,W=-X,a[0]=0,ut=0,mt=0;N<=S;N++)for(M=i[N];M--!=0;){for(;N>W+X;){if(U++,W+=X,mt=S-W,mt=mt>X?X:mt,(b=1<<(F=N-W))>M+1&&(b-=M+1,Y=N,F<mt))for(;++F<mt&&!((b<<=1)<=i[++Y]);)b-=i[Y];if(mt=1<<F,E[0]+mt>_f)return Kt;a[U]=ut=E[0],E[0]+=mt,U!==0?(s[U]=D,n[0]=F,n[1]=X,F=D>>>W-X,n[2]=ut-a[U-1]-F,y.set(n,(a[U-1]+F)*3)):_[0]=ut}for(n[1]=N-W,Z>=f?n[0]=128+64:T[Z]<c?(n[0]=T[Z]<256?0:32+64,n[2]=T[Z++]):(n[0]=m[T[Z]-c]+16+64,n[2]=p[T[Z++]-c]),b=1<<N-W,F=D>>>W;F<mt;F+=b)y.set(n,(ut+F)*3);for(F=1<<N-1;(D&F)!=0;F>>>=1)D^=F;for(D^=F,$=(1<<W)-1;(D&$)!=s[U];)U--,W-=X,$=(1<<W)-1}return at!==0&&S!=1?gr:Xt}function h(l){let u;for(r||(r=[],t=[],i=new Int32Array(Or+1),n=[],a=new Int32Array(Or),s=new Int32Array(Or+1)),t.length<l&&(t=[]),u=0;u<l;u++)t[u]=0;for(u=0;u<Or+1;u++)i[u]=0;for(u=0;u<3;u++)n[u]=0;a.set(i.subarray(0,Or),0),s.set(i.subarray(0,Or+1),0)}e.inflate_trees_bits=function(l,u,f,c,p){let m;return h(19),r[0]=0,m=o(l,0,19,19,null,null,f,u,c,r,t),m==Kt?p.msg="oversubscribed dynamic bit lengths tree":(m==gr||u[0]===0)&&(p.msg="incomplete dynamic bit lengths tree",m=Kt),m},e.inflate_trees_dynamic=function(l,u,f,c,p,m,_,v,y){let E;return h(288),r[0]=0,E=o(f,0,l,257,z1,q1,m,c,v,r,t),E!=Xt||c[0]===0?(E==Kt?y.msg="oversubscribed literal/length tree":E!=vf&&(y.msg="incomplete literal/length tree",E=Kt),E):(h(288),E=o(f,l,u,0,$1,Z1,_,p,v,r,t),E!=Xt||p[0]===0&&l>257?(E==Kt?y.msg="oversubscribed distance tree":E==gr?(y.msg="incomplete distance tree",E=Kt):E!=vf&&(y.msg="empty distance tree with lengths",E=Kt),E):Xt)}}bo.inflate_trees_fixed=function(e,r,t,i){return e[0]=j1,r[0]=V1,t[0]=Y1,i[0]=W1,Xt};var ga=0,mf=1,gf=2,yf=3,xf=4,bf=5,wf=6,wo=7,Tf=8,ya=9;function K1(){let e=this,r,t=0,i,n=0,a=0,s=0,o=0,h=0,l=0,u=0,f,c=0,p,m=0;function _(v,y,E,T,M,b,S,U){let D,F,N,X,$,Z,ut,W,Y,at,mt,dt,vt,xt,ot,ft;ut=U.next_in_index,W=U.avail_in,$=S.bitb,Z=S.bitk,Y=S.write,at=Y<S.read?S.read-Y-1:S.end-Y,mt=ke[v],dt=ke[y];do{for(;Z<20;)W--,$|=(U.read_byte(ut++)&255)<<Z,Z+=8;if(D=$&mt,F=E,N=T,ft=(N+D)*3,(X=F[ft])===0){$>>=F[ft+1],Z-=F[ft+1],S.window[Y++]=F[ft+2],at--;continue}do{if($>>=F[ft+1],Z-=F[ft+1],(X&16)!=0){for(X&=15,vt=F[ft+2]+($&ke[X]),$>>=X,Z-=X;Z<15;)W--,$|=(U.read_byte(ut++)&255)<<Z,Z+=8;D=$&dt,F=M,N=b,ft=(N+D)*3,X=F[ft];do if($>>=F[ft+1],Z-=F[ft+1],(X&16)!=0){for(X&=15;Z<X;)W--,$|=(U.read_byte(ut++)&255)<<Z,Z+=8;if(xt=F[ft+2]+($&ke[X]),$>>=X,Z-=X,at-=vt,Y>=xt)ot=Y-xt,Y-ot>0&&2>Y-ot?(S.window[Y++]=S.window[ot++],S.window[Y++]=S.window[ot++],vt-=2):(S.window.set(S.window.subarray(ot,ot+2),Y),Y+=2,ot+=2,vt-=2);else{ot=Y-xt;do ot+=S.end;while(ot<0);if(X=S.end-ot,vt>X){if(vt-=X,Y-ot>0&&X>Y-ot)do S.window[Y++]=S.window[ot++];while(--X!=0);else S.window.set(S.window.subarray(ot,ot+X),Y),Y+=X,ot+=X,X=0;ot=0}}if(Y-ot>0&&vt>Y-ot)do S.window[Y++]=S.window[ot++];while(--vt!=0);else S.window.set(S.window.subarray(ot,ot+vt),Y),Y+=vt,ot+=vt,vt=0;break}else if((X&64)==0)D+=F[ft+2],D+=$&ke[X],ft=(N+D)*3,X=F[ft];else return U.msg="invalid distance code",vt=U.avail_in-W,vt=Z>>3<vt?Z>>3:vt,W+=vt,ut-=vt,Z-=vt<<3,S.bitb=$,S.bitk=Z,U.avail_in=W,U.total_in+=ut-U.next_in_index,U.next_in_index=ut,S.write=Y,Kt;while(!0);break}if((X&64)==0){if(D+=F[ft+2],D+=$&ke[X],ft=(N+D)*3,(X=F[ft])===0){$>>=F[ft+1],Z-=F[ft+1],S.window[Y++]=F[ft+2],at--;break}}else return(X&32)!=0?(vt=U.avail_in-W,vt=Z>>3<vt?Z>>3:vt,W+=vt,ut-=vt,Z-=vt<<3,S.bitb=$,S.bitk=Z,U.avail_in=W,U.total_in+=ut-U.next_in_index,U.next_in_index=ut,S.write=Y,mr):(U.msg="invalid literal/length code",vt=U.avail_in-W,vt=Z>>3<vt?Z>>3:vt,W+=vt,ut-=vt,Z-=vt<<3,S.bitb=$,S.bitk=Z,U.avail_in=W,U.total_in+=ut-U.next_in_index,U.next_in_index=ut,S.write=Y,Kt)}while(!0)}while(at>=258&&W>=10);return vt=U.avail_in-W,vt=Z>>3<vt?Z>>3:vt,W+=vt,ut-=vt,Z-=vt<<3,S.bitb=$,S.bitk=Z,U.avail_in=W,U.total_in+=ut-U.next_in_index,U.next_in_index=ut,S.write=Y,Xt}e.init=function(v,y,E,T,M,b){r=ga,l=v,u=y,f=E,c=T,p=M,m=b,i=null},e.proc=function(v,y,E){let T,M,b,S=0,U=0,D=0,F,N,X,$;for(D=y.next_in_index,F=y.avail_in,S=v.bitb,U=v.bitk,N=v.write,X=N<v.read?v.read-N-1:v.end-N;;)switch(r){case ga:if(X>=258&&F>=10&&(v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,E=_(l,u,f,c,p,m,v,y),D=y.next_in_index,F=y.avail_in,S=v.bitb,U=v.bitk,N=v.write,X=N<v.read?v.read-N-1:v.end-N,E!=Xt)){r=E==mr?wo:ya;break}a=l,i=f,n=c,r=mf;case mf:for(T=a;U<T;){if(F!==0)E=Xt;else return v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);F--,S|=(y.read_byte(D++)&255)<<U,U+=8}if(M=(n+(S&ke[T]))*3,S>>>=i[M+1],U-=i[M+1],b=i[M],b===0){s=i[M+2],r=wf;break}if((b&16)!=0){o=b&15,t=i[M+2],r=gf;break}if((b&64)==0){a=b,n=M/3+i[M+2];break}if((b&32)!=0){r=wo;break}return r=ya,y.msg="invalid literal/length code",E=Kt,v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);case gf:for(T=o;U<T;){if(F!==0)E=Xt;else return v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);F--,S|=(y.read_byte(D++)&255)<<U,U+=8}t+=S&ke[T],S>>=T,U-=T,a=u,i=p,n=m,r=yf;case yf:for(T=a;U<T;){if(F!==0)E=Xt;else return v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);F--,S|=(y.read_byte(D++)&255)<<U,U+=8}if(M=(n+(S&ke[T]))*3,S>>=i[M+1],U-=i[M+1],b=i[M],(b&16)!=0){o=b&15,h=i[M+2],r=xf;break}if((b&64)==0){a=b,n=M/3+i[M+2];break}return r=ya,y.msg="invalid distance code",E=Kt,v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);case xf:for(T=o;U<T;){if(F!==0)E=Xt;else return v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);F--,S|=(y.read_byte(D++)&255)<<U,U+=8}h+=S&ke[T],S>>=T,U-=T,r=bf;case bf:for($=N-h;$<0;)$+=v.end;for(;t!==0;){if(X===0&&(N==v.end&&v.read!==0&&(N=0,X=N<v.read?v.read-N-1:v.end-N),X===0&&(v.write=N,E=v.inflate_flush(y,E),N=v.write,X=N<v.read?v.read-N-1:v.end-N,N==v.end&&v.read!==0&&(N=0,X=N<v.read?v.read-N-1:v.end-N),X===0)))return v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);v.window[N++]=v.window[$++],X--,$==v.end&&($=0),t--}r=ga;break;case wf:if(X===0&&(N==v.end&&v.read!==0&&(N=0,X=N<v.read?v.read-N-1:v.end-N),X===0&&(v.write=N,E=v.inflate_flush(y,E),N=v.write,X=N<v.read?v.read-N-1:v.end-N,N==v.end&&v.read!==0&&(N=0,X=N<v.read?v.read-N-1:v.end-N),X===0)))return v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);E=Xt,v.window[N++]=s,X--,r=ga;break;case wo:if(U>7&&(U-=8,F++,D--),v.write=N,E=v.inflate_flush(y,E),N=v.write,X=N<v.read?v.read-N-1:v.end-N,v.read!=v.write)return v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);r=Tf;case Tf:return E=mr,v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);case ya:return E=Kt,v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E);default:return E=Pe,v.bitb=S,v.bitk=U,y.avail_in=F,y.total_in+=D-y.next_in_index,y.next_in_index=D,v.write=N,v.inflate_flush(y,E)}},e.free=function(){}}var Ef=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ii=0,To=1,Sf=2,If=3,Pf=4,Af=5,xa=6,ba=7,Cf=8,Jr=9;function J1(e,r){let t=this,i=Ii,n=0,a=0,s=0,o,h=[0],l=[0],u=new K1,f=0,c=new Int32Array(_f*3),p=0,m=new bo;t.bitk=0,t.bitb=0,t.window=new Uint8Array(r),t.end=r,t.read=0,t.write=0,t.reset=function(_,v){v&&(v[0]=p),i==xa&&u.free(_),i=Ii,t.bitk=0,t.bitb=0,t.read=t.write=0},t.reset(e,null),t.inflate_flush=function(_,v){let y,E,T;return E=_.next_out_index,T=t.read,y=(T<=t.write?t.write:t.end)-T,y>_.avail_out&&(y=_.avail_out),y!==0&&v==gr&&(v=Xt),_.avail_out-=y,_.total_out+=y,_.next_out.set(t.window.subarray(T,T+y),E),E+=y,T+=y,T==t.end&&(T=0,t.write==t.end&&(t.write=0),y=t.write-T,y>_.avail_out&&(y=_.avail_out),y!==0&&v==gr&&(v=Xt),_.avail_out-=y,_.total_out+=y,_.next_out.set(t.window.subarray(T,T+y),E),E+=y,T+=y),_.next_out_index=E,t.read=T,v},t.proc=function(_,v){let y,E,T,M,b,S,U,D;for(M=_.next_in_index,b=_.avail_in,E=t.bitb,T=t.bitk,S=t.write,U=S<t.read?t.read-S-1:t.end-S;;){let F,N,X,$,Z,ut,W,Y;switch(i){case Ii:for(;T<3;){if(b!==0)v=Xt;else return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);b--,E|=(_.read_byte(M++)&255)<<T,T+=8}switch(y=E&7,f=y&1,y>>>1){case 0:E>>>=3,T-=3,y=T&7,E>>>=y,T-=y,i=To;break;case 1:F=[],N=[],X=[[]],$=[[]],bo.inflate_trees_fixed(F,N,X,$),u.init(F[0],N[0],X[0],0,$[0],0),E>>>=3,T-=3,i=xa;break;case 2:E>>>=3,T-=3,i=If;break;case 3:return E>>>=3,T-=3,i=Jr,_.msg="invalid block type",v=Kt,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v)}break;case To:for(;T<32;){if(b!==0)v=Xt;else return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);b--,E|=(_.read_byte(M++)&255)<<T,T+=8}if((~E>>>16&65535)!=(E&65535))return i=Jr,_.msg="invalid stored block lengths",v=Kt,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);n=E&65535,E=T=0,i=n!==0?Sf:f!==0?ba:Ii;break;case Sf:if(b===0||U===0&&(S==t.end&&t.read!==0&&(S=0,U=S<t.read?t.read-S-1:t.end-S),U===0&&(t.write=S,v=t.inflate_flush(_,v),S=t.write,U=S<t.read?t.read-S-1:t.end-S,S==t.end&&t.read!==0&&(S=0,U=S<t.read?t.read-S-1:t.end-S),U===0)))return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);if(v=Xt,y=n,y>b&&(y=b),y>U&&(y=U),t.window.set(_.read_buf(M,y),S),M+=y,b-=y,S+=y,U-=y,(n-=y)!==0)break;i=f!==0?ba:Ii;break;case If:for(;T<14;){if(b!==0)v=Xt;else return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);b--,E|=(_.read_byte(M++)&255)<<T,T+=8}if(a=y=E&16383,(y&31)>29||(y>>5&31)>29)return i=Jr,_.msg="too many length or distance symbols",v=Kt,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);if(y=258+(y&31)+(y>>5&31),!o||o.length<y)o=[];else for(D=0;D<y;D++)o[D]=0;E>>>=14,T-=14,s=0,i=Pf;case Pf:for(;s<4+(a>>>10);){for(;T<3;){if(b!==0)v=Xt;else return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);b--,E|=(_.read_byte(M++)&255)<<T,T+=8}o[Ef[s++]]=E&7,E>>>=3,T-=3}for(;s<19;)o[Ef[s++]]=0;if(h[0]=7,y=m.inflate_trees_bits(o,h,l,c,_),y!=Xt)return v=y,v==Kt&&(o=null,i=Jr),t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);s=0,i=Af;case Af:for(;y=a,!(s>=258+(y&31)+(y>>5&31));){let at,mt;for(y=h[0];T<y;){if(b!==0)v=Xt;else return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);b--,E|=(_.read_byte(M++)&255)<<T,T+=8}if(y=c[(l[0]+(E&ke[y]))*3+1],mt=c[(l[0]+(E&ke[y]))*3+2],mt<16)E>>>=y,T-=y,o[s++]=mt;else{for(D=mt==18?7:mt-14,at=mt==18?11:3;T<y+D;){if(b!==0)v=Xt;else return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);b--,E|=(_.read_byte(M++)&255)<<T,T+=8}if(E>>>=y,T-=y,at+=E&ke[D],E>>>=D,T-=D,D=s,y=a,D+at>258+(y&31)+(y>>5&31)||mt==16&&D<1)return o=null,i=Jr,_.msg="invalid bit length repeat",v=Kt,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);mt=mt==16?o[D-1]:0;do o[D++]=mt;while(--at!=0);s=D}}if(l[0]=-1,Z=[],ut=[],W=[],Y=[],Z[0]=9,ut[0]=6,y=a,y=m.inflate_trees_dynamic(257+(y&31),1+(y>>5&31),o,Z,ut,W,Y,c,_),y!=Xt)return y==Kt&&(o=null,i=Jr),v=y,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);u.init(Z[0],ut[0],c,W[0],c,Y[0]),i=xa;case xa:if(t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,(v=u.proc(t,_,v))!=mr)return t.inflate_flush(_,v);if(v=Xt,u.free(_),M=_.next_in_index,b=_.avail_in,E=t.bitb,T=t.bitk,S=t.write,U=S<t.read?t.read-S-1:t.end-S,f===0){i=Ii;break}i=ba;case ba:if(t.write=S,v=t.inflate_flush(_,v),S=t.write,U=S<t.read?t.read-S-1:t.end-S,t.read!=t.write)return t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);i=Cf;case Cf:return v=mr,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);case Jr:return v=Kt,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v);default:return v=Pe,t.bitb=E,t.bitk=T,_.avail_in=b,_.total_in+=M-_.next_in_index,_.next_in_index=M,t.write=S,t.inflate_flush(_,v)}}},t.free=function(_){t.reset(_,null),t.window=null,c=null},t.set_dictionary=function(_,v,y){t.window.set(_.subarray(v,v+y),0),t.read=t.write=y},t.sync_point=function(){return i==To?1:0}}var Q1=32,ty=8,ey=0,Rf=1,Of=2,Uf=3,kf=4,Ff=5,Eo=6,pn=7,Mf=12,Ur=13,ry=[0,0,255,255];function iy(){let e=this;e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0;function r(t){return!t||!t.istate?Pe:(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=pn,t.istate.blocks.reset(t,null),Xt)}e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,Xt},e.inflateInit=function(t,i){return t.msg=null,e.blocks=null,i<8||i>15?(e.inflateEnd(t),Pe):(e.wbits=i,t.istate.blocks=new J1(t,1<<i),r(t),Xt)},e.inflate=function(t,i){let n,a;if(!t||!t.istate||!t.next_in)return Pe;let s=t.istate;for(i=i==H1?gr:Xt,n=gr;;)switch(s.mode){case ey:if(t.avail_in===0)return n;if(n=i,t.avail_in--,t.total_in++,((s.method=t.read_byte(t.next_in_index++))&15)!=ty){s.mode=Ur,t.msg="unknown compression method",s.marker=5;break}if((s.method>>4)+8>s.wbits){s.mode=Ur,t.msg="invalid window size",s.marker=5;break}s.mode=Rf;case Rf:if(t.avail_in===0)return n;if(n=i,t.avail_in--,t.total_in++,a=t.read_byte(t.next_in_index++)&255,((s.method<<8)+a)%31!=0){s.mode=Ur,t.msg="incorrect header check",s.marker=5;break}if((a&Q1)==0){s.mode=pn;break}s.mode=Of;case Of:if(t.avail_in===0)return n;n=i,t.avail_in--,t.total_in++,s.need=(t.read_byte(t.next_in_index++)&255)<<24&4278190080,s.mode=Uf;case Uf:if(t.avail_in===0)return n;n=i,t.avail_in--,t.total_in++,s.need+=(t.read_byte(t.next_in_index++)&255)<<16&16711680,s.mode=kf;case kf:if(t.avail_in===0)return n;n=i,t.avail_in--,t.total_in++,s.need+=(t.read_byte(t.next_in_index++)&255)<<8&65280,s.mode=Ff;case Ff:return t.avail_in===0?n:(n=i,t.avail_in--,t.total_in++,s.need+=t.read_byte(t.next_in_index++)&255,s.mode=Eo,G1);case Eo:return s.mode=Ur,t.msg="need dictionary",s.marker=0,Pe;case pn:if(n=s.blocks.proc(t,n),n==Kt){s.mode=Ur,s.marker=0;break}if(n==Xt&&(n=i),n!=mr)return n;n=i,s.blocks.reset(t,s.was),s.mode=Mf;case Mf:return mr;case Ur:return Kt;default:return Pe}},e.inflateSetDictionary=function(t,i,n){let a=0,s=n;if(!t||!t.istate||t.istate.mode!=Eo)return Pe;let o=t.istate;return s>=1<<o.wbits&&(s=(1<<o.wbits)-1,a=n-s),o.blocks.set_dictionary(i,a,s),o.mode=pn,Xt},e.inflateSync=function(t){let i,n,a,s,o;if(!t||!t.istate)return Pe;let h=t.istate;if(h.mode!=Ur&&(h.mode=Ur,h.marker=0),(i=t.avail_in)===0)return gr;for(n=t.next_in_index,a=h.marker;i!==0&&a<4;)t.read_byte(n)==ry[a]?a++:t.read_byte(n)!==0?a=0:a=4-a,n++,i--;return t.total_in+=n-t.next_in_index,t.next_in_index=n,t.avail_in=i,h.marker=a,a!=4?Kt:(s=t.total_in,o=t.total_out,r(t),t.total_in=s,t.total_out=o,h.mode=pn,Xt)},e.inflateSyncPoint=function(t){return!t||!t.istate||!t.istate.blocks?Pe:t.istate.blocks.sync_point()}}function Lf(){}Lf.prototype={inflateInit:function(e){let r=this;return r.istate=new iy,e||(e=B1),r.istate.inflateInit(r,e)},inflate:function(e){let r=this;return r.istate?r.istate.inflate(r,e):Pe},inflateEnd:function(){let e=this;if(!e.istate)return Pe;let r=e.istate.inflateEnd(e);return e.istate=null,r},inflateSync:function(){let e=this;return e.istate?e.istate.inflateSync(e):Pe},inflateSetDictionary:function(e,r){let t=this;return t.istate?t.istate.inflateSetDictionary(t,e,r):Pe},read_byte:function(e){return this.next_in[e]},read_buf:function(e,r){return this.next_in.subarray(e,e+r)}};function ny(e){let r=this,t=new Lf,i=e&&e.chunkSize?Math.floor(e.chunkSize*2):128*1024,n=X1,a=new Uint8Array(i),s=!1;t.inflateInit(),t.next_out=a,r.append=function(o,h){let l=[],u,f,c=0,p=0,m=0;if(o.length!==0){t.next_in_index=0,t.next_in=o,t.avail_in=o.length;do{if(t.next_out_index=0,t.avail_out=i,t.avail_in===0&&!s&&(t.next_in_index=0,s=!0),u=t.inflate(n),s&&u===gr){if(t.avail_in!==0)throw new Error("inflating: bad input")}else if(u!==Xt&&u!==mr)throw new Error("inflating: "+t.msg);if((s||u===mr)&&t.avail_in===o.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===i?l.push(new Uint8Array(a)):l.push(a.slice(0,t.next_out_index))),m+=t.next_out_index,h&&t.next_in_index>0&&t.next_in_index!=c&&(h(t.next_in_index),c=t.next_in_index)}while(t.avail_in>0||t.avail_out===0);return l.length>1?(f=new Uint8Array(m),l.forEach(function(_){f.set(_,p),p+=_.length})):f=l[0]||new Uint8Array(0),f}},r.flush=function(){t.inflateEnd()}}var ay={chunkSize:512*1024,maxWorkers:typeof navigator!="undefined"&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},Fe=Object.assign({},ay);function sy(){return Fe}function wa(e){if(e.chunkSize!==void 0&&(Fe.chunkSize=e.chunkSize),e.maxWorkers!==void 0&&(Fe.maxWorkers=e.maxWorkers),e.terminateWorkerTimeout!==void 0&&(Fe.terminateWorkerTimeout=e.terminateWorkerTimeout),e.useWebWorkers!==void 0&&(Fe.useWebWorkers=e.useWebWorkers),e.Deflate!==void 0&&(Fe.Deflate=e.Deflate),e.Inflate!==void 0&&(Fe.Inflate=e.Inflate),e.workerScripts!==void 0){if(e.workerScripts.deflate){if(!Array.isArray(e.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");Fe.workerScripts||(Fe.workerScripts={}),Fe.workerScripts.deflate=e.workerScripts.deflate}if(e.workerScripts.inflate){if(!Array.isArray(e.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array");Fe.workerScripts||(Fe.workerScripts={}),Fe.workerScripts.inflate=e.workerScripts.inflate}}}var vn={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin",cap:["cap","pcap"],"cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",javascript:"js",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":"odm","vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-debian-package":["deb","udeb"],"x-director":["dcr","dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-koan":["skp","skd","skt","skm"],"x-kpresenter":["kpr","kpt"],"x-kword":["kwd","kwt"],"x-latex":"latex","x-lha":"lha","x-lyx":"lyx","x-lzh":"lzh","x-lzx":"lzx","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-ms-wmd":"wmd","x-ms-wmz":"wmz","x-msdos-program":["com","exe","bat","dll"],"x-msi":"msi","x-netcdf":["nc","cdf"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":"rpm","x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tcl":"tcl","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-troff":["t","tr","roff"],"x-troff-man":"man","x-troff-me":"me","x-troff-ms":"ms","x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","x-msdownload":["exe","dll","com","bat","msi"],"x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tads":"gam","x-tex":"tex","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-compressed":"tgz","x-gzip":"gz","x-perfmon":["pma","pmc","pml","pmr","pmw"],"x-pkcs7-mime":["p7c","p7m"],"ynd.ms-pkipko":"pko"},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":["aif","aiff","aifc"],"x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2","x-wav":"wav",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":["mmd","mmod"],"x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":["sd","sdf"],"x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","mpc","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":["val","aso"],"x-pdb":["pdb","ent"],"x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-photoshop":"psd","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",pipeg:"jfif"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"],"x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:["tm","ts"],"tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":["diff","patch"],"x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas"],"x-pcs-gcd":"gcd","x-perl":["pl","pm"],"x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","cc","cxx","cpp","h","hh","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt"},video:{avif:".avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","vrml","wrl","flr","wrz","xaf","xof"]}},Ix=(()=>{let e={};for(let r in vn)if(vn.hasOwnProperty(r)){for(let t in vn[r])if(vn[r].hasOwnProperty(t)){let i=vn[r][t];if(typeof i=="string")e[i]=r+"/"+t;else for(let n=0;n<i.length;n++)e[i[n]]=r+"/"+t}}return e})(),Nf=[];for(let e=0;e<256;e++){let r=e;for(let t=0;t<8;t++)r&1?r=r>>>1^3988292384:r=r>>>1;Nf[e]=r}var Pi=class{constructor(r){this.crc=r||-1}append(r){let t=this.crc|0;for(let i=0,n=r.length|0;i<n;i++)t=t>>>8^Nf[(t^r[i])&255];this.crc=t}get(){return~this.crc}},Ae={concat(e,r){if(e.length===0||r.length===0)return e.concat(r);let t=e[e.length-1],i=Ae.getPartial(t);return i===32?e.concat(r):Ae._shiftRight(r,i,t|0,e.slice(0,e.length-1))},bitLength(e){let r=e.length;if(r===0)return 0;let t=e[r-1];return(r-1)*32+Ae.getPartial(t)},clamp(e,r){if(e.length*32<r)return e;e=e.slice(0,Math.ceil(r/32));let t=e.length;return r=r&31,t>0&&r&&(e[t-1]=Ae.partial(r,e[t-1]&2147483648>>r-1,1)),e},partial(e,r,t){return e===32?r:(t?r|0:r<<32-e)+e*1099511627776},getPartial(e){return Math.round(e/1099511627776)||32},_shiftRight(e,r,t,i){for(i===void 0&&(i=[]);r>=32;r-=32)i.push(t),t=0;if(r===0)return i.concat(e);for(let s=0;s<e.length;s++)i.push(t|e[s]>>>r),t=e[s]<<32-r;let n=e.length?e[e.length-1]:0,a=Ae.getPartial(n);return i.push(Ae.partial(r+a&31,r+a>32?t:i.pop(),1)),i}},Df={bytes:{fromBits(e){let t=Ae.bitLength(e)/8,i=new Uint8Array(t),n;for(let a=0;a<t;a++)(a&3)==0&&(n=e[a/4]),i[a]=n>>>24,n<<=8;return i},toBits(e){let r=[],t,i=0;for(t=0;t<e.length;t++)i=i<<8|e[t],(t&3)==3&&(r.push(i),i=0);return t&3&&r.push(Ae.partial(8*(t&3),i)),r}}},So={};So.sha1=function(e){e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()};So.sha1.prototype={blockSize:512,reset:function(){let e=this;return e._h=this._init.slice(0),e._buffer=[],e._length=0,e},update:function(e){let r=this;typeof e=="string"&&(e=Df.utf8String.toBits(e));let t=r._buffer=Ae.concat(r._buffer,e),i=r._length,n=r._length=i+Ae.bitLength(e);if(n>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");let a=new Uint32Array(t),s=0;for(let o=r.blockSize+i-(r.blockSize+i&r.blockSize-1);o<=n;o+=r.blockSize)r._block(a.subarray(16*s,16*(s+1))),s+=1;return t.splice(0,16*s),r},finalize:function(){let e=this,r=e._buffer,t=e._h;r=Ae.concat(r,[Ae.partial(1,1)]);for(let i=r.length+2;i&15;i++)r.push(0);for(r.push(Math.floor(e._length/4294967296)),r.push(e._length|0);r.length;)e._block(r.splice(0,16));return e.reset(),t},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(e,r,t,i){if(e<=19)return r&t|~r&i;if(e<=39)return r^t^i;if(e<=59)return r&t|r&i|t&i;if(e<=79)return r^t^i},_S:function(e,r){return r<<e|r>>>32-e},_block:function(e){let r=this,t=r._h,i=Array(80);for(let l=0;l<16;l++)i[l]=e[l];let n=t[0],a=t[1],s=t[2],o=t[3],h=t[4];for(let l=0;l<=79;l++){l>=16&&(i[l]=r._S(1,i[l-3]^i[l-8]^i[l-14]^i[l-16]));let u=r._S(5,n)+r._f(l,a,s,o)+h+i[l]+r._key[Math.floor(l/20)]|0;h=o,o=s,s=r._S(30,a),a=n,n=u}t[0]=t[0]+n|0,t[1]=t[1]+a|0,t[2]=t[2]+s|0,t[3]=t[3]+o|0,t[4]=t[4]+h|0}};var Bf={};Bf.aes=class{constructor(e){let r=this;r._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],r._tables[0][0][0]||r._precompute();let t=r._tables[0][4],i=r._tables[1],n=e.length,a,s,o,h=1;if(n!==4&&n!==6&&n!==8)throw new Error("invalid aes key size");for(r._key=[s=e.slice(0),o=[]],a=n;a<4*n+28;a++){let l=s[a-1];(a%n==0||n===8&&a%n==4)&&(l=t[l>>>24]<<24^t[l>>16&255]<<16^t[l>>8&255]<<8^t[l&255],a%n==0&&(l=l<<8^l>>>24^h<<24,h=h<<1^(h>>7)*283)),s[a]=s[a-n]^l}for(let l=0;a;l++,a--){let u=s[l&3?a:a-4];a<=4||l<4?o[l]=u:o[l]=i[0][t[u>>>24]]^i[1][t[u>>16&255]]^i[2][t[u>>8&255]]^i[3][t[u&255]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],r=this._tables[1],t=e[4],i=r[4],n=[],a=[],s,o,h,l;for(let u=0;u<256;u++)a[(n[u]=u<<1^(u>>7)*283)^u]=u;for(let u=s=0;!t[u];u^=o||1,s=a[s]||1){let f=s^s<<1^s<<2^s<<3^s<<4;f=f>>8^f&255^99,t[u]=f,i[f]=u,l=n[h=n[o=n[u]]];let c=l*16843009^h*65537^o*257^u*16843008,p=n[f]*257^f*16843008;for(let m=0;m<4;m++)e[m][u]=p=p<<24^p>>>8,r[m][f]=c=c<<24^c>>>8}for(let u=0;u<5;u++)e[u]=e[u].slice(0),r[u]=r[u].slice(0)}_crypt(e,r){if(e.length!==4)throw new Error("invalid aes block size");let t=this._key[r],i=t.length/4-2,n=[0,0,0,0],a=this._tables[r],s=a[0],o=a[1],h=a[2],l=a[3],u=a[4],f=e[0]^t[0],c=e[r?3:1]^t[1],p=e[2]^t[2],m=e[r?1:3]^t[3],_=4,v,y,E;for(let T=0;T<i;T++)v=s[f>>>24]^o[c>>16&255]^h[p>>8&255]^l[m&255]^t[_],y=s[c>>>24]^o[p>>16&255]^h[m>>8&255]^l[f&255]^t[_+1],E=s[p>>>24]^o[m>>16&255]^h[f>>8&255]^l[c&255]^t[_+2],m=s[m>>>24]^o[f>>16&255]^h[c>>8&255]^l[p&255]^t[_+3],_+=4,f=v,c=y,p=E;for(let T=0;T<4;T++)n[r?3&-T:T]=u[f>>>24]<<24^u[c>>16&255]<<16^u[p>>8&255]<<8^u[m&255]^t[_++],v=f,f=c,c=p,p=m,m=v;return n}};var Gf={};Gf.ctrGladman=class{constructor(e,r){this._prf=e,this._initIv=r,this._iv=r}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if((e>>24&255)==255){let r=e>>16&255,t=e>>8&255,i=e&255;r===255?(r=0,t===255?(t=0,i===255?i=0:++i):++t):++r,e=0,e+=r<<16,e+=t<<8,e+=i}else e+=1<<24;return e}incCounter(e){(e[0]=this.incWord(e[0]))===0&&(e[1]=this.incWord(e[1]))}calculate(e,r,t){let i;if(!(i=r.length))return[];let n=Ae.bitLength(r);for(let a=0;a<i;a+=4){this.incCounter(t);let s=e.encrypt(t);r[a]^=s[0],r[a+1]^=s[1],r[a+2]^=s[2],r[a+3]^=s[3]}return Ae.clamp(r,n)}};var Xf={};Xf.hmacSha1=class{constructor(e){let r=this,t=r._hash=So.sha1,i=[[],[]],n=t.prototype.blockSize/32;r._baseHash=[new t,new t],e.length>n&&(e=t.hash(e));for(let a=0;a<n;a++)i[0][a]=e[a]^909522486,i[1][a]=e[a]^1549556828;r._baseHash[0].update(i[0]),r._baseHash[1].update(i[1]),r._resultHash=new t(r._baseHash[0])}reset(){let e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){let r=this;r._updated=!0,r._resultHash.update(e)}digest(){let e=this,r=e._resultHash.finalize(),t=new e._hash(e._baseHash[1]).update(r).finalize();return e.reset(),t}};var Hf="Invalid pasword",Ai=16,oy="raw",jf={name:"PBKDF2"},hy={name:"HMAC"},ly="SHA-1",uy=Object.assign({hash:hy},jf),fy=Object.assign({iterations:1e3,hash:{name:ly}},jf),cy=["deriveBits"],_n=[8,12,16],mn=[16,24,32],kr=10,Vf=[0,0,0,0],Yf=crypto.subtle,rr=Df.bytes,Wf=Bf.aes,zf=Gf.ctrGladman,qf=Xf.hmacSha1,$f=class{constructor(r,t,i){Object.assign(this,{password:r,signed:t,strength:i-1,pendingInput:new Uint8Array(0)})}async append(r){let t=this;if(t.password){let n=Me(r,0,_n[t.strength]+2);await dy(t,n,t.password),t.password=null,t.aesCtrGladman=new zf(new Wf(t.keys.key),Array.from(Vf)),t.hmac=new qf(t.keys.authentication),r=Me(r,_n[t.strength]+2)}let i=new Uint8Array(r.length-kr-(r.length-kr)%Ai);return Zf(t,r,i,0,kr,!0)}async flush(){let r=this,t=r.pendingInput,i=Me(t,0,t.length-kr),n=Me(t,t.length-kr),a=new Uint8Array(0);if(i.length){let o=rr.toBits(i);r.hmac.update(o);let h=r.aesCtrGladman.update(o);a=rr.fromBits(h)}let s=!0;if(r.signed){let o=Me(rr.fromBits(r.hmac.digest()),0,kr);for(let h=0;h<kr;h++)o[h]!=n[h]&&(s=!1)}return{valid:s,data:a}}},Kf=class{constructor(r,t){Object.assign(this,{password:r,strength:t-1,pendingInput:new Uint8Array(0)})}async append(r){let t=this,i=new Uint8Array(0);t.password&&(i=await py(t,t.password),t.password=null,t.aesCtrGladman=new zf(new Wf(t.keys.key),Array.from(Vf)),t.hmac=new qf(t.keys.authentication));let n=new Uint8Array(i.length+r.length-r.length%Ai);return n.set(i,0),Zf(t,r,n,i.length,0)}async flush(){let r=this,t=new Uint8Array(0);if(r.pendingInput.length){let n=r.aesCtrGladman.update(rr.toBits(r.pendingInput));r.hmac.update(n),t=rr.fromBits(n)}let i=Me(rr.fromBits(r.hmac.digest()),0,kr);return{data:Io(t,i),signature:i}}};function Zf(e,r,t,i,n,a){let s=r.length-n;e.pendingInput.length&&(r=Io(e.pendingInput,r),t=vy(t,s-s%Ai));let o;for(o=0;o<=s-Ai;o+=Ai){let h=rr.toBits(Me(r,o,o+Ai));a&&e.hmac.update(h);let l=e.aesCtrGladman.update(h);a||e.hmac.update(l),t.set(rr.fromBits(l),o+i)}return e.pendingInput=Me(r,o),t}async function dy(e,r,t){await Jf(e,t,Me(r,0,_n[e.strength]));let i=Me(r,_n[e.strength]),n=e.keys.passwordVerification;if(n[0]!=i[0]||n[1]!=i[1])throw new Error(Hf)}async function py(e,r){let t=crypto.getRandomValues(new Uint8Array(_n[e.strength]));return await Jf(e,r,t),Io(t,e.keys.passwordVerification)}async function Jf(e,r,t){let i=new TextEncoder().encode(r),n=await Yf.importKey(oy,i,uy,!1,cy),a=await Yf.deriveBits(Object.assign({salt:t},fy),n,8*(mn[e.strength]*2+2)),s=new Uint8Array(a);e.keys={key:rr.toBits(Me(s,0,mn[e.strength])),authentication:rr.toBits(Me(s,mn[e.strength],mn[e.strength]*2)),passwordVerification:Me(s,mn[e.strength]*2)}}function Io(e,r){let t=e;return e.length+r.length&&(t=new Uint8Array(e.length+r.length),t.set(e,0),t.set(r,e.length)),t}function vy(e,r){if(r&&r>e.length){let t=e;e=new Uint8Array(r),e.set(t,0)}return e}function Me(e,r,t){return e.subarray(r,t)}var Ci=12,Qf=class{constructor(r,t){let i=this;Object.assign(i,{password:r,passwordVerification:t}),ec(i,r)}async append(r){let t=this;if(t.password){let i=tc(t,r.subarray(0,Ci));if(t.password=null,i[Ci-1]!=t.passwordVerification)throw new Error(Hf);r=r.subarray(Ci)}return tc(t,r)}async flush(){return{valid:!0,data:new Uint8Array(0)}}},rc=class{constructor(r,t){let i=this;Object.assign(i,{password:r,passwordVerification:t}),ec(i,r)}async append(r){let t=this,i,n;if(t.password){t.password=null;let a=crypto.getRandomValues(new Uint8Array(Ci));a[Ci-1]=t.passwordVerification,i=new Uint8Array(r.length+a.length),i.set(ic(t,a),0),n=Ci}else i=new Uint8Array(r.length),n=0;return i.set(ic(t,r),n),i}async flush(){return{data:new Uint8Array(0)}}};function tc(e,r){let t=new Uint8Array(r.length);for(let i=0;i<r.length;i++)t[i]=nc(e)^r[i],Po(e,t[i]);return t}function ic(e,r){let t=new Uint8Array(r.length);for(let i=0;i<r.length;i++)t[i]=nc(e)^r[i],Po(e,r[i]);return t}function ec(e,r){e.keys=[305419896,591751049,878082192],e.crcKey0=new Pi(e.keys[0]),e.crcKey2=new Pi(e.keys[2]);for(let t=0;t<r.length;t++)Po(e,r.charCodeAt(t))}function Po(e,r){e.crcKey0.append([r]),e.keys[0]=~e.crcKey0.get(),e.keys[1]=sc(e.keys[1]+ac(e.keys[0])),e.keys[1]=sc(Math.imul(e.keys[1],134775813)+1),e.crcKey2.append([e.keys[1]>>>24]),e.keys[2]=~e.crcKey2.get()}function nc(e){let r=e.keys[2]|2;return ac(Math.imul(r,r^1)>>>8)}function ac(e){return e&255}function sc(e){return e&4294967295}var _y="deflate",oc="inflate",hc="Invalid signature",lc=class{constructor(r,{signature:t,password:i,signed:n,compressed:a,zipCrypto:s,passwordVerification:o,encryptionStrength:h},{chunkSize:l}){let u=Boolean(i);Object.assign(this,{signature:t,encrypted:u,signed:n,compressed:a,inflate:a&&new r({chunkSize:l}),crc32:n&&new Pi,zipCrypto:s,decrypt:u&&s?new Qf(i,o):new $f(i,n,h)})}async append(r){let t=this;return t.encrypted&&r.length&&(r=await t.decrypt.append(r)),t.compressed&&r.length&&(r=await t.inflate.append(r)),(!t.encrypted||t.zipCrypto)&&t.signed&&r.length&&t.crc32.append(r),r}async flush(){let r=this,t,i=new Uint8Array(0);if(r.encrypted){let n=await r.decrypt.flush();if(!n.valid)throw new Error(hc);i=n.data}if((!r.encrypted||r.zipCrypto)&&r.signed){let n=new DataView(new Uint8Array(4).buffer);if(t=r.crc32.get(),n.setUint32(0,t),r.cipher!=n.getUint32(0,!1))throw new Error(hc)}return r.compressed&&(i=await r.inflate.append(i)||new Uint8Array(0),await r.inflate.flush()),{data:i,signature:t}}},uc=class{constructor(r,{encrypted:t,signed:i,compressed:n,level:a,zipCrypto:s,password:o,passwordVerification:h,encryptionStrength:l},{chunkSize:u}){Object.assign(this,{encrypted:t,signed:i,compressed:n,deflate:n&&new r({level:a||5,chunkSize:u}),crc32:i&&new Pi,zipCrypto:s,encrypt:t&&s?new rc(o,h):new Kf(o,l)})}async append(r){let t=this,i=r;return t.compressed&&r.length&&(i=await t.deflate.append(r)),t.encrypted&&i.length&&(i=await t.encrypt.append(i)),(!t.encrypted||t.zipCrypto)&&t.signed&&r.length&&t.crc32.append(r),i}async flush(){let r=this,t,i=new Uint8Array(0);if(r.compressed&&(i=await r.deflate.flush()||new Uint8Array(0)),r.encrypted){i=await r.encrypt.append(i);let n=await r.encrypt.flush();t=n.signature;let a=new Uint8Array(i.length+n.data.length);a.set(i,0),a.set(n.data,i.length),i=a}return(!r.encrypted||r.zipCrypto)&&r.signed&&(t=r.crc32.get()),{data:i,signature:t}}};function my(e,r,t){if(r.codecType.startsWith(_y))return new uc(e,r,t);if(r.codecType.startsWith(oc))return new lc(e,r,t)}var fc="init",cc="append",Ao="flush",gy="message",Co=(e,r,t,i,n,a,s)=>(Object.assign(e,{busy:!0,codecConstructor:r,options:Object.assign({},t),scripts:s,terminate(){e.worker&&!e.busy&&(e.worker.terminate(),e.interface=null)},onTaskFinished(){e.busy=!1,n(e)}}),a?xy(e,i):yy(e,i));function yy(e,r){let t=my(e.codecConstructor,e.options,r);return{async append(i){try{return await t.append(i)}catch(n){throw e.onTaskFinished(),n}},async flush(){try{return await t.flush()}finally{e.onTaskFinished()}}}}function xy(e,r){let t;return e.interface||(e.worker=new Worker(new URL(e.scripts[0],E1.url)),e.worker.addEventListener(gy,a,!1),e.interface={append(s){return i({type:cc,data:s})},flush(){return i({type:Ao})}}),e.interface;async function i(s){if(!t){let o=e.options,h=e.scripts.slice(1);await n({scripts:h,type:fc,options:o,config:{chunkSize:r.chunkSize}})}return n(s)}function n(s){let o=e.worker,h=new Promise((l,u)=>t={resolve:l,reject:u});try{if(s.data)try{s.data=s.data.buffer,o.postMessage(s,[s.data])}catch(l){o.postMessage(s)}else o.postMessage(s)}catch(l){t.reject(l),t=null,e.onTaskFinished()}return h}function a(s){let o=s.data;if(t){let h=o.error,l=o.type;if(h){let u=new Error(h.message);u.stack=h.stack,t.reject(u),t=null,e.onTaskFinished()}else if(l==fc||l==Ao||l==cc){let u=o.data;l==Ao?(t.resolve({data:new Uint8Array(u),signature:o.signature}),t=null,e.onTaskFinished()):t.resolve(u&&new Uint8Array(u))}}}}var Qr=[],Ro=[];function by(e,r,t){let n=!(!r.compressed&&!r.signed&&!r.encrypted)&&(r.useWebWorkers||r.useWebWorkers===void 0&&t.useWebWorkers),a=n&&t.workerScripts?t.workerScripts[r.codecType]:[];if(Qr.length<t.maxWorkers){let o={};return Qr.push(o),Co(o,e,r,t,s,n,a)}else{let o=Qr.find(h=>!h.busy);return o?(dc(o),Co(o,e,r,t,s,n,a)):new Promise(h=>Ro.push({resolve:h,codecConstructor:e,options:r,webWorker:n,scripts:a}))}function s(o){if(Ro.length){let[{resolve:h,codecConstructor:l,options:u,webWorker:f,scripts:c}]=Ro.splice(0,1);h(Co(o,l,u,t,s,f,c))}else o.worker?(dc(o),Number.isFinite(t.terminateWorkerTimeout)&&t.terminateWorkerTimeout>=0&&(o.terminateTimeout=setTimeout(()=>{Qr=Qr.filter(h=>h!=o),o.terminate()},t.terminateWorkerTimeout))):Qr=Qr.filter(h=>h!=o)}}function dc(e){e.terminateTimeout&&(clearTimeout(e.terminateTimeout),e.terminateTimeout=null)}var wy=()=>{if(typeof URL.createObjectURL=="function"){let e=(()=>{let t=[];for(let x=0;x<256;x++){let g=x;for(let d=0;d<8;d++)1&g?g=g>>>1^3988292384:g>>>=1;t[x]=g}class i{constructor(g){this.crc=g||-1}append(g){let d=0|this.crc;for(let I=0,R=0|g.length;I<R;I++)d=d>>>8^t[255&(d^g[I])];this.crc=d}get(){return~this.crc}}let n={concat(x,g){if(x.length===0||g.length===0)return x.concat(g);let d=x[x.length-1],I=n.getPartial(d);return I===32?x.concat(g):n._shiftRight(g,I,0|d,x.slice(0,x.length-1))},bitLength(x){let g=x.length;if(g===0)return 0;let d=x[g-1];return 32*(g-1)+n.getPartial(d)},clamp(x,g){if(32*x.length<g)return x;let d=(x=x.slice(0,Math.ceil(g/32))).length;return g&=31,d>0&&g&&(x[d-1]=n.partial(g,x[d-1]&2147483648>>g-1,1)),x},partial:(x,g,d)=>x===32?g:(d?0|g:g<<32-x)+1099511627776*x,getPartial:x=>Math.round(x/1099511627776)||32,_shiftRight(x,g,d,I){for(I===void 0&&(I=[]);g>=32;g-=32)I.push(d),d=0;if(g===0)return I.concat(x);for(let P=0;P<x.length;P++)I.push(d|x[P]>>>g),d=x[P]<<32-g;let R=x.length?x[x.length-1]:0,w=n.getPartial(R);return I.push(n.partial(g+w&31,g+w>32?d:I.pop(),1)),I}},a={bytes:{fromBits(x){let g=n.bitLength(x)/8,d=new Uint8Array(g),I;for(let R=0;R<g;R++)(3&R)==0&&(I=x[R/4]),d[R]=I>>>24,I<<=8;return d},toBits(x){let g=[],d,I=0;for(d=0;d<x.length;d++)I=I<<8|x[d],(3&d)==3&&(g.push(I),I=0);return 3&d&&g.push(n.partial(8*(3&d),I)),g}}},s={sha1:function(x){x?(this._h=x._h.slice(0),this._buffer=x._buffer.slice(0),this._length=x._length):this.reset()}};s.sha1.prototype={blockSize:512,reset:function(){let x=this;return x._h=this._init.slice(0),x._buffer=[],x._length=0,x},update:function(x){let g=this;typeof x=="string"&&(x=a.utf8String.toBits(x));let d=g._buffer=n.concat(g._buffer,x),I=g._length,R=g._length=I+n.bitLength(x);if(R>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");let w=new Uint32Array(d),P=0;for(let O=g.blockSize+I-(g.blockSize+I&g.blockSize-1);O<=R;O+=g.blockSize)g._block(w.subarray(16*P,16*(P+1))),P+=1;return d.splice(0,16*P),g},finalize:function(){let x=this,g=x._buffer,d=x._h;g=n.concat(g,[n.partial(1,1)]);for(let I=g.length+2;15&I;I++)g.push(0);for(g.push(Math.floor(x._length/4294967296)),g.push(0|x._length);g.length;)x._block(g.splice(0,16));return x.reset(),d},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(x,g,d,I){return x<=19?g&d|~g&I:x<=39?g^d^I:x<=59?g&d|g&I|d&I:x<=79?g^d^I:void 0},_S:function(x,g){return g<<x|g>>>32-x},_block:function(x){let g=this,d=g._h,I=Array(80);for(let B=0;B<16;B++)I[B]=x[B];let R=d[0],w=d[1],P=d[2],O=d[3],C=d[4];for(let B=0;B<=79;B++){B>=16&&(I[B]=g._S(1,I[B-3]^I[B-8]^I[B-14]^I[B-16]));let H=g._S(5,R)+g._f(B,w,P,O)+C+I[B]+g._key[Math.floor(B/20)]|0;C=O,O=P,P=g._S(30,w),w=R,R=H}d[0]=d[0]+R|0,d[1]=d[1]+w|0,d[2]=d[2]+P|0,d[3]=d[3]+O|0,d[4]=d[4]+C|0}};let o=class{constructor(x){let g=this;g._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],g._tables[0][0][0]||g._precompute();let d=g._tables[0][4],I=g._tables[1],R=x.length,w,P,O,C=1;if(R!==4&&R!==6&&R!==8)throw new Error("invalid aes key size");for(g._key=[P=x.slice(0),O=[]],w=R;w<4*R+28;w++){let B=P[w-1];(w%R==0||R===8&&w%R==4)&&(B=d[B>>>24]<<24^d[B>>16&255]<<16^d[B>>8&255]<<8^d[255&B],w%R==0&&(B=B<<8^B>>>24^C<<24,C=C<<1^283*(C>>7))),P[w]=P[w-R]^B}for(let B=0;w;B++,w--){let H=P[3&B?w:w-4];O[B]=w<=4||B<4?H:I[0][d[H>>>24]]^I[1][d[H>>16&255]]^I[2][d[H>>8&255]]^I[3][d[255&H]]}}encrypt(x){return this._crypt(x,0)}decrypt(x){return this._crypt(x,1)}_precompute(){let x=this._tables[0],g=this._tables[1],d=x[4],I=g[4],R=[],w=[],P,O,C,B;for(let H=0;H<256;H++)w[(R[H]=H<<1^283*(H>>7))^H]=H;for(let H=P=0;!d[H];H^=O||1,P=w[P]||1){let z=P^P<<1^P<<2^P<<3^P<<4;z=z>>8^255&z^99,d[H]=z,I[z]=H,B=R[C=R[O=R[H]]];let Q=16843009*B^65537*C^257*O^16843008*H,_t=257*R[z]^16843008*z;for(let L=0;L<4;L++)x[L][H]=_t=_t<<24^_t>>>8,g[L][z]=Q=Q<<24^Q>>>8}for(let H=0;H<5;H++)x[H]=x[H].slice(0),g[H]=g[H].slice(0)}_crypt(x,g){if(x.length!==4)throw new Error("invalid aes block size");let d=this._key[g],I=d.length/4-2,R=[0,0,0,0],w=this._tables[g],P=w[0],O=w[1],C=w[2],B=w[3],H=w[4],z,Q,_t,L=x[0]^d[0],K=x[g?3:1]^d[1],A=x[2]^d[2],k=x[g?1:3]^d[3],j=4;for(let q=0;q<I;q++)z=P[L>>>24]^O[K>>16&255]^C[A>>8&255]^B[255&k]^d[j],Q=P[K>>>24]^O[A>>16&255]^C[k>>8&255]^B[255&L]^d[j+1],_t=P[A>>>24]^O[k>>16&255]^C[L>>8&255]^B[255&K]^d[j+2],k=P[k>>>24]^O[L>>16&255]^C[K>>8&255]^B[255&A]^d[j+3],j+=4,L=z,K=Q,A=_t;for(let q=0;q<4;q++)R[g?3&-q:q]=H[L>>>24]<<24^H[K>>16&255]<<16^H[A>>8&255]<<8^H[255&k]^d[j++],z=L,L=K,K=A,A=k,k=z;return R}},h=class{constructor(x,g){this._prf=x,this._initIv=g,this._iv=g}reset(){this._iv=this._initIv}update(x){return this.calculate(this._prf,x,this._iv)}incWord(x){if((x>>24&255)==255){let g=x>>16&255,d=x>>8&255,I=255&x;g===255?(g=0,d===255?(d=0,I===255?I=0:++I):++d):++g,x=0,x+=g<<16,x+=d<<8,x+=I}else x+=1<<24;return x}incCounter(x){(x[0]=this.incWord(x[0]))===0&&(x[1]=this.incWord(x[1]))}calculate(x,g,d){let I;if(!(I=g.length))return[];let R=n.bitLength(g);for(let w=0;w<I;w+=4){this.incCounter(d);let P=x.encrypt(d);g[w]^=P[0],g[w+1]^=P[1],g[w+2]^=P[2],g[w+3]^=P[3]}return n.clamp(g,R)}},l=class{constructor(x){let g=this,d=g._hash=s.sha1,I=[[],[]],R=d.prototype.blockSize/32;g._baseHash=[new d,new d],x.length>R&&(x=d.hash(x));for(let w=0;w<R;w++)I[0][w]=909522486^x[w],I[1][w]=1549556828^x[w];g._baseHash[0].update(I[0]),g._baseHash[1].update(I[1]),g._resultHash=new d(g._baseHash[0])}reset(){let x=this;x._resultHash=new x._hash(x._baseHash[0]),x._updated=!1}update(x){this._updated=!0,this._resultHash.update(x)}digest(){let x=this,g=x._resultHash.finalize(),d=new x._hash(x._baseHash[1]).update(g).finalize();return x.reset(),d}},u={name:"PBKDF2"},f=Object.assign({hash:{name:"HMAC"}},u),c=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},u),p=["deriveBits"],m=[8,12,16],_=[16,24,32],v=[0,0,0,0],y=crypto.subtle,E=a.bytes,T=o,M=h,b=l;class S{constructor(g,d,I){Object.assign(this,{password:g,signed:d,strength:I-1,pendingInput:new Uint8Array(0)})}async append(g){let d=this;if(d.password){let I=X(g,0,m[d.strength]+2);await async function(R,w,P){await F(R,P,X(w,0,m[R.strength]));let O=X(w,m[R.strength]),C=R.keys.passwordVerification;if(C[0]!=O[0]||C[1]!=O[1])throw new Error("Invalid pasword")}(d,I,d.password),d.password=null,d.aesCtrGladman=new M(new T(d.keys.key),Array.from(v)),d.hmac=new b(d.keys.authentication),g=X(g,m[d.strength]+2)}return D(d,g,new Uint8Array(g.length-10-(g.length-10)%16),0,10,!0)}async flush(){let g=this,d=g.pendingInput,I=X(d,0,d.length-10),R=X(d,d.length-10),w=new Uint8Array(0);if(I.length){let O=E.toBits(I);g.hmac.update(O);let C=g.aesCtrGladman.update(O);w=E.fromBits(C)}let P=!0;if(g.signed){let O=X(E.fromBits(g.hmac.digest()),0,10);for(let C=0;C<10;C++)O[C]!=R[C]&&(P=!1)}return{valid:P,data:w}}}class U{constructor(g,d){Object.assign(this,{password:g,strength:d-1,pendingInput:new Uint8Array(0)})}async append(g){let d=this,I=new Uint8Array(0);d.password&&(I=await async function(w,P){let O=crypto.getRandomValues(new Uint8Array(m[w.strength]));return await F(w,P,O),N(O,w.keys.passwordVerification)}(d,d.password),d.password=null,d.aesCtrGladman=new M(new T(d.keys.key),Array.from(v)),d.hmac=new b(d.keys.authentication));let R=new Uint8Array(I.length+g.length-g.length%16);return R.set(I,0),D(d,g,R,I.length,0)}async flush(){let g=this,d=new Uint8Array(0);if(g.pendingInput.length){let R=g.aesCtrGladman.update(E.toBits(g.pendingInput));g.hmac.update(R),d=E.fromBits(R)}let I=X(E.fromBits(g.hmac.digest()),0,10);return{data:N(d,I),signature:I}}}function D(x,g,d,I,R,w){let P=g.length-R,O;for(x.pendingInput.length&&(g=N(x.pendingInput,g),d=function(C,B){if(B&&B>C.length){let H=C;(C=new Uint8Array(B)).set(H,0)}return C}(d,P-P%16)),O=0;O<=P-16;O+=16){let C=E.toBits(X(g,O,O+16));w&&x.hmac.update(C);let B=x.aesCtrGladman.update(C);w||x.hmac.update(B),d.set(E.fromBits(B),O+I)}return x.pendingInput=X(g,O),d}async function F(x,g,d){let I=new TextEncoder().encode(g),R=await y.importKey("raw",I,f,!1,p),w=await y.deriveBits(Object.assign({salt:d},c),R,8*(2*_[x.strength]+2)),P=new Uint8Array(w);x.keys={key:E.toBits(X(P,0,_[x.strength])),authentication:E.toBits(X(P,_[x.strength],2*_[x.strength])),passwordVerification:X(P,2*_[x.strength])}}function N(x,g){let d=x;return x.length+g.length&&(d=new Uint8Array(x.length+g.length),d.set(x,0),d.set(g,x.length)),d}function X(x,g,d){return x.subarray(g,d)}class ${constructor(g,d){Object.assign(this,{password:g,passwordVerification:d}),Y(this,g)}async append(g){let d=this;if(d.password){let I=ut(d,g.subarray(0,12));if(d.password=null,I[11]!=d.passwordVerification)throw new Error("Invalid pasword");g=g.subarray(12)}return ut(d,g)}async flush(){return{valid:!0,data:new Uint8Array(0)}}}class Z{constructor(g,d){Object.assign(this,{password:g,passwordVerification:d}),Y(this,g)}async append(g){let d=this,I,R;if(d.password){d.password=null;let w=crypto.getRandomValues(new Uint8Array(12));w[11]=d.passwordVerification,I=new Uint8Array(g.length+w.length),I.set(W(d,w),0),R=12}else I=new Uint8Array(g.length),R=0;return I.set(W(d,g),R),I}async flush(){return{data:new Uint8Array(0)}}}function ut(x,g){let d=new Uint8Array(g.length);for(let I=0;I<g.length;I++)d[I]=mt(x)^g[I],at(x,d[I]);return d}function W(x,g){let d=new Uint8Array(g.length);for(let I=0;I<g.length;I++)d[I]=mt(x)^g[I],at(x,g[I]);return d}function Y(x,g){x.keys=[305419896,591751049,878082192],x.crcKey0=new i(x.keys[0]),x.crcKey2=new i(x.keys[2]);for(let d=0;d<g.length;d++)at(x,g.charCodeAt(d))}function at(x,g){x.crcKey0.append([g]),x.keys[0]=~x.crcKey0.get(),x.keys[1]=vt(x.keys[1]+dt(x.keys[0])),x.keys[1]=vt(Math.imul(x.keys[1],134775813)+1),x.crcKey2.append([x.keys[1]>>>24]),x.keys[2]=~x.crcKey2.get()}function mt(x){let g=2|x.keys[2];return dt(Math.imul(g,1^g)>>>8)}function dt(x){return 255&x}function vt(x){return 4294967295&x}class xt{constructor(g,{signature:d,password:I,signed:R,compressed:w,zipCrypto:P,passwordVerification:O,encryptionStrength:C},{chunkSize:B}){let H=Boolean(I);Object.assign(this,{signature:d,encrypted:H,signed:R,compressed:w,inflate:w&&new g({chunkSize:B}),crc32:R&&new i,zipCrypto:P,decrypt:H&&P?new $(I,O):new S(I,R,C)})}async append(g){let d=this;return d.encrypted&&g.length&&(g=await d.decrypt.append(g)),d.compressed&&g.length&&(g=await d.inflate.append(g)),(!d.encrypted||d.zipCrypto)&&d.signed&&g.length&&d.crc32.append(g),g}async flush(){let g=this,d,I=new Uint8Array(0);if(g.encrypted){let R=await g.decrypt.flush();if(!R.valid)throw new Error("Invalid signature");I=R.data}if((!g.encrypted||g.zipCrypto)&&g.signed){let R=new DataView(new Uint8Array(4).buffer);if(d=g.crc32.get(),R.setUint32(0,d),g.cipher!=R.getUint32(0,!1))throw new Error("Invalid signature")}return g.compressed&&(I=await g.inflate.append(I)||new Uint8Array(0),await g.inflate.flush()),{data:I,signature:d}}}class ot{constructor(g,{encrypted:d,signed:I,compressed:R,level:w,zipCrypto:P,password:O,passwordVerification:C,encryptionStrength:B},{chunkSize:H}){Object.assign(this,{encrypted:d,signed:I,compressed:R,deflate:R&&new g({level:w||5,chunkSize:H}),crc32:I&&new i,zipCrypto:P,encrypt:d&&P?new Z(O,C):new U(O,B)})}async append(g){let d=this,I=g;return d.compressed&&g.length&&(I=await d.deflate.append(g)),d.encrypted&&I.length&&(I=await d.encrypt.append(I)),(!d.encrypted||d.zipCrypto)&&d.signed&&g.length&&d.crc32.append(g),I}async flush(){let g=this,d,I=new Uint8Array(0);if(g.compressed&&(I=await g.deflate.flush()||new Uint8Array(0)),g.encrypted){I=await g.encrypt.append(I);let R=await g.encrypt.flush();d=R.signature;let w=new Uint8Array(I.length+R.data.length);w.set(I,0),w.set(R.data,I.length),I=w}return g.encrypted&&!g.zipCrypto||!g.signed||(d=g.crc32.get()),{data:I,signature:d}}}let ft={init(x){x.scripts&&x.scripts.length&&importScripts.apply(void 0,x.scripts);let g=x.options,d;self.initCodec&&self.initCodec(),g.codecType.startsWith("deflate")?d=self.Deflate:g.codecType.startsWith("inflate")&&(d=self.Inflate),Wt=function(I,R,w){return R.codecType.startsWith("deflate")?new ot(I,R,w):R.codecType.startsWith("inflate")?new xt(I,R,w):void 0}(d,g,x.config)},append:async x=>({data:await Wt.append(x.data)}),flush:()=>Wt.flush()},Wt;function Dt(x){return x.map(([g,d])=>new Array(g).fill(d,0,g)).flat()}addEventListener("message",async x=>{let g=x.data,d=g.type,I=ft[d];if(I)try{g.data&&(g.data=new Uint8Array(g.data));let R=await I(g)||{};if(R.type=d,R.data)try{R.data=R.data.buffer,postMessage(R,[R.data])}catch(w){postMessage(R)}else postMessage(R)}catch(R){postMessage({type:d,error:{message:R.message,stack:R.stack}})}});let de=[0,1,2,3].concat(...Dt([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Tt(){let x=this;function g(d,I){let R=0;do R|=1&d,d>>>=1,R<<=1;while(--I>0);return R>>>1}x.build_tree=function(d){let I=x.dyn_tree,R=x.stat_desc.static_tree,w=x.stat_desc.elems,P,O,C,B=-1;for(d.heap_len=0,d.heap_max=573,P=0;P<w;P++)I[2*P]!==0?(d.heap[++d.heap_len]=B=P,d.depth[P]=0):I[2*P+1]=0;for(;d.heap_len<2;)C=d.heap[++d.heap_len]=B<2?++B:0,I[2*C]=1,d.depth[C]=0,d.opt_len--,R&&(d.static_len-=R[2*C+1]);for(x.max_code=B,P=Math.floor(d.heap_len/2);P>=1;P--)d.pqdownheap(I,P);C=w;do P=d.heap[1],d.heap[1]=d.heap[d.heap_len--],d.pqdownheap(I,1),O=d.heap[1],d.heap[--d.heap_max]=P,d.heap[--d.heap_max]=O,I[2*C]=I[2*P]+I[2*O],d.depth[C]=Math.max(d.depth[P],d.depth[O])+1,I[2*P+1]=I[2*O+1]=C,d.heap[1]=C++,d.pqdownheap(I,1);while(d.heap_len>=2);d.heap[--d.heap_max]=d.heap[1],function(H){let z=x.dyn_tree,Q=x.stat_desc.static_tree,_t=x.stat_desc.extra_bits,L=x.stat_desc.extra_base,K=x.stat_desc.max_length,A,k,j,q,ht,V,J=0;for(q=0;q<=15;q++)H.bl_count[q]=0;for(z[2*H.heap[H.heap_max]+1]=0,A=H.heap_max+1;A<573;A++)k=H.heap[A],q=z[2*z[2*k+1]+1]+1,q>K&&(q=K,J++),z[2*k+1]=q,k>x.max_code||(H.bl_count[q]++,ht=0,k>=L&&(ht=_t[k-L]),V=z[2*k],H.opt_len+=V*(q+ht),Q&&(H.static_len+=V*(Q[2*k+1]+ht)));if(J!==0){do{for(q=K-1;H.bl_count[q]===0;)q--;H.bl_count[q]--,H.bl_count[q+1]+=2,H.bl_count[K]--,J-=2}while(J>0);for(q=K;q!==0;q--)for(k=H.bl_count[q];k!==0;)j=H.heap[--A],j>x.max_code||(z[2*j+1]!=q&&(H.opt_len+=(q-z[2*j+1])*z[2*j],z[2*j+1]=q),k--)}}(d),function(H,z,Q){let _t=[],L,K,A,k=0;for(L=1;L<=15;L++)_t[L]=k=k+Q[L-1]<<1;for(K=0;K<=z;K++)A=H[2*K+1],A!==0&&(H[2*K]=g(_t[A]++,A))}(I,x.max_code,d.bl_count)}}function Rt(x,g,d,I,R){let w=this;w.static_tree=x,w.extra_bits=g,w.extra_base=d,w.elems=I,w.max_length=R}function zt(x,g,d,I,R){let w=this;w.good_length=x,w.max_lazy=g,w.nice_length=d,w.max_chain=I,w.func=R}Tt._length_code=[0,1,2,3,4,5,6,7].concat(...Dt([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),Tt.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Tt.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Tt.d_code=function(x){return x<256?de[x]:de[256+(x>>>7)]},Tt.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tt.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tt.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Tt.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Rt.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],Rt.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],Rt.static_l_desc=new Rt(Rt.static_ltree,Tt.extra_lbits,257,286,15),Rt.static_d_desc=new Rt(Rt.static_dtree,Tt.extra_dbits,0,30,15),Rt.static_bl_desc=new Rt(null,Tt.extra_blbits,0,19,7);let jt=[new zt(0,0,0,0,0),new zt(4,4,8,4,1),new zt(4,5,16,8,1),new zt(4,6,32,32,1),new zt(4,4,16,16,2),new zt(8,16,32,32,2),new zt(8,16,128,128,2),new zt(8,32,128,256,2),new zt(32,128,258,1024,2),new zt(32,258,258,4096,2)],kt=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function ue(x,g,d,I){let R=x[2*g],w=x[2*d];return R<w||R==w&&I[g]<=I[d]}function Se(){let x=this,g,d,I,R,w,P,O,C,B,H,z,Q,_t,L,K,A,k,j,q,ht,V,J,G,st,Pt,pt,tt,nt,St,Nt,Lt,bt,At,yr=new Tt,xr=new Tt,Ct=new Tt,br,Ht,Bt,ki,Aa,Fi,Ne,we;function jo(){let et;for(et=0;et<286;et++)Lt[2*et]=0;for(et=0;et<30;et++)bt[2*et]=0;for(et=0;et<19;et++)At[2*et]=0;Lt[512]=1,x.opt_len=x.static_len=0,Bt=Aa=0}function Vo(et,it){let lt,ct=-1,rt=et[1],It=0,Ot=7,se=4;rt===0&&(Ot=138,se=3),et[2*(it+1)+1]=65535;for(let Vt=0;Vt<=it;Vt++)lt=rt,rt=et[2*(Vt+1)+1],++It<Ot&&lt==rt||(It<se?At[2*lt]+=It:lt!==0?(lt!=ct&&At[2*lt]++,At[32]++):It<=10?At[34]++:At[36]++,It=0,ct=lt,rt===0?(Ot=138,se=3):lt==rt?(Ot=6,se=3):(Ot=7,se=4))}function ni(et){x.pending_buf[x.pending++]=et}function Mi(et){ni(255&et),ni(et>>>8&255)}function Te(et,it){let lt,ct=it;we>16-ct?(lt=et,Ne|=lt<<we&65535,Mi(Ne),Ne=lt>>>16-we,we+=ct-16):(Ne|=et<<we&65535,we+=ct)}function Xe(et,it){let lt=2*et;Te(65535&it[lt],65535&it[lt+1])}function Yo(et,it){let lt,ct,rt=-1,It=et[1],Ot=0,se=7,Vt=4;for(It===0&&(se=138,Vt=3),lt=0;lt<=it;lt++)if(ct=It,It=et[2*(lt+1)+1],!(++Ot<se&&ct==It)){if(Ot<Vt)do Xe(ct,At);while(--Ot!=0);else ct!==0?(ct!=rt&&(Xe(ct,At),Ot--),Xe(16,At),Te(Ot-3,2)):Ot<=10?(Xe(17,At),Te(Ot-3,3)):(Xe(18,At),Te(Ot-11,7));Ot=0,rt=ct,It===0?(se=138,Vt=3):ct==It?(se=6,Vt=3):(se=7,Vt=4)}}function Wo(){we==16?(Mi(Ne),Ne=0,we=0):we>=8&&(ni(255&Ne),Ne>>>=8,we-=8)}function Li(et,it){let lt,ct,rt;if(x.pending_buf[ki+2*Bt]=et>>>8&255,x.pending_buf[ki+2*Bt+1]=255&et,x.pending_buf[br+Bt]=255&it,Bt++,et===0?Lt[2*it]++:(Aa++,et--,Lt[2*(Tt._length_code[it]+256+1)]++,bt[2*Tt.d_code(et)]++),(8191&Bt)==0&&tt>2){for(lt=8*Bt,ct=V-k,rt=0;rt<30;rt++)lt+=bt[2*rt]*(5+Tt.extra_dbits[rt]);if(lt>>>=3,Aa<Math.floor(Bt/2)&&lt<Math.floor(ct/2))return!0}return Bt==Ht-1}function zo(et,it){let lt,ct,rt,It,Ot=0;if(Bt!==0)do lt=x.pending_buf[ki+2*Ot]<<8&65280|255&x.pending_buf[ki+2*Ot+1],ct=255&x.pending_buf[br+Ot],Ot++,lt===0?Xe(ct,et):(rt=Tt._length_code[ct],Xe(rt+256+1,et),It=Tt.extra_lbits[rt],It!==0&&(ct-=Tt.base_length[rt],Te(ct,It)),lt--,rt=Tt.d_code(lt),Xe(rt,it),It=Tt.extra_dbits[rt],It!==0&&(lt-=Tt.base_dist[rt],Te(lt,It)));while(Ot<Bt);Xe(256,et),Fi=et[513]}function qo(){we>8?Mi(Ne):we>0&&ni(255&Ne),Ne=0,we=0}function $o(et,it,lt){Te(0+(lt?1:0),3),function(ct,rt,It){qo(),Fi=8,Mi(rt),Mi(~rt),x.pending_buf.set(C.subarray(ct,ct+rt),x.pending),x.pending+=rt}(et,it)}function Dc(et,it,lt){let ct,rt,It=0;tt>0?(yr.build_tree(x),xr.build_tree(x),It=function(){let Ot;for(Vo(Lt,yr.max_code),Vo(bt,xr.max_code),Ct.build_tree(x),Ot=18;Ot>=3&&At[2*Tt.bl_order[Ot]+1]===0;Ot--);return x.opt_len+=3*(Ot+1)+5+5+4,Ot}(),ct=x.opt_len+3+7>>>3,rt=x.static_len+3+7>>>3,rt<=ct&&(ct=rt)):ct=rt=it+5,it+4<=ct&&et!=-1?$o(et,it,lt):rt==ct?(Te(2+(lt?1:0),3),zo(Rt.static_ltree,Rt.static_dtree)):(Te(4+(lt?1:0),3),function(Ot,se,Vt){let te;for(Te(Ot-257,5),Te(se-1,5),Te(Vt-4,4),te=0;te<Vt;te++)Te(At[2*Tt.bl_order[te]+1],3);Yo(Lt,Ot-1),Yo(bt,se-1)}(yr.max_code+1,xr.max_code+1,It+1),zo(Lt,bt)),jo(),lt&&qo()}function wr(et){Dc(k>=0?k:-1,V-k,et),k=V,g.flush_pending()}function Ca(){let et,it,lt,ct;do{if(ct=B-G-V,ct===0&&V===0&&G===0)ct=w;else if(ct==-1)ct--;else if(V>=w+w-262){C.set(C.subarray(w,w+w),0),J-=w,V-=w,k-=w,et=_t,lt=et;do it=65535&z[--lt],z[lt]=it>=w?it-w:0;while(--et!=0);et=w,lt=et;do it=65535&H[--lt],H[lt]=it>=w?it-w:0;while(--et!=0);ct+=w}if(g.avail_in===0)return;et=g.read_buf(C,V+G,ct),G+=et,G>=3&&(Q=255&C[V],Q=(Q<<A^255&C[V+1])&K)}while(G<262&&g.avail_in!==0)}function Zo(et){let it,lt,ct=Pt,rt=V,It=st,Ot=V>w-262?V-(w-262):0,se=Nt,Vt=O,te=V+258,Ee=C[rt+It-1],Tr=C[rt+It];st>=St&&(ct>>=2),se>G&&(se=G);do if(it=et,C[it+It]==Tr&&C[it+It-1]==Ee&&C[it]==C[rt]&&C[++it]==C[rt+1]){rt+=2,it++;do;while(C[++rt]==C[++it]&&C[++rt]==C[++it]&&C[++rt]==C[++it]&&C[++rt]==C[++it]&&C[++rt]==C[++it]&&C[++rt]==C[++it]&&C[++rt]==C[++it]&&C[++rt]==C[++it]&&rt<te);if(lt=258-(te-rt),rt=te-258,lt>It){if(J=et,It=lt,lt>=se)break;Ee=C[rt+It-1],Tr=C[rt+It]}}while((et=65535&H[et&Vt])>Ot&&--ct!=0);return It<=G?It:G}function Bc(et){return et.total_in=et.total_out=0,et.msg=null,x.pending=0,x.pending_out=0,d=113,R=0,yr.dyn_tree=Lt,yr.stat_desc=Rt.static_l_desc,xr.dyn_tree=bt,xr.stat_desc=Rt.static_d_desc,Ct.dyn_tree=At,Ct.stat_desc=Rt.static_bl_desc,Ne=0,we=0,Fi=8,jo(),function(){B=2*w,z[_t-1]=0;for(let it=0;it<_t-1;it++)z[it]=0;pt=jt[tt].max_lazy,St=jt[tt].good_length,Nt=jt[tt].nice_length,Pt=jt[tt].max_chain,V=0,k=0,G=0,j=st=2,ht=0,Q=0}(),0}x.depth=[],x.bl_count=[],x.heap=[],Lt=[],bt=[],At=[],x.pqdownheap=function(et,it){let lt=x.heap,ct=lt[it],rt=it<<1;for(;rt<=x.heap_len&&(rt<x.heap_len&&ue(et,lt[rt+1],lt[rt],x.depth)&&rt++,!ue(et,ct,lt[rt],x.depth));)lt[it]=lt[rt],it=rt,rt<<=1;lt[it]=ct},x.deflateInit=function(et,it,lt,ct,rt,It){return ct||(ct=8),rt||(rt=8),It||(It=0),et.msg=null,it==-1&&(it=6),rt<1||rt>9||ct!=8||lt<9||lt>15||it<0||it>9||It<0||It>2?-2:(et.dstate=x,P=lt,w=1<<P,O=w-1,L=rt+7,_t=1<<L,K=_t-1,A=Math.floor((L+3-1)/3),C=new Uint8Array(2*w),H=[],z=[],Ht=1<<rt+6,x.pending_buf=new Uint8Array(4*Ht),I=4*Ht,ki=Math.floor(Ht/2),br=3*Ht,tt=it,nt=It,Bc(et))},x.deflateEnd=function(){return d!=42&&d!=113&&d!=666?-2:(x.pending_buf=null,z=null,H=null,C=null,x.dstate=null,d==113?-3:0)},x.deflateParams=function(et,it,lt){let ct=0;return it==-1&&(it=6),it<0||it>9||lt<0||lt>2?-2:(jt[tt].func!=jt[it].func&&et.total_in!==0&&(ct=et.deflate(1)),tt!=it&&(tt=it,pt=jt[tt].max_lazy,St=jt[tt].good_length,Nt=jt[tt].nice_length,Pt=jt[tt].max_chain),nt=lt,ct)},x.deflateSetDictionary=function(et,it,lt){let ct,rt=lt,It=0;if(!it||d!=42)return-2;if(rt<3)return 0;for(rt>w-262&&(rt=w-262,It=lt-rt),C.set(it.subarray(It,It+rt),0),V=rt,k=rt,Q=255&C[0],Q=(Q<<A^255&C[1])&K,ct=0;ct<=rt-3;ct++)Q=(Q<<A^255&C[ct+2])&K,H[ct&O]=z[Q],z[Q]=ct;return 0},x.deflate=function(et,it){let lt,ct,rt,It,Ot;if(it>4||it<0)return-2;if(!et.next_out||!et.next_in&&et.avail_in!==0||d==666&&it!=4)return et.msg=kt[4],-2;if(et.avail_out===0)return et.msg=kt[7],-5;var se;if(g=et,It=R,R=it,d==42&&(ct=8+(P-8<<4)<<8,rt=(tt-1&255)>>1,rt>3&&(rt=3),ct|=rt<<6,V!==0&&(ct|=32),ct+=31-ct%31,d=113,ni((se=ct)>>8&255),ni(255&se)),x.pending!==0){if(g.flush_pending(),g.avail_out===0)return R=-1,0}else if(g.avail_in===0&&it<=It&&it!=4)return g.msg=kt[7],-5;if(d==666&&g.avail_in!==0)return et.msg=kt[7],-5;if(g.avail_in!==0||G!==0||it!=0&&d!=666){switch(Ot=-1,jt[tt].func){case 0:Ot=function(Vt){let te,Ee=65535;for(Ee>I-5&&(Ee=I-5);;){if(G<=1){if(Ca(),G===0&&Vt==0)return 0;if(G===0)break}if(V+=G,G=0,te=k+Ee,(V===0||V>=te)&&(G=V-te,V=te,wr(!1),g.avail_out===0)||V-k>=w-262&&(wr(!1),g.avail_out===0))return 0}return wr(Vt==4),g.avail_out===0?Vt==4?2:0:Vt==4?3:1}(it);break;case 1:Ot=function(Vt){let te,Ee=0;for(;;){if(G<262){if(Ca(),G<262&&Vt==0)return 0;if(G===0)break}if(G>=3&&(Q=(Q<<A^255&C[V+2])&K,Ee=65535&z[Q],H[V&O]=z[Q],z[Q]=V),Ee!==0&&(V-Ee&65535)<=w-262&&nt!=2&&(j=Zo(Ee)),j>=3)if(te=Li(V-J,j-3),G-=j,j<=pt&&G>=3){j--;do V++,Q=(Q<<A^255&C[V+2])&K,Ee=65535&z[Q],H[V&O]=z[Q],z[Q]=V;while(--j!=0);V++}else V+=j,j=0,Q=255&C[V],Q=(Q<<A^255&C[V+1])&K;else te=Li(0,255&C[V]),G--,V++;if(te&&(wr(!1),g.avail_out===0))return 0}return wr(Vt==4),g.avail_out===0?Vt==4?2:0:Vt==4?3:1}(it);break;case 2:Ot=function(Vt){let te,Ee,Tr=0;for(;;){if(G<262){if(Ca(),G<262&&Vt==0)return 0;if(G===0)break}if(G>=3&&(Q=(Q<<A^255&C[V+2])&K,Tr=65535&z[Q],H[V&O]=z[Q],z[Q]=V),st=j,q=J,j=2,Tr!==0&&st<pt&&(V-Tr&65535)<=w-262&&(nt!=2&&(j=Zo(Tr)),j<=5&&(nt==1||j==3&&V-J>4096)&&(j=2)),st>=3&&j<=st){Ee=V+G-3,te=Li(V-1-q,st-3),G-=st-1,st-=2;do++V<=Ee&&(Q=(Q<<A^255&C[V+2])&K,Tr=65535&z[Q],H[V&O]=z[Q],z[Q]=V);while(--st!=0);if(ht=0,j=2,V++,te&&(wr(!1),g.avail_out===0))return 0}else if(ht!==0){if(te=Li(0,255&C[V-1]),te&&wr(!1),V++,G--,g.avail_out===0)return 0}else ht=1,V++,G--}return ht!==0&&(te=Li(0,255&C[V-1]),ht=0),wr(Vt==4),g.avail_out===0?Vt==4?2:0:Vt==4?3:1}(it)}if(Ot!=2&&Ot!=3||(d=666),Ot==0||Ot==2)return g.avail_out===0&&(R=-1),0;if(Ot==1){if(it==1)Te(2,3),Xe(256,Rt.static_ltree),Wo(),1+Fi+10-we<9&&(Te(2,3),Xe(256,Rt.static_ltree),Wo()),Fi=7;else if($o(0,0,!1),it==3)for(lt=0;lt<_t;lt++)z[lt]=0;if(g.flush_pending(),g.avail_out===0)return R=-1,0}}return it!=4?0:1}}function Ut(){let x=this;x.next_in_index=0,x.next_out_index=0,x.avail_in=0,x.total_in=0,x.avail_out=0,x.total_out=0}function ve(x){let g=new Ut,d=(I=x&&x.chunkSize?x.chunkSize:65536)+5*(Math.floor(I/16383)+1);var I;let R=new Uint8Array(d),w=x?x.level:-1;w===void 0&&(w=-1),g.deflateInit(w),g.next_out=R,this.append=function(P,O){let C,B,H=0,z=0,Q=0,_t=[];if(P.length){g.next_in_index=0,g.next_in=P,g.avail_in=P.length;do{if(g.next_out_index=0,g.avail_out=d,C=g.deflate(0),C!=0)throw new Error("deflating: "+g.msg);g.next_out_index&&(g.next_out_index==d?_t.push(new Uint8Array(R)):_t.push(R.slice(0,g.next_out_index))),Q+=g.next_out_index,O&&g.next_in_index>0&&g.next_in_index!=H&&(O(g.next_in_index),H=g.next_in_index)}while(g.avail_in>0||g.avail_out===0);return _t.length>1?(B=new Uint8Array(Q),_t.forEach(function(L){B.set(L,z),z+=L.length})):B=_t[0]||new Uint8Array(0),B}},this.flush=function(){let P,O,C=0,B=0,H=[];do{if(g.next_out_index=0,g.avail_out=d,P=g.deflate(4),P!=1&&P!=0)throw new Error("deflating: "+g.msg);d-g.avail_out>0&&H.push(R.slice(0,g.next_out_index)),B+=g.next_out_index}while(g.avail_in>0||g.avail_out===0);return g.deflateEnd(),O=new Uint8Array(B),H.forEach(function(z){O.set(z,C),C+=z.length}),O}}Ut.prototype={deflateInit:function(x,g){let d=this;return d.dstate=new Se,g||(g=15),d.dstate.deflateInit(d,x,g)},deflate:function(x){let g=this;return g.dstate?g.dstate.deflate(g,x):-2},deflateEnd:function(){let x=this;if(!x.dstate)return-2;let g=x.dstate.deflateEnd();return x.dstate=null,g},deflateParams:function(x,g){let d=this;return d.dstate?d.dstate.deflateParams(d,x,g):-2},deflateSetDictionary:function(x,g){let d=this;return d.dstate?d.dstate.deflateSetDictionary(d,x,g):-2},read_buf:function(x,g,d){let I=this,R=I.avail_in;return R>d&&(R=d),R===0?0:(I.avail_in-=R,x.set(I.next_in.subarray(I.next_in_index,I.next_in_index+R),g),I.next_in_index+=R,I.total_in+=R,R)},flush_pending:function(){let x=this,g=x.dstate.pending;g>x.avail_out&&(g=x.avail_out),g!==0&&(x.next_out.set(x.dstate.pending_buf.subarray(x.dstate.pending_out,x.dstate.pending_out+g),x.next_out_index),x.next_out_index+=g,x.dstate.pending_out+=g,x.total_out+=g,x.avail_out-=g,x.dstate.pending-=g,x.dstate.pending===0&&(x.dstate.pending_out=0))}};let ne=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Jt=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],_e=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],Fr=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ii=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Mr=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Sa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function ar(){let x,g,d,I,R,w;function P(C,B,H,z,Q,_t,L,K,A,k,j){let q,ht,V,J,G,st,Pt,pt,tt,nt,St,Nt,Lt,bt,At;nt=0,G=H;do d[C[B+nt]]++,nt++,G--;while(G!==0);if(d[0]==H)return L[0]=-1,K[0]=0,0;for(pt=K[0],st=1;st<=15&&d[st]===0;st++);for(Pt=st,pt<st&&(pt=st),G=15;G!==0&&d[G]===0;G--);for(V=G,pt>G&&(pt=G),K[0]=pt,bt=1<<st;st<G;st++,bt<<=1)if((bt-=d[st])<0)return-3;if((bt-=d[G])<0)return-3;for(d[G]+=bt,w[1]=st=0,nt=1,Lt=2;--G!=0;)w[Lt]=st+=d[nt],Lt++,nt++;G=0,nt=0;do(st=C[B+nt])!==0&&(j[w[st]++]=G),nt++;while(++G<H);for(H=w[V],w[0]=G=0,nt=0,J=-1,Nt=-pt,R[0]=0,St=0,At=0;Pt<=V;Pt++)for(q=d[Pt];q--!=0;){for(;Pt>Nt+pt;){if(J++,Nt+=pt,At=V-Nt,At=At>pt?pt:At,(ht=1<<(st=Pt-Nt))>q+1&&(ht-=q+1,Lt=Pt,st<At))for(;++st<At&&!((ht<<=1)<=d[++Lt]);)ht-=d[Lt];if(At=1<<st,k[0]+At>1440)return-3;R[J]=St=k[0],k[0]+=At,J!==0?(w[J]=G,I[0]=st,I[1]=pt,st=G>>>Nt-pt,I[2]=St-R[J-1]-st,A.set(I,3*(R[J-1]+st))):L[0]=St}for(I[1]=Pt-Nt,nt>=H?I[0]=192:j[nt]<z?(I[0]=j[nt]<256?0:96,I[2]=j[nt++]):(I[0]=_t[j[nt]-z]+16+64,I[2]=Q[j[nt++]-z]),ht=1<<Pt-Nt,st=G>>>Nt;st<At;st+=ht)A.set(I,3*(St+st));for(st=1<<Pt-1;(G&st)!=0;st>>>=1)G^=st;for(G^=st,tt=(1<<Nt)-1;(G&tt)!=w[J];)J--,Nt-=pt,tt=(1<<Nt)-1}return bt!==0&&V!=1?-5:0}function O(C){let B;for(x||(x=[],g=[],d=new Int32Array(16),I=[],R=new Int32Array(15),w=new Int32Array(16)),g.length<C&&(g=[]),B=0;B<C;B++)g[B]=0;for(B=0;B<16;B++)d[B]=0;for(B=0;B<3;B++)I[B]=0;R.set(d.subarray(0,15),0),w.set(d.subarray(0,16),0)}this.inflate_trees_bits=function(C,B,H,z,Q){let _t;return O(19),x[0]=0,_t=P(C,0,19,19,null,null,H,B,z,x,g),_t==-3?Q.msg="oversubscribed dynamic bit lengths tree":_t!=-5&&B[0]!==0||(Q.msg="incomplete dynamic bit lengths tree",_t=-3),_t},this.inflate_trees_dynamic=function(C,B,H,z,Q,_t,L,K,A){let k;return O(288),x[0]=0,k=P(H,0,C,257,Fr,ii,_t,z,K,x,g),k!=0||z[0]===0?(k==-3?A.msg="oversubscribed literal/length tree":k!=-4&&(A.msg="incomplete literal/length tree",k=-3),k):(O(288),k=P(H,C,B,0,Mr,Sa,L,Q,K,x,g),k!=0||Q[0]===0&&C>257?(k==-3?A.msg="oversubscribed distance tree":k==-5?(A.msg="incomplete distance tree",k=-3):k!=-4&&(A.msg="empty distance tree with lengths",k=-3),k):0)}}function xn(){let x=this,g,d,I,R,w=0,P=0,O=0,C=0,B=0,H=0,z=0,Q=0,_t=0,L=0;function K(A,k,j,q,ht,V,J,G){let st,Pt,pt,tt,nt,St,Nt,Lt,bt,At,yr,xr,Ct,br,Ht,Bt;Nt=G.next_in_index,Lt=G.avail_in,nt=J.bitb,St=J.bitk,bt=J.write,At=bt<J.read?J.read-bt-1:J.end-bt,yr=ne[A],xr=ne[k];do{for(;St<20;)Lt--,nt|=(255&G.read_byte(Nt++))<<St,St+=8;if(st=nt&yr,Pt=j,pt=q,Bt=3*(pt+st),(tt=Pt[Bt])!==0)for(;;){if(nt>>=Pt[Bt+1],St-=Pt[Bt+1],(16&tt)!=0){for(tt&=15,Ct=Pt[Bt+2]+(nt&ne[tt]),nt>>=tt,St-=tt;St<15;)Lt--,nt|=(255&G.read_byte(Nt++))<<St,St+=8;for(st=nt&xr,Pt=ht,pt=V,Bt=3*(pt+st),tt=Pt[Bt];;){if(nt>>=Pt[Bt+1],St-=Pt[Bt+1],(16&tt)!=0){for(tt&=15;St<tt;)Lt--,nt|=(255&G.read_byte(Nt++))<<St,St+=8;if(br=Pt[Bt+2]+(nt&ne[tt]),nt>>=tt,St-=tt,At-=Ct,bt>=br)Ht=bt-br,bt-Ht>0&&2>bt-Ht?(J.window[bt++]=J.window[Ht++],J.window[bt++]=J.window[Ht++],Ct-=2):(J.window.set(J.window.subarray(Ht,Ht+2),bt),bt+=2,Ht+=2,Ct-=2);else{Ht=bt-br;do Ht+=J.end;while(Ht<0);if(tt=J.end-Ht,Ct>tt){if(Ct-=tt,bt-Ht>0&&tt>bt-Ht)do J.window[bt++]=J.window[Ht++];while(--tt!=0);else J.window.set(J.window.subarray(Ht,Ht+tt),bt),bt+=tt,Ht+=tt,tt=0;Ht=0}}if(bt-Ht>0&&Ct>bt-Ht)do J.window[bt++]=J.window[Ht++];while(--Ct!=0);else J.window.set(J.window.subarray(Ht,Ht+Ct),bt),bt+=Ct,Ht+=Ct,Ct=0;break}if((64&tt)!=0)return G.msg="invalid distance code",Ct=G.avail_in-Lt,Ct=St>>3<Ct?St>>3:Ct,Lt+=Ct,Nt-=Ct,St-=Ct<<3,J.bitb=nt,J.bitk=St,G.avail_in=Lt,G.total_in+=Nt-G.next_in_index,G.next_in_index=Nt,J.write=bt,-3;st+=Pt[Bt+2],st+=nt&ne[tt],Bt=3*(pt+st),tt=Pt[Bt]}break}if((64&tt)!=0)return(32&tt)!=0?(Ct=G.avail_in-Lt,Ct=St>>3<Ct?St>>3:Ct,Lt+=Ct,Nt-=Ct,St-=Ct<<3,J.bitb=nt,J.bitk=St,G.avail_in=Lt,G.total_in+=Nt-G.next_in_index,G.next_in_index=Nt,J.write=bt,1):(G.msg="invalid literal/length code",Ct=G.avail_in-Lt,Ct=St>>3<Ct?St>>3:Ct,Lt+=Ct,Nt-=Ct,St-=Ct<<3,J.bitb=nt,J.bitk=St,G.avail_in=Lt,G.total_in+=Nt-G.next_in_index,G.next_in_index=Nt,J.write=bt,-3);if(st+=Pt[Bt+2],st+=nt&ne[tt],Bt=3*(pt+st),(tt=Pt[Bt])===0){nt>>=Pt[Bt+1],St-=Pt[Bt+1],J.window[bt++]=Pt[Bt+2],At--;break}}else nt>>=Pt[Bt+1],St-=Pt[Bt+1],J.window[bt++]=Pt[Bt+2],At--}while(At>=258&&Lt>=10);return Ct=G.avail_in-Lt,Ct=St>>3<Ct?St>>3:Ct,Lt+=Ct,Nt-=Ct,St-=Ct<<3,J.bitb=nt,J.bitk=St,G.avail_in=Lt,G.total_in+=Nt-G.next_in_index,G.next_in_index=Nt,J.write=bt,0}x.init=function(A,k,j,q,ht,V){g=0,z=A,Q=k,I=j,_t=q,R=ht,L=V,d=null},x.proc=function(A,k,j){let q,ht,V,J,G,st,Pt,pt=0,tt=0,nt=0;for(nt=k.next_in_index,J=k.avail_in,pt=A.bitb,tt=A.bitk,G=A.write,st=G<A.read?A.read-G-1:A.end-G;;)switch(g){case 0:if(st>=258&&J>=10&&(A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,j=K(z,Q,I,_t,R,L,A,k),nt=k.next_in_index,J=k.avail_in,pt=A.bitb,tt=A.bitk,G=A.write,st=G<A.read?A.read-G-1:A.end-G,j!=0)){g=j==1?7:9;break}O=z,d=I,P=_t,g=1;case 1:for(q=O;tt<q;){if(J===0)return A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);j=0,J--,pt|=(255&k.read_byte(nt++))<<tt,tt+=8}if(ht=3*(P+(pt&ne[q])),pt>>>=d[ht+1],tt-=d[ht+1],V=d[ht],V===0){C=d[ht+2],g=6;break}if((16&V)!=0){B=15&V,w=d[ht+2],g=2;break}if((64&V)==0){O=V,P=ht/3+d[ht+2];break}if((32&V)!=0){g=7;break}return g=9,k.msg="invalid literal/length code",j=-3,A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);case 2:for(q=B;tt<q;){if(J===0)return A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);j=0,J--,pt|=(255&k.read_byte(nt++))<<tt,tt+=8}w+=pt&ne[q],pt>>=q,tt-=q,O=Q,d=R,P=L,g=3;case 3:for(q=O;tt<q;){if(J===0)return A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);j=0,J--,pt|=(255&k.read_byte(nt++))<<tt,tt+=8}if(ht=3*(P+(pt&ne[q])),pt>>=d[ht+1],tt-=d[ht+1],V=d[ht],(16&V)!=0){B=15&V,H=d[ht+2],g=4;break}if((64&V)==0){O=V,P=ht/3+d[ht+2];break}return g=9,k.msg="invalid distance code",j=-3,A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);case 4:for(q=B;tt<q;){if(J===0)return A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);j=0,J--,pt|=(255&k.read_byte(nt++))<<tt,tt+=8}H+=pt&ne[q],pt>>=q,tt-=q,g=5;case 5:for(Pt=G-H;Pt<0;)Pt+=A.end;for(;w!==0;){if(st===0&&(G==A.end&&A.read!==0&&(G=0,st=G<A.read?A.read-G-1:A.end-G),st===0&&(A.write=G,j=A.inflate_flush(k,j),G=A.write,st=G<A.read?A.read-G-1:A.end-G,G==A.end&&A.read!==0&&(G=0,st=G<A.read?A.read-G-1:A.end-G),st===0)))return A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);A.window[G++]=A.window[Pt++],st--,Pt==A.end&&(Pt=0),w--}g=0;break;case 6:if(st===0&&(G==A.end&&A.read!==0&&(G=0,st=G<A.read?A.read-G-1:A.end-G),st===0&&(A.write=G,j=A.inflate_flush(k,j),G=A.write,st=G<A.read?A.read-G-1:A.end-G,G==A.end&&A.read!==0&&(G=0,st=G<A.read?A.read-G-1:A.end-G),st===0)))return A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);j=0,A.window[G++]=C,st--,g=0;break;case 7:if(tt>7&&(tt-=8,J++,nt--),A.write=G,j=A.inflate_flush(k,j),G=A.write,st=G<A.read?A.read-G-1:A.end-G,A.read!=A.write)return A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);g=8;case 8:return j=1,A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);case 9:return j=-3,A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j);default:return j=-2,A.bitb=pt,A.bitk=tt,k.avail_in=J,k.total_in+=nt-k.next_in_index,k.next_in_index=nt,A.write=G,A.inflate_flush(k,j)}},x.free=function(){}}ar.inflate_trees_fixed=function(x,g,d,I){return x[0]=9,g[0]=5,d[0]=Jt,I[0]=_e,0};let Oi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function Ia(x,g){let d=this,I,R=0,w=0,P=0,O=0,C=[0],B=[0],H=new xn,z=0,Q=new Int32Array(4320),_t=new ar;d.bitk=0,d.bitb=0,d.window=new Uint8Array(g),d.end=g,d.read=0,d.write=0,d.reset=function(L,K){K&&(K[0]=0),R==6&&H.free(L),R=0,d.bitk=0,d.bitb=0,d.read=d.write=0},d.reset(x,null),d.inflate_flush=function(L,K){let A,k,j;return k=L.next_out_index,j=d.read,A=(j<=d.write?d.write:d.end)-j,A>L.avail_out&&(A=L.avail_out),A!==0&&K==-5&&(K=0),L.avail_out-=A,L.total_out+=A,L.next_out.set(d.window.subarray(j,j+A),k),k+=A,j+=A,j==d.end&&(j=0,d.write==d.end&&(d.write=0),A=d.write-j,A>L.avail_out&&(A=L.avail_out),A!==0&&K==-5&&(K=0),L.avail_out-=A,L.total_out+=A,L.next_out.set(d.window.subarray(j,j+A),k),k+=A,j+=A),L.next_out_index=k,d.read=j,K},d.proc=function(L,K){let A,k,j,q,ht,V,J,G;for(q=L.next_in_index,ht=L.avail_in,k=d.bitb,j=d.bitk,V=d.write,J=V<d.read?d.read-V-1:d.end-V;;){let st,Pt,pt,tt,nt,St,Nt,Lt;switch(R){case 0:for(;j<3;){if(ht===0)return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);K=0,ht--,k|=(255&L.read_byte(q++))<<j,j+=8}switch(A=7&k,z=1&A,A>>>1){case 0:k>>>=3,j-=3,A=7&j,k>>>=A,j-=A,R=1;break;case 1:st=[],Pt=[],pt=[[]],tt=[[]],ar.inflate_trees_fixed(st,Pt,pt,tt),H.init(st[0],Pt[0],pt[0],0,tt[0],0),k>>>=3,j-=3,R=6;break;case 2:k>>>=3,j-=3,R=3;break;case 3:return k>>>=3,j-=3,R=9,L.msg="invalid block type",K=-3,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K)}break;case 1:for(;j<32;){if(ht===0)return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);K=0,ht--,k|=(255&L.read_byte(q++))<<j,j+=8}if((~k>>>16&65535)!=(65535&k))return R=9,L.msg="invalid stored block lengths",K=-3,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);w=65535&k,k=j=0,R=w!==0?2:z!==0?7:0;break;case 2:if(ht===0||J===0&&(V==d.end&&d.read!==0&&(V=0,J=V<d.read?d.read-V-1:d.end-V),J===0&&(d.write=V,K=d.inflate_flush(L,K),V=d.write,J=V<d.read?d.read-V-1:d.end-V,V==d.end&&d.read!==0&&(V=0,J=V<d.read?d.read-V-1:d.end-V),J===0)))return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);if(K=0,A=w,A>ht&&(A=ht),A>J&&(A=J),d.window.set(L.read_buf(q,A),V),q+=A,ht-=A,V+=A,J-=A,(w-=A)!=0)break;R=z!==0?7:0;break;case 3:for(;j<14;){if(ht===0)return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);K=0,ht--,k|=(255&L.read_byte(q++))<<j,j+=8}if(P=A=16383&k,(31&A)>29||(A>>5&31)>29)return R=9,L.msg="too many length or distance symbols",K=-3,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);if(A=258+(31&A)+(A>>5&31),!I||I.length<A)I=[];else for(G=0;G<A;G++)I[G]=0;k>>>=14,j-=14,O=0,R=4;case 4:for(;O<4+(P>>>10);){for(;j<3;){if(ht===0)return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);K=0,ht--,k|=(255&L.read_byte(q++))<<j,j+=8}I[Oi[O++]]=7&k,k>>>=3,j-=3}for(;O<19;)I[Oi[O++]]=0;if(C[0]=7,A=_t.inflate_trees_bits(I,C,B,Q,L),A!=0)return(K=A)==-3&&(I=null,R=9),d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);O=0,R=5;case 5:for(;A=P,!(O>=258+(31&A)+(A>>5&31));){let bt,At;for(A=C[0];j<A;){if(ht===0)return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);K=0,ht--,k|=(255&L.read_byte(q++))<<j,j+=8}if(A=Q[3*(B[0]+(k&ne[A]))+1],At=Q[3*(B[0]+(k&ne[A]))+2],At<16)k>>>=A,j-=A,I[O++]=At;else{for(G=At==18?7:At-14,bt=At==18?11:3;j<A+G;){if(ht===0)return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);K=0,ht--,k|=(255&L.read_byte(q++))<<j,j+=8}if(k>>>=A,j-=A,bt+=k&ne[G],k>>>=G,j-=G,G=O,A=P,G+bt>258+(31&A)+(A>>5&31)||At==16&&G<1)return I=null,R=9,L.msg="invalid bit length repeat",K=-3,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);At=At==16?I[G-1]:0;do I[G++]=At;while(--bt!=0);O=G}}if(B[0]=-1,nt=[],St=[],Nt=[],Lt=[],nt[0]=9,St[0]=6,A=P,A=_t.inflate_trees_dynamic(257+(31&A),1+(A>>5&31),I,nt,St,Nt,Lt,Q,L),A!=0)return A==-3&&(I=null,R=9),K=A,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);H.init(nt[0],St[0],Q,Nt[0],Q,Lt[0]),R=6;case 6:if(d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,(K=H.proc(d,L,K))!=1)return d.inflate_flush(L,K);if(K=0,H.free(L),q=L.next_in_index,ht=L.avail_in,k=d.bitb,j=d.bitk,V=d.write,J=V<d.read?d.read-V-1:d.end-V,z===0){R=0;break}R=7;case 7:if(d.write=V,K=d.inflate_flush(L,K),V=d.write,J=V<d.read?d.read-V-1:d.end-V,d.read!=d.write)return d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);R=8;case 8:return K=1,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);case 9:return K=-3,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K);default:return K=-2,d.bitb=k,d.bitk=j,L.avail_in=ht,L.total_in+=q-L.next_in_index,L.next_in_index=q,d.write=V,d.inflate_flush(L,K)}}},d.free=function(L){d.reset(L,null),d.window=null,Q=null},d.set_dictionary=function(L,K,A){d.window.set(L.subarray(K,K+A),0),d.read=d.write=A},d.sync_point=function(){return R==1?1:0}}let bn=[0,0,255,255];function Pa(){let x=this;function g(d){return d&&d.istate?(d.total_in=d.total_out=0,d.msg=null,d.istate.mode=7,d.istate.blocks.reset(d,null),0):-2}x.mode=0,x.method=0,x.was=[0],x.need=0,x.marker=0,x.wbits=0,x.inflateEnd=function(d){return x.blocks&&x.blocks.free(d),x.blocks=null,0},x.inflateInit=function(d,I){return d.msg=null,x.blocks=null,I<8||I>15?(x.inflateEnd(d),-2):(x.wbits=I,d.istate.blocks=new Ia(d,1<<I),g(d),0)},x.inflate=function(d,I){let R,w;if(!d||!d.istate||!d.next_in)return-2;let P=d.istate;for(I=I==4?-5:0,R=-5;;)switch(P.mode){case 0:if(d.avail_in===0)return R;if(R=I,d.avail_in--,d.total_in++,(15&(P.method=d.read_byte(d.next_in_index++)))!=8){P.mode=13,d.msg="unknown compression method",P.marker=5;break}if(8+(P.method>>4)>P.wbits){P.mode=13,d.msg="invalid window size",P.marker=5;break}P.mode=1;case 1:if(d.avail_in===0)return R;if(R=I,d.avail_in--,d.total_in++,w=255&d.read_byte(d.next_in_index++),((P.method<<8)+w)%31!=0){P.mode=13,d.msg="incorrect header check",P.marker=5;break}if((32&w)==0){P.mode=7;break}P.mode=2;case 2:if(d.avail_in===0)return R;R=I,d.avail_in--,d.total_in++,P.need=(255&d.read_byte(d.next_in_index++))<<24&4278190080,P.mode=3;case 3:if(d.avail_in===0)return R;R=I,d.avail_in--,d.total_in++,P.need+=(255&d.read_byte(d.next_in_index++))<<16&16711680,P.mode=4;case 4:if(d.avail_in===0)return R;R=I,d.avail_in--,d.total_in++,P.need+=(255&d.read_byte(d.next_in_index++))<<8&65280,P.mode=5;case 5:return d.avail_in===0?R:(R=I,d.avail_in--,d.total_in++,P.need+=255&d.read_byte(d.next_in_index++),P.mode=6,2);case 6:return P.mode=13,d.msg="need dictionary",P.marker=0,-2;case 7:if(R=P.blocks.proc(d,R),R==-3){P.mode=13,P.marker=0;break}if(R==0&&(R=I),R!=1)return R;R=I,P.blocks.reset(d,P.was),P.mode=12;case 12:return 1;case 13:return-3;default:return-2}},x.inflateSetDictionary=function(d,I,R){let w=0,P=R;if(!d||!d.istate||d.istate.mode!=6)return-2;let O=d.istate;return P>=1<<O.wbits&&(P=(1<<O.wbits)-1,w=R-P),O.blocks.set_dictionary(I,w,P),O.mode=7,0},x.inflateSync=function(d){let I,R,w,P,O;if(!d||!d.istate)return-2;let C=d.istate;if(C.mode!=13&&(C.mode=13,C.marker=0),(I=d.avail_in)===0)return-5;for(R=d.next_in_index,w=C.marker;I!==0&&w<4;)d.read_byte(R)==bn[w]?w++:w=d.read_byte(R)!==0?0:4-w,R++,I--;return d.total_in+=R-d.next_in_index,d.next_in_index=R,d.avail_in=I,C.marker=w,w!=4?-3:(P=d.total_in,O=d.total_out,g(d),d.total_in=P,d.total_out=O,C.mode=7,0)},x.inflateSyncPoint=function(d){return d&&d.istate&&d.istate.blocks?d.istate.blocks.sync_point():-2}}function Ge(){}function Ui(x){let g=new Ge,d=x&&x.chunkSize?Math.floor(2*x.chunkSize):131072,I=new Uint8Array(d),R=!1;g.inflateInit(),g.next_out=I,this.append=function(w,P){let O=[],C,B,H=0,z=0,Q=0;if(w.length!==0){g.next_in_index=0,g.next_in=w,g.avail_in=w.length;do{if(g.next_out_index=0,g.avail_out=d,g.avail_in!==0||R||(g.next_in_index=0,R=!0),C=g.inflate(0),R&&C===-5){if(g.avail_in!==0)throw new Error("inflating: bad input")}else if(C!==0&&C!==1)throw new Error("inflating: "+g.msg);if((R||C===1)&&g.avail_in===w.length)throw new Error("inflating: bad input");g.next_out_index&&(g.next_out_index===d?O.push(new Uint8Array(I)):O.push(I.slice(0,g.next_out_index))),Q+=g.next_out_index,P&&g.next_in_index>0&&g.next_in_index!=H&&(P(g.next_in_index),H=g.next_in_index)}while(g.avail_in>0||g.avail_out===0);return O.length>1?(B=new Uint8Array(Q),O.forEach(function(_t){B.set(_t,z),z+=_t.length})):B=O[0]||new Uint8Array(0),B}},this.flush=function(){g.inflateEnd()}}Ge.prototype={inflateInit:function(x){let g=this;return g.istate=new Pa,x||(x=15),g.istate.inflateInit(g,x)},inflate:function(x){let g=this;return g.istate?g.istate.inflate(g,x):-2},inflateEnd:function(){let x=this;if(!x.istate)return-2;let g=x.istate.inflateEnd(x);return x.istate=null,g},inflateSync:function(){let x=this;return x.istate?x.istate.inflateSync(x):-2},inflateSetDictionary:function(x,g){let d=this;return d.istate?d.istate.inflateSetDictionary(d,x,g):-2},read_byte:function(x){return this.next_in[x]},read_buf:function(x,g){return this.next_in.subarray(x,x+g)}},self.initCodec=()=>{self.Deflate=ve,self.Inflate=Ui}}).toString(),r=URL.createObjectURL(new Blob(["("+e+")()"],{type:"text/javascript"}));wa({workerScripts:{inflate:[r],deflate:[r]}})}},pc="text/plain",Oo=class{constructor(){this.size=0}init(){this.initialized=!0}},vc=class extends Oo{},Uo=class extends Oo{writeUint8Array(r){this.size+=r.length}},ko=class extends Uo{constructor(r){super();this.encoding=r,this.blob=new Blob([],{type:pc})}async writeUint8Array(r){super.writeUint8Array(r),this.blob=new Blob([this.blob,r.buffer],{type:pc})}getData(){let r=new FileReader;return new Promise((t,i)=>{r.onload=n=>t(n.target.result),r.onerror=()=>i(r.error),r.readAsText(this.blob,this.encoding)})}},Fo=class extends vc{constructor(r){super();this.blob=r,this.size=r.size}async readUint8Array(r,t){let i=new FileReader;return new Promise((n,a)=>{i.onload=s=>n(new Uint8Array(s.target.result)),i.onerror=()=>a(i.error),i.readAsArrayBuffer(this.blob.slice(r,r+t))})}},Ta=class extends Uo{constructor(r){super();this.offset=0,this.contentType=r,this.blob=new Blob([],{type:r})}async writeUint8Array(r){super.writeUint8Array(r),this.blob=new Blob([this.blob,r.buffer],{type:this.contentType}),this.offset=this.blob.size}getData(){return this.blob}},Mo=4294967295,_c=65535,Ty=8,Ey=0,Sy=99,Iy=67324752,mc=33639248,Py=101010256,gc=101075792,Ay=117853008,yc=22,Lo=20,No=56,Cy=1,Ry=39169,Oy=28789,Uy=25461,xc=1,ky=6,bc=8,wc=2048,Tc=16,Fy="/",My="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),Ly=e=>{let r="";for(let t=0;t<e.length;t++)r+=My[e[t]];return r},Ny=64,Dy="Abort error";async function By(e,r,t,i,n,a,s){let o=Math.max(a.chunkSize,Ny);return h();async function h(l=0,u=0){let f=s.signal;if(l<n){Do(f,e);let c=await r.readUint8Array(l+i,Math.min(o,n-l)),p=c.length;Do(f,e);let m=await e.append(c);if(Do(f,e),u+=await Ec(t,m),s.onprogress)try{s.onprogress(l+p,n)}catch(_){}return h(l+o,u)}else{let c=await e.flush();return u+=await Ec(t,c.data),{signature:c.signature,length:u}}}}function Do(e,r){if(e&&e.aborted)throw r.flush(),new Error(Dy)}async function Ec(e,r){return r.length&&await e.writeUint8Array(r),r.length}var Gy=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod"],Bo=class{constructor(r){Gy.forEach(t=>this[t]=r[t])}},Go="File format is not recognized",Xy="End of central directory not found",Hy="End of Zip64 central directory not found",jy="End of Zip64 central directory locator not found",Vy="Central directory header not found",Yy="Local file header not found",Wy="Zip64 extra field not found",zy="File contains encrypted entry",qy="Encryption method not supported",Sc="Compression method not supported",Ic="utf-8",Pc=["uncompressedSize","compressedSize","offset"],Xo=class{constructor(r,t={}){Object.assign(this,{reader:r,options:t,config:sy()})}async getEntries(r={}){let t=this,i=t.reader;if(i.initialized||await i.init(),i.size<yc)throw new Error(Go);let n=await $y(i,Py,i.size,yc,_c*16);if(!n)throw new Error(Xy);let a=Le(n),s=xe(a,12),o=xe(a,16),h=ir(a,8),l=0;if(o==Mo||h==_c){let _=await ti(i,n.offset-Lo,Lo),v=Le(_);if(xe(v,0)!=Ay)throw new Error(Hy);o=Ea(v,8);let y=await ti(i,o,No),E=Le(y),T=n.offset-Lo-No;if(xe(E,0)!=gc&&o!=T){let M=o;o=T,l=o-M,y=await ti(i,o,No),E=Le(y)}if(xe(E,0)!=gc)throw new Error(jy);h=Ea(E,24),s=xe(v,4),o-=Ea(E,40)}if(o<0||o>=i.size)throw new Error(Go);let u=0,f=await ti(i,o,i.size-o),c=Le(f),p=n.offset-s;if(xe(c,u)!=mc&&o!=p){let _=o;o=p,l=o-_,f=await ti(i,o,i.size-o),c=Le(f)}if(o<0||o>=i.size)throw new Error(Go);let m=[];for(let _=0;_<h;_++){let v=new Ac(i,t.config,t.options);if(xe(c,u)!=mc)throw new Error(Vy);Cc(v,c,u+6);let y=Boolean(v.bitFlag.languageEncodingFlag),E=u+46,T=E+v.filenameLength,M=T+v.extraFieldLength;Object.assign(v,{compressedSize:0,uncompressedSize:0,commentLength:ir(c,u+32),directory:(gn(c,u+38)&Tc)==Tc,offset:xe(c,u+42)+l,rawFilename:f.subarray(E,T),filenameUTF8:y,commentUTF8:y,rawExtraField:f.subarray(T,M)});let b=M+v.commentLength;v.rawComment=f.subarray(M,b),v.filename=Oc(v.rawFilename,v.filenameUTF8?Ic:Ri(t,r,"filenameEncoding")),v.comment=Oc(v.rawComment,v.commentUTF8?Ic:Ri(t,r,"commentEncoding")),!v.directory&&v.filename.endsWith(Fy)&&(v.directory=!0),Rc(v,v,c,u+6);let S=new Bo(v);if(S.getData=(U,D)=>v.getData(U,D),m.push(S),u=b,r.onprogress)try{r.onprogress(_+1,h,new Bo(v))}catch(U){}}return m}async close(){}},Ac=class{constructor(r,t,i){Object.assign(this,{reader:r,config:t,options:i})}async getData(r,t={}){let i=this,{reader:n,offset:a,extraFieldAES:s,compressionMethod:o,config:h,bitFlag:l,signature:u,rawLastModDate:f,compressedSize:c}=i,p=i.localDirectory={};n.initialized||await n.init();let m=await ti(n,a,30),_=Le(m),v=Ri(i,t,"password");if(v=v&&v.length&&v,s&&s.originalCompressionMethod!=Sy)throw new Error(Sc);if(o!=Ey&&o!=Ty)throw new Error(Sc);if(xe(_,0)!=Iy)throw new Error(Yy);Cc(p,_,4);let y=a+30+p.filenameLength,E=y+p.extraFieldLength;p.rawExtraField=m.subarray(y,E),Rc(i,p,_,4);let T=i.encrypted&&p.encrypted,M=T&&!s;if(T){if(!M&&s.strength===void 0)throw new Error(qy);if(!v)throw new Error(zy)}let b=await by(h.Inflate,{codecType:oc,password:v,zipCrypto:M,encryptionStrength:s&&s.strength,signed:Ri(i,t,"checkSignature"),passwordVerification:M&&(l.dataDescriptor?f>>>8&255:u>>>24&255),signature:u,compressed:o!=0,encrypted:T,useWebWorkers:Ri(i,t,"useWebWorkers")},h);r.initialized||await r.init();let S=Ri(i,t,"signal");return await By(b,n,r,E,c,h,{onprogress:t.onprogress,signal:S}),r.getData()}};function Cc(e,r,t){let i=e.rawBitFlag=ir(r,t+2),n=(i&xc)==xc;Object.assign(e,{encrypted:n,version:ir(r,t),bitFlag:{level:(i&ky)>>1,dataDescriptor:(i&bc)==bc,languageEncodingFlag:(i&wc)==wc},rawLastModDate:xe(r,t+6),lastModDate:Zy(e.rawLastModDate),filenameLength:ir(r,t+22),extraFieldLength:ir(r,t+24)})}function Rc(e,r,t,i){let n=r.rawExtraField,a=r.extraField=new Map,s=Le(new Uint8Array(n)),o=0;try{for(;o<n.length;){let p=ir(s,o),m=ir(s,o+2);a.set(p,{type:p,data:n.slice(o+4,o+4+m)}),o+=4+m}}catch(p){}let h=ir(t,i+4);r.signature=xe(t,i+10),r.uncompressedSize=xe(t,i+18),r.compressedSize=xe(t,i+14);let l=r.extraFieldZip64=a.get(Cy);l&&Ky(l,r);let u=r.extraFieldUnicodePath=a.get(Oy);u&&Uc(u,"filename","rawFilename",r,e);let f=r.extraFieldUnicodeComment=a.get(Uy);f&&Uc(f,"comment","rawComment",r,e);let c=r.extraFieldAES=a.get(Ry);c?Jy(c,r,h):r.compressionMethod=h}function Ky(e,r){r.zip64=!0;let t=Le(e.data);e.values=[];for(let n=0;n<Math.floor(e.data.length/8);n++)e.values.push(Ea(t,0+n*8));let i=Pc.filter(n=>r[n]==Mo);for(let n=0;n<i.length;n++)e[i[n]]=e.values[n];Pc.forEach(n=>{if(r[n]==Mo)if(e&&e[n]!==void 0)r[n]=e[n];else throw new Error(Wy)})}function Uc(e,r,t,i,n){let a=Le(e.data);e.version=gn(a,0),e.signature=xe(a,1);let s=new Pi;s.append(n[t]);let o=Le(new Uint8Array(4));o.setUint32(0,s.get(),!0),e[r]=new TextDecoder().decode(e.data.subarray(5)),e.valid=!n.bitFlag.languageEncodingFlag&&e.signature==xe(o,0),e.valid&&(i[r]=e[r],i[r+"UTF8"]=!0)}function Jy(e,r,t){if(e){let i=Le(e.data);e.vendorVersion=gn(i,0),e.vendorId=gn(i,2);let n=gn(i,4);e.strength=n,e.originalCompressionMethod=t,r.compressionMethod=e.compressionMethod=ir(i,5)}else r.compressionMethod=t}async function $y(e,r,t,i,n){let a=new Uint8Array(4),s=Le(a);Qy(s,0,r);let o=i+n;return await h(i)||await h(Math.min(o,t));async function h(l){let u=t-l,f=await ti(e,u,l);for(let c=f.length-i;c>=0;c--)if(f[c]==a[0]&&f[c+1]==a[1]&&f[c+2]==a[2]&&f[c+3]==a[3])return{offset:u+c,buffer:f.slice(c,c+i).buffer}}}function Ri(e,r,t){return r[t]===void 0?e.options[t]:r[t]}function Oc(e,r){return!r||r.trim().toLowerCase()=="cp437"?Ly(e):new TextDecoder(r).decode(e)}function Zy(e){let r=(e&4294901760)>>16,t=e&65535;try{return new Date(1980+((r&65024)>>9),((r&480)>>5)-1,r&31,(t&63488)>>11,(t&2016)>>5,(t&31)*2,0)}catch(i){}}function gn(e,r){return e.getUint8(r)}function ir(e,r){return e.getUint16(r,!0)}function xe(e,r){return e.getUint32(r,!0)}function Ea(e,r){return Number(e.getBigUint64(r,!0))}function Qy(e,r,t){e.setUint32(r,t,!0)}function Le(e){return new DataView(e.buffer)}function ti(e,r,t){return e.readUint8Array(r,t)}wy();wa({Deflate:D1,Inflate:ny});var kc=e=>{try{return decodeURIComponent(e)}catch(r){return e}},tx=e=>{let r=Number(e);return isNaN(r)?e:r},Fc=class extends Error{constructor(r,t){super();this.message=r,this.error=t}},Mc=class{constructor(){this.obj={},this.mode=""}consume(r){if(/^\[\w+\]$/.test(r))this.mode=/^\[(\w+)\]$/.exec(r)[1],this.obj[this.mode]={},this.mode=="HitObjects"&&(this.obj.HitObjects=[]);else if(this.mode==="HitObjects"){if(this.obj.General.Mode!==3)return!0;let t=this.obj.Difficulty.CircleSize,i=r.split(":")[0].split(",");if(i.length<4)return!1;let n=parseInt(i[0]),a=Math.floor(n*t/512),s=parseInt(i[2]),o=parseInt(i[3]),h=(o&1)!=0,l=(o&1<<7)!=0;if(h)this.obj.HitObjects.push({start:s,lane:a});else if(l&&i.length>=6){let u=parseInt(i[5]);this.obj.HitObjects.push({start:s,end:u,lane:a})}return!1}else if(r.includes(":")){let[t,i]=r.split(":").map(n=>n.trim());this.obj[this.mode][t]=tx(i)}else this.mode==="Events"&&r.startsWith('0,0,"')&&(this.obj.General.BackgroundFilename=JSON.parse(r.split(",")[2]));return!1}postProcess(){typeof this.obj.Metadata.Title=="number"&&(this.obj.Metadata.Title=this.obj.Metadata.Title.toString()),this.obj.Metadata.TitleUnicode?this.obj.Metadata.TitleUnicode=this.obj.Metadata.TitleUnicode.toString():this.obj.Metadata.TitleUnicode="",this.obj.Metadata.ArtistUnicode?this.obj.Metadata.ArtistUnicode=this.obj.Metadata.ArtistUnicode.toString():this.obj.Metadata.ArtistUnicode="",typeof this.obj.Metadata.Tags=="string"&&(this.obj.Metadata.Tags=this.obj.Metadata.Tags.split("s").filter(r=>r).map(r=>r.trim())),this.obj.General.AudioFilename&&(this.obj.General.AudioFilename=kc(this.obj.General.AudioFilename)),this.obj.General.BackgroundFilename&&(this.obj.General.BackgroundFilename=kc(this.obj.General.BackgroundFilename))}get(){return this.obj}},Lc=e=>{let r=new Mc;for(let t of e.split(/\r?\n/))try{if(r.consume(t))break}catch(i){throw new Fc(t,i)}return r.postProcess(),r.get()};wa({useWebWorkers:!0});var be=new fo,nr=new Ki({width:be.width,height:be.height,backgroundColor:0});document.body.append(nr.view);nr.view.focus();var Nc=80,ex=e=>{let r=new ie,t=new le(e,{fill:0}),i=new Oe;return i.beginFill(16777215,.5),i.lineStyle(1,0),i.drawRect(0,0,800,Nc),r.addChild(i),r.addChild(t),r.interactive=!0,r.buttonMode=!0,r},rx=()=>{let e=new ie,r=new ze;r.width=be.width,r.height=be.height,e.addChild(r);let t=new ie;return e.addChild(t),{songMenu:e,difficultyMenu:t,bgSprite:r}},Ho=(e,r)=>{let t=new ze(e);return t.width=r,t.height=r,t.interactive=!0,t.buttonMode=!0,t},ei=new ie,yn=new le("Loading...",{fill:16777215});yn.x=be.center_x-yn.width/2;yn.y=be.center_y-yn.height/2;ei.addChild(yn);nr.stage.addChild(ei);var ri=new ie;ri.zIndex=100;ei.addChild(ri);var ix=(e,r,t)=>{let i=20,n=30,a=10,s=20,o=new le(r,{fill:0,fontSize:40,fontWeight:"bold"});o.x=i,o.y=n;let h=new le(t,{fill:0});h.x=i,h.y=o.y+o.height+a;let l=Math.max(o.width,h.width)+2*i,u=new le("Close",{fill:0,fontWeight:"bold"});u.interactive=!0,u.buttonMode=!0,u.x=l/2-u.width/2,u.y=h.y+h.height+s;let f=o.height+a+h.height+s+u.height+2*n,c=new Oe;c.beginFill(16777215,.8),c.drawRoundedRect(0,0,l,f,15);let p=new ie;p.addChild(c),p.addChild(o),p.addChild(h),p.addChild(u),u.on("click",()=>{e.removeChild(p)}),p.x=be.center_x-p.width/2,p.y=be.center_y-p.height/2,e.addChild(p)},nx=`Use the pager to switch songs, and select a diffuculty to start playing.

When a note touches the green ring, 
you need to press "t", "i", "v", "m" according to its position.

Using the "+" button at top left,
you can import osu! mania 4k beatmaps. (.osz)`,ax=async()=>{let e=await fetch("data.json").then(c=>c.json()),r=[],t=async c=>{var b,S;let{songMenu:p,difficultyMenu:m,bgSprite:_}=rx();r.push(p);let y=await new Xo(new Fo(c)).getEntries(),E=[],T=new Map;for(let U of y.filter(D=>D.filename.endsWith(".osu"))){let D=await U.getData(new ko),F=Lc(D);if(F.Difficulty.CircleSize==4){let N=F.General.AudioFilename,X=T.has(N)?T.get(N):await((b=y.find(ut=>ut.filename===N))==null?void 0:b.getData(new Ta));T.set(N,X);let $=F.General.BackgroundFilename,Z=T.has($)?T.get($):await((S=y.find(ut=>ut.filename===$))==null?void 0:S.getData(new Ta));T.set($,Z),E.push({title:`${F.Metadata.Title} [${F.Metadata.Version}]`,notes:F.HitObjects,song:X,bgTexture:Et.from(Qu(Z))})}}let M=E.find(U=>U.bgTexture);M&&(_.texture=M.bgTexture);for(let[U,D]of E.entries()){let F=ex(D.title);F.on("click",()=>{let{container:N,done:X}=ef(be,D);ln(nr.stage,ei,N),X.then($=>{console.log($);let{container:Z,done:ut}=rf(be,D,$);ln(nr.stage,N,Z),ut.then(()=>{ln(nr.stage,Z,ei)})})}),F.y=Nc*U,m.addChild(F)}};for(let c of e.default_maps){let p=await fetch(c).then(m=>m.blob());await t(p)}let i=(c,p)=>{ln(ei,r[p],r[c]),ei.sortChildren()},n=128,a=0,s=Ho(nr.loader.resources["assets/left.png"].texture,n);s.y=be.height-n,ri.addChild(s);let o=Ho(nr.loader.resources["assets/right.png"].texture,n);o.y=be.height-n,o.x=be.width-n,ri.addChild(o),s.on("click",()=>{let c=co(a-1,r.length);i(c,a),a=c}),o.on("click",()=>{let c=co(a+1,r.length);i(c,a),a=c}),i(0,0);let h=100,l=new le("?",{fill:0,fontSize:h});l.x=be.center_x-l.width/2,l.y=be.height-(n-h)/2-h,l.interactive=!0,l.buttonMode=!0,l.on("click",()=>{ix(ri,"Help",nx)}),ri.addChild(l);let u=c=>new Promise((p,m)=>{c.onchange=_=>{c.files.length>=1?p(c.files.item(0)):m()},c.click()}),f=Ho(nr.loader.resources["assets/plus.png"].texture,n);f.x=be.width-n,f.on("click",()=>{u(document.getElementById("file")).then(t).then(()=>i(r.length-1,a))}),ri.addChild(f)};nr.loader.add("assets/left.png").add("assets/right.png").add("assets/plus.png").load(ax);window.addEventListener("contextmenu",e=>e.preventDefault());
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 * @pixi/accessibility - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/app - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/compressed-textures - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/core - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/display - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/extract - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-alpha - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-blur - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-color-matrix - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-displacement - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-fxaa - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-noise - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/graphics - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/interaction - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/loaders - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/math - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mesh - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mesh-extras - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-cache-as-bitmap - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-get-child-by-name - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-get-global-position - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/particles - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/polyfill - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/prepare - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/runner - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/settings - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite-animated - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite-tiling - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/spritesheet - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/text - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/text-bitmap - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/ticker - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/utils - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * pixi.js - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! https://mths.be/punycode v1.4.1 by @mathias */
//# sourceMappingURL=index.js.map
